<html>
<head>
<meta name="viewport" content="width=device-width">
<meta charset="UTF-8">
<script src="data:application/x-javascript;base64,Y2xhc3MgZXtjb25zdHJ1Y3RvcihhLGIsYyxkLGYpe3RoaXMuX2xlZ2FjeUNhbnZhc1NpemU9ZS5ERUZBVUxUX0NBTlZBU19TSVpFO3RoaXMuX3ByZWZlcnJlZENhbWVyYT0iZW52aXJvbm1lbnQiO3RoaXMuX21heFNjYW5zUGVyU2Vjb25kPTI1O3RoaXMuX2xhc3RTY2FuVGltZXN0YW1wPS0xO3RoaXMuX2Rlc3Ryb3llZD10aGlzLl9mbGFzaE9uPXRoaXMuX3BhdXNlZD10aGlzLl9hY3RpdmU9ITE7dGhpcy4kdmlkZW89YTt0aGlzLiRjYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7YyYmIm9iamVjdCI9PT10eXBlb2YgYz90aGlzLl9vbkRlY29kZT1iOihjfHxkfHxmP2NvbnNvbGUud2FybigiWW91J3JlIHVzaW5nIGEgZGVwcmVjYXRlZCB2ZXJzaW9uIG9mIHRoZSBRclNjYW5uZXIgY29uc3RydWN0b3Igd2hpY2ggd2lsbCBiZSByZW1vdmVkIGluIHRoZSBmdXR1cmUiKTpjb25zb2xlLndhcm4oIk5vdGUgdGhhdCB0aGUgdHlwZSBvZiB0aGUgc2NhbiByZXN1bHQgcGFzc2VkIHRvIG9uRGVjb2RlIHdpbGwgY2hhbmdlIGluIHRoZSBmdXR1cmUuIFRvIGFscmVhZHkgc3dpdGNoIHRvIHRoZSBuZXcgYXBpIHRvZGF5LCB5b3UgY2FuIHBhc3MgcmV0dXJuRGV0YWlsZWRTY2FuUmVzdWx0OiB0cnVlLiIpLAp0aGlzLl9sZWdhY3lPbkRlY29kZT1iKTtiPSJvYmplY3QiPT09dHlwZW9mIGM/Yzp7fTt0aGlzLl9vbkRlY29kZUVycm9yPWIub25EZWNvZGVFcnJvcnx8KCJmdW5jdGlvbiI9PT10eXBlb2YgYz9jOnRoaXMuX29uRGVjb2RlRXJyb3IpO3RoaXMuX2NhbGN1bGF0ZVNjYW5SZWdpb249Yi5jYWxjdWxhdGVTY2FuUmVnaW9ufHwoImZ1bmN0aW9uIj09PXR5cGVvZiBkP2Q6dGhpcy5fY2FsY3VsYXRlU2NhblJlZ2lvbik7dGhpcy5fcHJlZmVycmVkQ2FtZXJhPWIucHJlZmVycmVkQ2FtZXJhfHxmfHx0aGlzLl9wcmVmZXJyZWRDYW1lcmE7dGhpcy5fbGVnYWN5Q2FudmFzU2l6ZT0ibnVtYmVyIj09PXR5cGVvZiBjP2M6Im51bWJlciI9PT10eXBlb2YgZD9kOnRoaXMuX2xlZ2FjeUNhbnZhc1NpemU7dGhpcy5fbWF4U2NhbnNQZXJTZWNvbmQ9Yi5tYXhTY2Fuc1BlclNlY29uZHx8dGhpcy5fbWF4U2NhbnNQZXJTZWNvbmQ7dGhpcy5fb25QbGF5PXRoaXMuX29uUGxheS5iaW5kKHRoaXMpO3RoaXMuX29uTG9hZGVkTWV0YURhdGE9CnRoaXMuX29uTG9hZGVkTWV0YURhdGEuYmluZCh0aGlzKTt0aGlzLl9vblZpc2liaWxpdHlDaGFuZ2U9dGhpcy5fb25WaXNpYmlsaXR5Q2hhbmdlLmJpbmQodGhpcyk7dGhpcy5fdXBkYXRlT3ZlcmxheT10aGlzLl91cGRhdGVPdmVybGF5LmJpbmQodGhpcyk7YS5kaXNhYmxlUGljdHVyZUluUGljdHVyZT0hMDthLnBsYXlzSW5saW5lPSEwO2EubXV0ZWQ9ITA7bGV0IGg9ITE7YS5oaWRkZW4mJihhLmhpZGRlbj0hMSxoPSEwKTtkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGEpfHwoZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKSxoPSEwKTtjPWEucGFyZW50RWxlbWVudDtpZihiLmhpZ2hsaWdodFNjYW5SZWdpb258fGIuaGlnaGxpZ2h0Q29kZU91dGxpbmUpe2Q9ISFiLm92ZXJsYXk7dGhpcy4kb3ZlcmxheT1iLm92ZXJsYXl8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2Y9dGhpcy4kb3ZlcmxheS5zdHlsZTtmLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Zi5kaXNwbGF5PSJub25lIjsKZi5wb2ludGVyRXZlbnRzPSJub25lIjt0aGlzLiRvdmVybGF5LmNsYXNzTGlzdC5hZGQoInNjYW4tcmVnaW9uLWhpZ2hsaWdodCIpO2lmKCFkJiZiLmhpZ2hsaWdodFNjYW5SZWdpb24pe3RoaXMuJG92ZXJsYXkuaW5uZXJIVE1MPSc8c3ZnIGNsYXNzPSJzY2FuLXJlZ2lvbi1oaWdobGlnaHQtc3ZnIiB2aWV3Qm94PSIwIDAgMjM4IDIzOCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7bGVmdDowO3RvcDowO2ZpbGw6bm9uZTtzdHJva2U6I2U5YjIxMztzdHJva2Utd2lkdGg6NDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiPjxwYXRoIGQ9Ik0zMSAySDEwYTggOCAwIDAgMC04IDh2MjFNMjA3IDJoMjFhOCA4IDAgMCAxIDggOHYyMW0wIDE3NnYyMWE4IDggMCAwIDEtOCA4aC0yMW0tMTc2IDBIMTBhOCA4IDAgMCAxLTgtOHYtMjEiLz48L3N2Zz4nO3RyeXt0aGlzLiRvdmVybGF5LmZpcnN0RWxlbWVudENoaWxkLmFuaW1hdGUoe3RyYW5zZm9ybTpbInNjYWxlKC45OCkiLAoic2NhbGUoMS4wMSkiXX0se2R1cmF0aW9uOjQwMCxpdGVyYXRpb25zOkluZmluaXR5LGRpcmVjdGlvbjoiYWx0ZXJuYXRlIixlYXNpbmc6ImVhc2UtaW4tb3V0In0pfWNhdGNoKG0pe31jLmluc2VydEJlZm9yZSh0aGlzLiRvdmVybGF5LHRoaXMuJHZpZGVvLm5leHRTaWJsaW5nKX1iLmhpZ2hsaWdodENvZGVPdXRsaW5lJiYodGhpcy4kb3ZlcmxheS5pbnNlcnRBZGphY2VudEhUTUwoImJlZm9yZWVuZCIsJzxzdmcgY2xhc3M9ImNvZGUtb3V0bGluZS1oaWdobGlnaHQiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJkaXNwbGF5Om5vbmU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtmaWxsOm5vbmU7c3Ryb2tlOiNlOWIyMTM7c3Ryb2tlLXdpZHRoOjU7c3Ryb2tlLWRhc2hhcnJheToyNTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiPjxwb2x5Z29uLz48L3N2Zz4nKSx0aGlzLiRjb2RlT3V0bGluZUhpZ2hsaWdodD10aGlzLiRvdmVybGF5Lmxhc3RFbGVtZW50Q2hpbGQpfXRoaXMuX3NjYW5SZWdpb249CnRoaXMuX2NhbGN1bGF0ZVNjYW5SZWdpb24oYSk7cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpPT57bGV0IG09d2luZG93LmdldENvbXB1dGVkU3R5bGUoYSk7Im5vbmUiPT09bS5kaXNwbGF5JiYoYS5zdHlsZS5zZXRQcm9wZXJ0eSgiZGlzcGxheSIsImJsb2NrIiwiaW1wb3J0YW50IiksaD0hMCk7InZpc2libGUiIT09bS52aXNpYmlsaXR5JiYoYS5zdHlsZS5zZXRQcm9wZXJ0eSgidmlzaWJpbGl0eSIsInZpc2libGUiLCJpbXBvcnRhbnQiKSxoPSEwKTtoJiYoY29uc29sZS53YXJuKCJRclNjYW5uZXIgaGFzIG92ZXJ3cml0dGVuIHRoZSB2aWRlbyBoaWRpbmcgc3R5bGUgdG8gYXZvaWQgU2FmYXJpIHN0b3BwaW5nIHRoZSBwbGF5YmFjay4iKSxhLnN0eWxlLm9wYWNpdHk9IjAiLGEuc3R5bGUud2lkdGg9IjAiLGEuc3R5bGUuaGVpZ2h0PSIwIix0aGlzLiRvdmVybGF5JiZ0aGlzLiRvdmVybGF5LnBhcmVudEVsZW1lbnQmJnRoaXMuJG92ZXJsYXkucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLiRvdmVybGF5KSwKZGVsZXRlIHRoaXMuJG92ZXJsYXksZGVsZXRlIHRoaXMuJGNvZGVPdXRsaW5lSGlnaGxpZ2h0KTt0aGlzLiRvdmVybGF5JiZ0aGlzLl91cGRhdGVPdmVybGF5KCl9KTthLmFkZEV2ZW50TGlzdGVuZXIoInBsYXkiLHRoaXMuX29uUGxheSk7YS5hZGRFdmVudExpc3RlbmVyKCJsb2FkZWRtZXRhZGF0YSIsdGhpcy5fb25Mb2FkZWRNZXRhRGF0YSk7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigidmlzaWJpbGl0eWNoYW5nZSIsdGhpcy5fb25WaXNpYmlsaXR5Q2hhbmdlKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIix0aGlzLl91cGRhdGVPdmVybGF5KTt0aGlzLl9xckVuZ2luZVByb21pc2U9ZS5jcmVhdGVRckVuZ2luZSgpfXN0YXRpYyBzZXQgV09SS0VSX1BBVEgoYSl7Y29uc29sZS53YXJuKCJTZXR0aW5nIFFyU2Nhbm5lci5XT1JLRVJfUEFUSCBpcyBub3QgcmVxdWlyZWQgYW5kIG5vdCBzdXBwb3J0ZWQgYW55bW9yZS4gSGF2ZSBhIGxvb2sgYXQgdGhlIFJFQURNRSBmb3IgbmV3IHNldHVwIGluc3RydWN0aW9ucy4iKX1zdGF0aWMgYXN5bmMgaGFzQ2FtZXJhKCl7dHJ5e3JldHVybiEhKGF3YWl0IGUubGlzdENhbWVyYXMoITEpKS5sZW5ndGh9Y2F0Y2goYSl7cmV0dXJuITF9fXN0YXRpYyBhc3luYyBsaXN0Q2FtZXJhcyhhPQohMSl7aWYoIW5hdmlnYXRvci5tZWRpYURldmljZXMpcmV0dXJuW107bGV0IGI9YXN5bmMoKT0+KGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpKS5maWx0ZXIoZD0+InZpZGVvaW5wdXQiPT09ZC5raW5kKSxjO3RyeXthJiYoYXdhaXQgYigpKS5ldmVyeShkPT4hZC5sYWJlbCkmJihjPWF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHthdWRpbzohMSx2aWRlbzohMH0pKX1jYXRjaChkKXt9dHJ5e3JldHVybihhd2FpdCBiKCkpLm1hcCgoZCxmKT0+KHtpZDpkLmRldmljZUlkLGxhYmVsOmQubGFiZWx8fCgwPT09Zj8iRGVmYXVsdCBDYW1lcmEiOmBDYW1lcmEgJHtmKzF9YCl9KSl9ZmluYWxseXtjJiYoY29uc29sZS53YXJuKCJDYWxsIGxpc3RDYW1lcmFzIGFmdGVyIHN1Y2Nlc3NmdWxseSBzdGFydGluZyBhIFFSIHNjYW5uZXIgdG8gYXZvaWQgY3JlYXRpbmcgYSB0ZW1wb3JhcnkgdmlkZW8gc3RyZWFtIiksZS5fc3RvcFZpZGVvU3RyZWFtKGMpKX19YXN5bmMgaGFzRmxhc2goKXtsZXQgYTsKdHJ5e2lmKHRoaXMuJHZpZGVvLnNyY09iamVjdCl7aWYoISh0aGlzLiR2aWRlby5zcmNPYmplY3QgaW5zdGFuY2VvZiBNZWRpYVN0cmVhbSkpcmV0dXJuITE7YT10aGlzLiR2aWRlby5zcmNPYmplY3R9ZWxzZSBhPShhd2FpdCB0aGlzLl9nZXRDYW1lcmFTdHJlYW0oKSkuc3RyZWFtO3JldHVybiJ0b3JjaCJpbiBhLmdldFZpZGVvVHJhY2tzKClbMF0uZ2V0U2V0dGluZ3MoKX1jYXRjaChiKXtyZXR1cm4hMX1maW5hbGx5e2EmJmEhPT10aGlzLiR2aWRlby5zcmNPYmplY3QmJihjb25zb2xlLndhcm4oIkNhbGwgaGFzRmxhc2ggYWZ0ZXIgc3VjY2Vzc2Z1bGx5IHN0YXJ0aW5nIHRoZSBzY2FubmVyIHRvIGF2b2lkIGNyZWF0aW5nIGEgdGVtcG9yYXJ5IHZpZGVvIHN0cmVhbSIpLGUuX3N0b3BWaWRlb1N0cmVhbShhKSl9fWlzRmxhc2hPbigpe3JldHVybiB0aGlzLl9mbGFzaE9ufWFzeW5jIHRvZ2dsZUZsYXNoKCl7dGhpcy5fZmxhc2hPbj9hd2FpdCB0aGlzLnR1cm5GbGFzaE9mZigpOmF3YWl0IHRoaXMudHVybkZsYXNoT24oKX1hc3luYyB0dXJuRmxhc2hPbigpe2lmKCF0aGlzLl9mbGFzaE9uJiYKIXRoaXMuX2Rlc3Ryb3llZCYmKHRoaXMuX2ZsYXNoT249ITAsdGhpcy5fYWN0aXZlJiYhdGhpcy5fcGF1c2VkKSl0cnl7aWYoIWF3YWl0IHRoaXMuaGFzRmxhc2goKSl0aHJvdyJObyBmbGFzaCBhdmFpbGFibGUiO2F3YWl0IHRoaXMuJHZpZGVvLnNyY09iamVjdC5nZXRWaWRlb1RyYWNrcygpWzBdLmFwcGx5Q29uc3RyYWludHMoe2FkdmFuY2VkOlt7dG9yY2g6ITB9XX0pfWNhdGNoKGEpe3Rocm93IHRoaXMuX2ZsYXNoT249ITEsYTt9fWFzeW5jIHR1cm5GbGFzaE9mZigpe3RoaXMuX2ZsYXNoT24mJih0aGlzLl9mbGFzaE9uPSExLGF3YWl0IHRoaXMuX3Jlc3RhcnRWaWRlb1N0cmVhbSgpKX1kZXN0cm95KCl7dGhpcy4kdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZGVkbWV0YWRhdGEiLHRoaXMuX29uTG9hZGVkTWV0YURhdGEpO3RoaXMuJHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoInBsYXkiLHRoaXMuX29uUGxheSk7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigidmlzaWJpbGl0eWNoYW5nZSIsCnRoaXMuX29uVmlzaWJpbGl0eUNoYW5nZSk7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsdGhpcy5fdXBkYXRlT3ZlcmxheSk7dGhpcy5fZGVzdHJveWVkPSEwO3RoaXMuX2ZsYXNoT249ITE7dGhpcy5zdG9wKCk7ZS5fcG9zdFdvcmtlck1lc3NhZ2UodGhpcy5fcXJFbmdpbmVQcm9taXNlLCJjbG9zZSIpfWFzeW5jIHN0YXJ0KCl7aWYodGhpcy5fZGVzdHJveWVkKXRocm93IEVycm9yKCJUaGUgUVIgc2Nhbm5lciBjYW4gbm90IGJlIHN0YXJ0ZWQgYXMgaXQgaGFkIGJlZW4gZGVzdHJveWVkLiIpO2lmKCF0aGlzLl9hY3RpdmV8fHRoaXMuX3BhdXNlZClpZigiaHR0cHM6IiE9PXdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCYmY29uc29sZS53YXJuKCJUaGUgY2FtZXJhIHN0cmVhbSBpcyBvbmx5IGFjY2Vzc2libGUgaWYgdGhlIHBhZ2UgaXMgdHJhbnNmZXJyZWQgdmlhIGh0dHBzLiIpLHRoaXMuX2FjdGl2ZT0hMCwhZG9jdW1lbnQuaGlkZGVuKWlmKHRoaXMuX3BhdXNlZD0KITEsdGhpcy4kdmlkZW8uc3JjT2JqZWN0KWF3YWl0IHRoaXMuJHZpZGVvLnBsYXkoKTtlbHNlIHRyeXtsZXQge3N0cmVhbTphLGZhY2luZ01vZGU6Yn09YXdhaXQgdGhpcy5fZ2V0Q2FtZXJhU3RyZWFtKCk7IXRoaXMuX2FjdGl2ZXx8dGhpcy5fcGF1c2VkP2UuX3N0b3BWaWRlb1N0cmVhbShhKToodGhpcy5fc2V0VmlkZW9NaXJyb3IoYiksdGhpcy4kdmlkZW8uc3JjT2JqZWN0PWEsYXdhaXQgdGhpcy4kdmlkZW8ucGxheSgpLHRoaXMuX2ZsYXNoT24mJih0aGlzLl9mbGFzaE9uPSExLHRoaXMudHVybkZsYXNoT24oKS5jYXRjaCgoKT0+e30pKSl9Y2F0Y2goYSl7aWYoIXRoaXMuX3BhdXNlZCl0aHJvdyB0aGlzLl9hY3RpdmU9ITEsYTt9fXN0b3AoKXt0aGlzLnBhdXNlKCk7dGhpcy5fYWN0aXZlPSExfWFzeW5jIHBhdXNlKGE9ITEpe3RoaXMuX3BhdXNlZD0hMDtpZighdGhpcy5fYWN0aXZlKXJldHVybiEwO3RoaXMuJHZpZGVvLnBhdXNlKCk7dGhpcy4kb3ZlcmxheSYmKHRoaXMuJG92ZXJsYXkuc3R5bGUuZGlzcGxheT0KIm5vbmUiKTtsZXQgYj0oKT0+e3RoaXMuJHZpZGVvLnNyY09iamVjdCBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtJiYoZS5fc3RvcFZpZGVvU3RyZWFtKHRoaXMuJHZpZGVvLnNyY09iamVjdCksdGhpcy4kdmlkZW8uc3JjT2JqZWN0PW51bGwpfTtpZihhKXJldHVybiBiKCksITA7YXdhaXQgbmV3IFByb21pc2UoYz0+c2V0VGltZW91dChjLDMwMCkpO2lmKCF0aGlzLl9wYXVzZWQpcmV0dXJuITE7YigpO3JldHVybiEwfWFzeW5jIHNldENhbWVyYShhKXthIT09dGhpcy5fcHJlZmVycmVkQ2FtZXJhJiYodGhpcy5fcHJlZmVycmVkQ2FtZXJhPWEsYXdhaXQgdGhpcy5fcmVzdGFydFZpZGVvU3RyZWFtKCkpfXN0YXRpYyBhc3luYyBzY2FuSW1hZ2UoYSxiLGMsZCxmPSExLGg9ITEpe2xldCBtLG49ITE7YiYmKCJzY2FuUmVnaW9uImluIGJ8fCJxckVuZ2luZSJpbiBifHwiY2FudmFzImluIGJ8fCJkaXNhbGxvd0NhbnZhc1Jlc2l6aW5nImluIGJ8fCJhbHNvVHJ5V2l0aG91dFNjYW5SZWdpb24iaW4KYnx8InJldHVybkRldGFpbGVkU2NhblJlc3VsdCJpbiBiKT8obT1iLnNjYW5SZWdpb24sYz1iLnFyRW5naW5lLGQ9Yi5jYW52YXMsZj1iLmRpc2FsbG93Q2FudmFzUmVzaXppbmd8fCExLGg9Yi5hbHNvVHJ5V2l0aG91dFNjYW5SZWdpb258fCExLG49ITApOmJ8fGN8fGR8fGZ8fGg/Y29uc29sZS53YXJuKCJZb3UncmUgdXNpbmcgYSBkZXByZWNhdGVkIGFwaSBmb3Igc2NhbkltYWdlIHdoaWNoIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLiIpOmNvbnNvbGUud2FybigiTm90ZSB0aGF0IHRoZSByZXR1cm4gdHlwZSBvZiBzY2FuSW1hZ2Ugd2lsbCBjaGFuZ2UgaW4gdGhlIGZ1dHVyZS4gVG8gYWxyZWFkeSBzd2l0Y2ggdG8gdGhlIG5ldyBhcGkgdG9kYXksIHlvdSBjYW4gcGFzcyByZXR1cm5EZXRhaWxlZFNjYW5SZXN1bHQ6IHRydWUuIik7Yj0hIWM7dHJ5e2xldCBwLGs7W2MscF09YXdhaXQgUHJvbWlzZS5hbGwoW2N8fGUuY3JlYXRlUXJFbmdpbmUoKSxlLl9sb2FkSW1hZ2UoYSldKTsKW2Qsa109ZS5fZHJhd1RvQ2FudmFzKHAsbSxkLGYpO2xldCBxO2lmKGMgaW5zdGFuY2VvZiBXb3JrZXIpe2xldCBnPWM7Ynx8ZS5fcG9zdFdvcmtlck1lc3NhZ2VTeW5jKGcsImludmVyc2lvbk1vZGUiLCJib3RoIik7cT1hd2FpdCBuZXcgUHJvbWlzZSgobCx2KT0+e2xldCB3LHUscix5PS0xO3U9dD0+e3QuZGF0YS5pZD09PXkmJihnLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHUpLGcucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZXJyb3IiLHIpLGNsZWFyVGltZW91dCh3KSxudWxsIT09dC5kYXRhLmRhdGE/bCh7ZGF0YTp0LmRhdGEuZGF0YSxjb3JuZXJQb2ludHM6ZS5fY29udmVydFBvaW50cyh0LmRhdGEuY29ybmVyUG9pbnRzLG0pfSk6dihlLk5PX1FSX0NPREVfRk9VTkQpKX07cj10PT57Zy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIix1KTtnLnJlbW92ZUV2ZW50TGlzdGVuZXIoImVycm9yIixyKTtjbGVhclRpbWVvdXQodyk7digiU2Nhbm5lciBlcnJvcjogIisodD8KdC5tZXNzYWdlfHx0OiJVbmtub3duIEVycm9yIikpfTtnLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHUpO2cuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLHIpO3c9c2V0VGltZW91dCgoKT0+cigidGltZW91dCIpLDFFNCk7bGV0IHg9ay5nZXRJbWFnZURhdGEoMCwwLGQud2lkdGgsZC5oZWlnaHQpO3k9ZS5fcG9zdFdvcmtlck1lc3NhZ2VTeW5jKGcsImRlY29kZSIseCxbeC5kYXRhLmJ1ZmZlcl0pfSl9ZWxzZSBxPWF3YWl0IFByb21pc2UucmFjZShbbmV3IFByb21pc2UoKGcsbCk9PndpbmRvdy5zZXRUaW1lb3V0KCgpPT5sKCJTY2FubmVyIGVycm9yOiB0aW1lb3V0IiksMUU0KSksKGFzeW5jKCk9Pnt0cnl7dmFyIFtnXT1hd2FpdCBjLmRldGVjdChkKTtpZighZyl0aHJvdyBlLk5PX1FSX0NPREVfRk9VTkQ7cmV0dXJue2RhdGE6Zy5yYXdWYWx1ZSxjb3JuZXJQb2ludHM6ZS5fY29udmVydFBvaW50cyhnLmNvcm5lclBvaW50cyxtKX19Y2F0Y2gobCl7Zz1sLm1lc3NhZ2V8fGw7CmlmKC9ub3QgaW1wbGVtZW50ZWR8c2VydmljZSB1bmF2YWlsYWJsZS8udGVzdChnKSlyZXR1cm4gZS5fZGlzYWJsZUJhcmNvZGVEZXRlY3Rvcj0hMCxlLnNjYW5JbWFnZShhLHtzY2FuUmVnaW9uOm0sY2FudmFzOmQsZGlzYWxsb3dDYW52YXNSZXNpemluZzpmLGFsc29UcnlXaXRob3V0U2NhblJlZ2lvbjpofSk7dGhyb3dgU2Nhbm5lciBlcnJvcjogJHtnfWA7fX0pKCldKTtyZXR1cm4gbj9xOnEuZGF0YX1jYXRjaChwKXtpZighbXx8IWgpdGhyb3cgcDtsZXQgaz1hd2FpdCBlLnNjYW5JbWFnZShhLHtxckVuZ2luZTpjLGNhbnZhczpkLGRpc2FsbG93Q2FudmFzUmVzaXppbmc6Zn0pO3JldHVybiBuP2s6ay5kYXRhfWZpbmFsbHl7Ynx8ZS5fcG9zdFdvcmtlck1lc3NhZ2UoYywiY2xvc2UiKX19c2V0R3JheXNjYWxlV2VpZ2h0cyhhLGIsYyxkPSEwKXtlLl9wb3N0V29ya2VyTWVzc2FnZSh0aGlzLl9xckVuZ2luZVByb21pc2UsImdyYXlzY2FsZVdlaWdodHMiLHtyZWQ6YSxncmVlbjpiLApibHVlOmMsdXNlSW50ZWdlckFwcHJveGltYXRpb246ZH0pfXNldEludmVyc2lvbk1vZGUoYSl7ZS5fcG9zdFdvcmtlck1lc3NhZ2UodGhpcy5fcXJFbmdpbmVQcm9taXNlLCJpbnZlcnNpb25Nb2RlIixhKX1zdGF0aWMgYXN5bmMgY3JlYXRlUXJFbmdpbmUoYSl7YSYmY29uc29sZS53YXJuKCJTcGVjaWZ5aW5nIGEgd29ya2VyIHBhdGggaXMgbm90IHJlcXVpcmVkIGFuZCBub3Qgc3VwcG9ydGVkIGFueW1vcmUuIik7YT0oKT0+aW1wb3J0KCIuL3FyLXNjYW5uZXItd29ya2VyLm1pbi5qcyIpLnRoZW4oYz0+Yy5jcmVhdGVXb3JrZXIoKSk7aWYoISghZS5fZGlzYWJsZUJhcmNvZGVEZXRlY3RvciYmIkJhcmNvZGVEZXRlY3RvciJpbiB3aW5kb3cmJkJhcmNvZGVEZXRlY3Rvci5nZXRTdXBwb3J0ZWRGb3JtYXRzJiYoYXdhaXQgQmFyY29kZURldGVjdG9yLmdldFN1cHBvcnRlZEZvcm1hdHMoKSkuaW5jbHVkZXMoInFyX2NvZGUiKSkpcmV0dXJuIGEoKTtsZXQgYj1uYXZpZ2F0b3IudXNlckFnZW50RGF0YTsKcmV0dXJuIGImJmIuYnJhbmRzLnNvbWUoKHticmFuZDpjfSk9Pi9DaHJvbWl1bS9pLnRlc3QoYykpJiYvbWFjID9PUy9pLnRlc3QoYi5wbGF0Zm9ybSkmJmF3YWl0IGIuZ2V0SGlnaEVudHJvcHlWYWx1ZXMoWyJhcmNoaXRlY3R1cmUiLCJwbGF0Zm9ybVZlcnNpb24iXSkudGhlbigoe2FyY2hpdGVjdHVyZTpjLHBsYXRmb3JtVmVyc2lvbjpkfSk9Pi9hcm0vaS50ZXN0KGN8fCJhcm0iKSYmMTM8PXBhcnNlSW50KGR8fCIxMyIpKS5jYXRjaCgoKT0+ITApP2EoKTpuZXcgQmFyY29kZURldGVjdG9yKHtmb3JtYXRzOlsicXJfY29kZSJdfSl9X29uUGxheSgpe3RoaXMuX3NjYW5SZWdpb249dGhpcy5fY2FsY3VsYXRlU2NhblJlZ2lvbih0aGlzLiR2aWRlbyk7dGhpcy5fdXBkYXRlT3ZlcmxheSgpO3RoaXMuJG92ZXJsYXkmJih0aGlzLiRvdmVybGF5LnN0eWxlLmRpc3BsYXk9IiIpO3RoaXMuX3NjYW5GcmFtZSgpfV9vbkxvYWRlZE1ldGFEYXRhKCl7dGhpcy5fc2NhblJlZ2lvbj10aGlzLl9jYWxjdWxhdGVTY2FuUmVnaW9uKHRoaXMuJHZpZGVvKTsKdGhpcy5fdXBkYXRlT3ZlcmxheSgpfV9vblZpc2liaWxpdHlDaGFuZ2UoKXtkb2N1bWVudC5oaWRkZW4/dGhpcy5wYXVzZSgpOnRoaXMuX2FjdGl2ZSYmdGhpcy5zdGFydCgpfV9jYWxjdWxhdGVTY2FuUmVnaW9uKGEpe2xldCBiPU1hdGgucm91bmQoMi8zKk1hdGgubWluKGEudmlkZW9XaWR0aCxhLnZpZGVvSGVpZ2h0KSk7cmV0dXJue3g6TWF0aC5yb3VuZCgoYS52aWRlb1dpZHRoLWIpLzIpLHk6TWF0aC5yb3VuZCgoYS52aWRlb0hlaWdodC1iKS8yKSx3aWR0aDpiLGhlaWdodDpiLGRvd25TY2FsZWRXaWR0aDp0aGlzLl9sZWdhY3lDYW52YXNTaXplLGRvd25TY2FsZWRIZWlnaHQ6dGhpcy5fbGVnYWN5Q2FudmFzU2l6ZX19X3VwZGF0ZU92ZXJsYXkoKXtyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCk9PntpZih0aGlzLiRvdmVybGF5KXt2YXIgYT10aGlzLiR2aWRlbyxiPWEudmlkZW9XaWR0aCxjPWEudmlkZW9IZWlnaHQsZD1hLm9mZnNldFdpZHRoLGY9YS5vZmZzZXRIZWlnaHQsaD1hLm9mZnNldExlZnQsCm09YS5vZmZzZXRUb3Asbj13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShhKSxwPW4ub2JqZWN0Rml0LGs9Yi9jLHE9ZC9mO3N3aXRjaChwKXtjYXNlICJub25lIjp2YXIgZz1iO3ZhciBsPWM7YnJlYWs7Y2FzZSAiZmlsbCI6Zz1kO2w9ZjticmVhaztkZWZhdWx0OigiY292ZXIiPT09cD9rPnE6azxxKT8obD1mLGc9bCprKTooZz1kLGw9Zy9rKSwic2NhbGUtZG93biI9PT1wJiYoZz1NYXRoLm1pbihnLGIpLGw9TWF0aC5taW4obCxjKSl9dmFyIFt2LHddPW4ub2JqZWN0UG9zaXRpb24uc3BsaXQoIiAiKS5tYXAoKHIseSk9Pntjb25zdCB4PXBhcnNlRmxvYXQocik7cmV0dXJuIHIuZW5kc1dpdGgoIiUiKT8oeT9mLWw6ZC1nKSp4LzEwMDp4fSk7bj10aGlzLl9zY2FuUmVnaW9uLndpZHRofHxiO3E9dGhpcy5fc2NhblJlZ2lvbi5oZWlnaHR8fGM7cD10aGlzLl9zY2FuUmVnaW9uLnh8fDA7dmFyIHU9dGhpcy5fc2NhblJlZ2lvbi55fHwwO2s9dGhpcy4kb3ZlcmxheS5zdHlsZTtrLndpZHRoPQpgJHtuL2IqZ31weGA7ay5oZWlnaHQ9YCR7cS9jKmx9cHhgO2sudG9wPWAke20rdyt1L2MqbH1weGA7Yz0vc2NhbGVYXCgtMVwpLy50ZXN0KGEuc3R5bGUudHJhbnNmb3JtKTtrLmxlZnQ9YCR7aCsoYz9kLXYtZzp2KSsoYz9iLXAtbjpwKS9iKmd9cHhgO2sudHJhbnNmb3JtPWEuc3R5bGUudHJhbnNmb3JtfX0pfXN0YXRpYyBfY29udmVydFBvaW50cyhhLGIpe2lmKCFiKXJldHVybiBhO2xldCBjPWIueHx8MCxkPWIueXx8MCxmPWIud2lkdGgmJmIuZG93blNjYWxlZFdpZHRoP2Iud2lkdGgvYi5kb3duU2NhbGVkV2lkdGg6MTtiPWIuaGVpZ2h0JiZiLmRvd25TY2FsZWRIZWlnaHQ/Yi5oZWlnaHQvYi5kb3duU2NhbGVkSGVpZ2h0OjE7Zm9yKGxldCBoIG9mIGEpaC54PWgueCpmK2MsaC55PWgueSpiK2Q7cmV0dXJuIGF9X3NjYW5GcmFtZSgpeyF0aGlzLl9hY3RpdmV8fHRoaXMuJHZpZGVvLnBhdXNlZHx8dGhpcy4kdmlkZW8uZW5kZWR8fCgicmVxdWVzdFZpZGVvRnJhbWVDYWxsYmFjayJpbgp0aGlzLiR2aWRlbz90aGlzLiR2aWRlby5yZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrLmJpbmQodGhpcy4kdmlkZW8pOnJlcXVlc3RBbmltYXRpb25GcmFtZSkoYXN5bmMoKT0+e2lmKCEoMT49dGhpcy4kdmlkZW8ucmVhZHlTdGF0ZSkpe3ZhciBhPURhdGUubm93KCktdGhpcy5fbGFzdFNjYW5UaW1lc3RhbXAsYj0xRTMvdGhpcy5fbWF4U2NhbnNQZXJTZWNvbmQ7YTxiJiZhd2FpdCBuZXcgUHJvbWlzZShkPT5zZXRUaW1lb3V0KGQsYi1hKSk7dGhpcy5fbGFzdFNjYW5UaW1lc3RhbXA9RGF0ZS5ub3coKTt0cnl7dmFyIGM9YXdhaXQgZS5zY2FuSW1hZ2UodGhpcy4kdmlkZW8se3NjYW5SZWdpb246dGhpcy5fc2NhblJlZ2lvbixxckVuZ2luZTp0aGlzLl9xckVuZ2luZVByb21pc2UsY2FudmFzOnRoaXMuJGNhbnZhc30pfWNhdGNoKGQpe2lmKCF0aGlzLl9hY3RpdmUpcmV0dXJuO3RoaXMuX29uRGVjb2RlRXJyb3IoZCl9IWUuX2Rpc2FibGVCYXJjb2RlRGV0ZWN0b3J8fGF3YWl0IHRoaXMuX3FyRW5naW5lUHJvbWlzZSBpbnN0YW5jZW9mCldvcmtlcnx8KHRoaXMuX3FyRW5naW5lUHJvbWlzZT1lLmNyZWF0ZVFyRW5naW5lKCkpO2M/KHRoaXMuX29uRGVjb2RlP3RoaXMuX29uRGVjb2RlKGMpOnRoaXMuX2xlZ2FjeU9uRGVjb2RlJiZ0aGlzLl9sZWdhY3lPbkRlY29kZShjLmRhdGEpLHRoaXMuJGNvZGVPdXRsaW5lSGlnaGxpZ2h0JiYoY2xlYXJUaW1lb3V0KHRoaXMuX2NvZGVPdXRsaW5lSGlnaGxpZ2h0UmVtb3ZhbFRpbWVvdXQpLHRoaXMuX2NvZGVPdXRsaW5lSGlnaGxpZ2h0UmVtb3ZhbFRpbWVvdXQ9dm9pZCAwLHRoaXMuJGNvZGVPdXRsaW5lSGlnaGxpZ2h0LnNldEF0dHJpYnV0ZSgidmlld0JveCIsYCR7dGhpcy5fc2NhblJlZ2lvbi54fHwwfSBgK2Ake3RoaXMuX3NjYW5SZWdpb24ueXx8MH0gYCtgJHt0aGlzLl9zY2FuUmVnaW9uLndpZHRofHx0aGlzLiR2aWRlby52aWRlb1dpZHRofSBgK2Ake3RoaXMuX3NjYW5SZWdpb24uaGVpZ2h0fHx0aGlzLiR2aWRlby52aWRlb0hlaWdodH1gKSx0aGlzLiRjb2RlT3V0bGluZUhpZ2hsaWdodC5maXJzdEVsZW1lbnRDaGlsZC5zZXRBdHRyaWJ1dGUoInBvaW50cyIsCmMuY29ybmVyUG9pbnRzLm1hcCgoe3g6ZCx5OmZ9KT0+YCR7ZH0sJHtmfWApLmpvaW4oIiAiKSksdGhpcy4kY29kZU91dGxpbmVIaWdobGlnaHQuc3R5bGUuZGlzcGxheT0iIikpOnRoaXMuJGNvZGVPdXRsaW5lSGlnaGxpZ2h0JiYhdGhpcy5fY29kZU91dGxpbmVIaWdobGlnaHRSZW1vdmFsVGltZW91dCYmKHRoaXMuX2NvZGVPdXRsaW5lSGlnaGxpZ2h0UmVtb3ZhbFRpbWVvdXQ9c2V0VGltZW91dCgoKT0+dGhpcy4kY29kZU91dGxpbmVIaWdobGlnaHQuc3R5bGUuZGlzcGxheT0ibm9uZSIsMTAwKSl9dGhpcy5fc2NhbkZyYW1lKCl9KX1fb25EZWNvZGVFcnJvcihhKXthIT09ZS5OT19RUl9DT0RFX0ZPVU5EJiZjb25zb2xlLmxvZyhhKX1hc3luYyBfZ2V0Q2FtZXJhU3RyZWFtKCl7aWYoIW5hdmlnYXRvci5tZWRpYURldmljZXMpdGhyb3ciQ2FtZXJhIG5vdCBmb3VuZC4iO2xldCBhPS9eKGVudmlyb25tZW50fHVzZXIpJC8udGVzdCh0aGlzLl9wcmVmZXJyZWRDYW1lcmEpPyJmYWNpbmdNb2RlIjoKImRldmljZUlkIixiPVt7d2lkdGg6e21pbjoxMDI0fX0se3dpZHRoOnttaW46NzY4fX0se31dLGM9Yi5tYXAoZD0+T2JqZWN0LmFzc2lnbih7fSxkLHtbYV06e2V4YWN0OnRoaXMuX3ByZWZlcnJlZENhbWVyYX19KSk7Zm9yKGxldCBkIG9mWy4uLmMsLi4uYl0pdHJ5e2xldCBmPWF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHt2aWRlbzpkLGF1ZGlvOiExfSksaD10aGlzLl9nZXRGYWNpbmdNb2RlKGYpfHwoZC5mYWNpbmdNb2RlP3RoaXMuX3ByZWZlcnJlZENhbWVyYToiZW52aXJvbm1lbnQiPT09dGhpcy5fcHJlZmVycmVkQ2FtZXJhPyJ1c2VyIjoiZW52aXJvbm1lbnQiKTtyZXR1cm57c3RyZWFtOmYsZmFjaW5nTW9kZTpofX1jYXRjaChmKXt9dGhyb3ciQ2FtZXJhIG5vdCBmb3VuZC4iO31hc3luYyBfcmVzdGFydFZpZGVvU3RyZWFtKCl7bGV0IGE9dGhpcy5fcGF1c2VkO2F3YWl0IHRoaXMucGF1c2UoITApJiYhYSYmdGhpcy5fYWN0aXZlJiZhd2FpdCB0aGlzLnN0YXJ0KCl9c3RhdGljIF9zdG9wVmlkZW9TdHJlYW0oYSl7Zm9yKGxldCBiIG9mIGEuZ2V0VHJhY2tzKCkpYi5zdG9wKCksCmEucmVtb3ZlVHJhY2soYil9X3NldFZpZGVvTWlycm9yKGEpe3RoaXMuJHZpZGVvLnN0eWxlLnRyYW5zZm9ybT0ic2NhbGVYKCIrKCJ1c2VyIj09PWE/LTE6MSkrIikifV9nZXRGYWNpbmdNb2RlKGEpe3JldHVybihhPWEuZ2V0VmlkZW9UcmFja3MoKVswXSk/L3JlYXJ8YmFja3xlbnZpcm9ubWVudC9pLnRlc3QoYS5sYWJlbCk/ImVudmlyb25tZW50IjovZnJvbnR8dXNlcnxmYWNlL2kudGVzdChhLmxhYmVsKT8idXNlciI6bnVsbDpudWxsfXN0YXRpYyBfZHJhd1RvQ2FudmFzKGEsYixjLGQ9ITEpe2M9Y3x8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7bGV0IGY9YiYmYi54P2IueDowLGg9YiYmYi55P2IueTowLG09YiYmYi53aWR0aD9iLndpZHRoOmEudmlkZW9XaWR0aHx8YS53aWR0aCxuPWImJmIuaGVpZ2h0P2IuaGVpZ2h0OmEudmlkZW9IZWlnaHR8fGEuaGVpZ2h0O2R8fChkPWImJmIuZG93blNjYWxlZFdpZHRoP2IuZG93blNjYWxlZFdpZHRoOm0sYj1iJiZiLmRvd25TY2FsZWRIZWlnaHQ/CmIuZG93blNjYWxlZEhlaWdodDpuLGMud2lkdGghPT1kJiYoYy53aWR0aD1kKSxjLmhlaWdodCE9PWImJihjLmhlaWdodD1iKSk7Yj1jLmdldENvbnRleHQoIjJkIix7YWxwaGE6ITF9KTtiLmltYWdlU21vb3RoaW5nRW5hYmxlZD0hMTtiLmRyYXdJbWFnZShhLGYsaCxtLG4sMCwwLGMud2lkdGgsYy5oZWlnaHQpO3JldHVybltjLGJdfXN0YXRpYyBhc3luYyBfbG9hZEltYWdlKGEpe2lmKGEgaW5zdGFuY2VvZiBJbWFnZSlyZXR1cm4gYXdhaXQgZS5fYXdhaXRJbWFnZUxvYWQoYSksYTtpZihhIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudHx8YSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50fHxhIGluc3RhbmNlb2YgU1ZHSW1hZ2VFbGVtZW50fHwiT2Zmc2NyZWVuQ2FudmFzImluIHdpbmRvdyYmYSBpbnN0YW5jZW9mIE9mZnNjcmVlbkNhbnZhc3x8IkltYWdlQml0bWFwImluIHdpbmRvdyYmYSBpbnN0YW5jZW9mIEltYWdlQml0bWFwKXJldHVybiBhO2lmKGEgaW5zdGFuY2VvZgpGaWxlfHxhIGluc3RhbmNlb2YgQmxvYnx8YSBpbnN0YW5jZW9mIFVSTHx8InN0cmluZyI9PT10eXBlb2YgYSl7bGV0IGI9bmV3IEltYWdlO2Iuc3JjPWEgaW5zdGFuY2VvZiBGaWxlfHxhIGluc3RhbmNlb2YgQmxvYj9VUkwuY3JlYXRlT2JqZWN0VVJMKGEpOmEudG9TdHJpbmcoKTt0cnl7cmV0dXJuIGF3YWl0IGUuX2F3YWl0SW1hZ2VMb2FkKGIpLGJ9ZmluYWxseXsoYSBpbnN0YW5jZW9mIEZpbGV8fGEgaW5zdGFuY2VvZiBCbG9iKSYmVVJMLnJldm9rZU9iamVjdFVSTChiLnNyYyl9fWVsc2UgdGhyb3ciVW5zdXBwb3J0ZWQgaW1hZ2UgdHlwZS4iO31zdGF0aWMgYXN5bmMgX2F3YWl0SW1hZ2VMb2FkKGEpe2EuY29tcGxldGUmJjAhPT1hLm5hdHVyYWxXaWR0aHx8YXdhaXQgbmV3IFByb21pc2UoKGIsYyk9PntsZXQgZD1mPT57YS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixkKTthLnJlbW92ZUV2ZW50TGlzdGVuZXIoImVycm9yIixkKTtmIGluc3RhbmNlb2YgRXJyb3JFdmVudD8KYygiSW1hZ2UgbG9hZCBlcnJvciIpOmIoKX07YS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixkKTthLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixkKX0pfXN0YXRpYyBhc3luYyBfcG9zdFdvcmtlck1lc3NhZ2UoYSxiLGMsZCl7cmV0dXJuIGUuX3Bvc3RXb3JrZXJNZXNzYWdlU3luYyhhd2FpdCBhLGIsYyxkKX1zdGF0aWMgX3Bvc3RXb3JrZXJNZXNzYWdlU3luYyhhLGIsYyxkKXtpZighKGEgaW5zdGFuY2VvZiBXb3JrZXIpKXJldHVybi0xO2xldCBmPWUuX3dvcmtlck1lc3NhZ2VJZCsrO2EucG9zdE1lc3NhZ2Uoe2lkOmYsdHlwZTpiLGRhdGE6Y30sZCk7cmV0dXJuIGZ9fWUuREVGQVVMVF9DQU5WQVNfU0laRT00MDA7ZS5OT19RUl9DT0RFX0ZPVU5EPSJObyBRUiBjb2RlIGZvdW5kIjtlLl9kaXNhYmxlQmFyY29kZURldGVjdG9yPSExO2UuX3dvcmtlck1lc3NhZ2VJZD0wO2V4cG9ydCBkZWZhdWx0IGUKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXItc2Nhbm5lci5taW4uanMubWFwCg==" type="module"></script>
<script src="data:application/x-javascript;base64,ZXhwb3J0IGNvbnN0IGNyZWF0ZVdvcmtlcj0oKT0+bmV3IFdvcmtlcihVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtgY2xhc3MgeHtjb25zdHJ1Y3RvcihhLGIpe3RoaXMud2lkdGg9Yjt0aGlzLmhlaWdodD1hLmxlbmd0aC9iO3RoaXMuZGF0YT1hfXN0YXRpYyBjcmVhdGVFbXB0eShhLGIpe3JldHVybiBuZXcgeChuZXcgVWludDhDbGFtcGVkQXJyYXkoYSpiKSxhKX1nZXQoYSxiKXtyZXR1cm4gMD5hfHxhPj10aGlzLndpZHRofHwwPmJ8fGI+PXRoaXMuaGVpZ2h0PyExOiEhdGhpcy5kYXRhW2IqdGhpcy53aWR0aCthXX1zZXQoYSxiLGMpe3RoaXMuZGF0YVtiKnRoaXMud2lkdGgrYV09Yz8xOjB9c2V0UmVnaW9uKGEsYixjLGQsZSl7Zm9yKGxldCBmPWI7ZjxiK2Q7ZisrKWZvcihsZXQgZz1hO2c8YStjO2crKyl0aGlzLnNldChnLGYsISFlKX19CmNsYXNzIEF7Y29uc3RydWN0b3IoYSxiLGMpe3RoaXMud2lkdGg9YTthKj1iO2lmKGMmJmMubGVuZ3RoIT09YSl0aHJvdyBFcnJvcigiV3JvbmcgYnVmZmVyIHNpemUiKTt0aGlzLmRhdGE9Y3x8bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGEpfWdldChhLGIpe3JldHVybiB0aGlzLmRhdGFbYip0aGlzLndpZHRoK2FdfXNldChhLGIsYyl7dGhpcy5kYXRhW2IqdGhpcy53aWR0aCthXT1jfX0KY2xhc3MgYmF7Y29uc3RydWN0b3IoYSl7dGhpcy5iaXRPZmZzZXQ9dGhpcy5ieXRlT2Zmc2V0PTA7dGhpcy5ieXRlcz1hfXJlYWRCaXRzKGEpe2lmKDE+YXx8MzI8YXx8YT50aGlzLmF2YWlsYWJsZSgpKXRocm93IEVycm9yKCJDYW5ub3QgcmVhZCAiK2EudG9TdHJpbmcoKSsiIGJpdHMiKTt2YXIgYj0wO2lmKDA8dGhpcy5iaXRPZmZzZXQpe2I9OC10aGlzLmJpdE9mZnNldDt2YXIgYz1hPGI/YTpiO2ItPWM7Yj0odGhpcy5ieXRlc1t0aGlzLmJ5dGVPZmZzZXRdJjI1NT4+OC1jPDxiKT4+YjthLT1jO3RoaXMuYml0T2Zmc2V0Kz1jOzg9PT10aGlzLmJpdE9mZnNldCYmKHRoaXMuYml0T2Zmc2V0PTAsdGhpcy5ieXRlT2Zmc2V0KyspfWlmKDA8YSl7Zm9yKDs4PD1hOyliPWI8PDh8dGhpcy5ieXRlc1t0aGlzLmJ5dGVPZmZzZXRdJjI1NSx0aGlzLmJ5dGVPZmZzZXQrKyxhLT04OzA8YSYmKGM9OC1hLGI9Yjw8YXwodGhpcy5ieXRlc1t0aGlzLmJ5dGVPZmZzZXRdJjI1NT4+Yzw8Yyk+PmMsCnRoaXMuYml0T2Zmc2V0Kz1hKX1yZXR1cm4gYn1hdmFpbGFibGUoKXtyZXR1cm4gOCoodGhpcy5ieXRlcy5sZW5ndGgtdGhpcy5ieXRlT2Zmc2V0KS10aGlzLmJpdE9mZnNldH19dmFyIEIsQz1CfHwoQj17fSk7Qy5OdW1lcmljPSJudW1lcmljIjtDLkFscGhhbnVtZXJpYz0iYWxwaGFudW1lcmljIjtDLkJ5dGU9ImJ5dGUiO0MuS2Fuamk9ImthbmppIjtDLkVDST0iZWNpIjtDLlN0cnVjdHVyZWRBcHBlbmQ9InN0cnVjdHVyZWRhcHBlbmQiO3ZhciBELEU9RHx8KEQ9e30pO0VbRS5UZXJtaW5hdG9yPTBdPSJUZXJtaW5hdG9yIjtFW0UuTnVtZXJpYz0xXT0iTnVtZXJpYyI7RVtFLkFscGhhbnVtZXJpYz0yXT0iQWxwaGFudW1lcmljIjtFW0UuQnl0ZT00XT0iQnl0ZSI7RVtFLkthbmppPThdPSJLYW5qaSI7RVtFLkVDST03XT0iRUNJIjtFW0UuU3RydWN0dXJlZEFwcGVuZD0zXT0iU3RydWN0dXJlZEFwcGVuZCI7bGV0IEY9IjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOiIuc3BsaXQoIiIpOwpmdW5jdGlvbiBjYShhLGIpe2xldCBjPVtdLGQ9IiI7Yj1hLnJlYWRCaXRzKFs4LDE2LDE2XVtiXSk7Zm9yKGxldCBlPTA7ZTxiO2UrKyl7bGV0IGY9YS5yZWFkQml0cyg4KTtjLnB1c2goZil9dHJ5e2QrPWRlY29kZVVSSUNvbXBvbmVudChjLm1hcChlPT5cYCVcJHsoIjAiK2UudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTIpfVxgKS5qb2luKCIiKSl9Y2F0Y2goZSl7fXJldHVybntieXRlczpjLHRleHQ6ZH19CmZ1bmN0aW9uIGRhKGEsYil7YT1uZXcgYmEoYSk7bGV0IGM9OT49Yj8wOjI2Pj1iPzE6Mjtmb3IoYj17dGV4dDoiIixieXRlczpbXSxjaHVua3M6W10sdmVyc2lvbjpifTs0PD1hLmF2YWlsYWJsZSgpOyl7dmFyIGQ9YS5yZWFkQml0cyg0KTtpZihkPT09RC5UZXJtaW5hdG9yKXJldHVybiBiO2lmKGQ9PT1ELkVDSSkwPT09YS5yZWFkQml0cygxKT9iLmNodW5rcy5wdXNoKHt0eXBlOkIuRUNJLGFzc2lnbm1lbnROdW1iZXI6YS5yZWFkQml0cyg3KX0pOjA9PT1hLnJlYWRCaXRzKDEpP2IuY2h1bmtzLnB1c2goe3R5cGU6Qi5FQ0ksYXNzaWdubWVudE51bWJlcjphLnJlYWRCaXRzKDE0KX0pOjA9PT1hLnJlYWRCaXRzKDEpP2IuY2h1bmtzLnB1c2goe3R5cGU6Qi5FQ0ksYXNzaWdubWVudE51bWJlcjphLnJlYWRCaXRzKDIxKX0pOmIuY2h1bmtzLnB1c2goe3R5cGU6Qi5FQ0ksYXNzaWdubWVudE51bWJlcjotMX0pO2Vsc2UgaWYoZD09PUQuTnVtZXJpYyl7dmFyIGU9YSxmPVtdO2Q9IiI7Zm9yKHZhciBnPQplLnJlYWRCaXRzKFsxMCwxMiwxNF1bY10pOzM8PWc7KXt2YXIgaD1lLnJlYWRCaXRzKDEwKTtpZigxRTM8PWgpdGhyb3cgRXJyb3IoIkludmFsaWQgbnVtZXJpYyB2YWx1ZSBhYm92ZSA5OTkiKTt2YXIgaz1NYXRoLmZsb29yKGgvMTAwKSxtPU1hdGguZmxvb3IoaC8xMCklMTA7aCU9MTA7Zi5wdXNoKDQ4K2ssNDgrbSw0OCtoKTtkKz1rLnRvU3RyaW5nKCkrbS50b1N0cmluZygpK2gudG9TdHJpbmcoKTtnLT0zfWlmKDI9PT1nKXtnPWUucmVhZEJpdHMoNyk7aWYoMTAwPD1nKXRocm93IEVycm9yKCJJbnZhbGlkIG51bWVyaWMgdmFsdWUgYWJvdmUgOTkiKTtlPU1hdGguZmxvb3IoZy8xMCk7ZyU9MTA7Zi5wdXNoKDQ4K2UsNDgrZyk7ZCs9ZS50b1N0cmluZygpK2cudG9TdHJpbmcoKX1lbHNlIGlmKDE9PT1nKXtlPWUucmVhZEJpdHMoNCk7aWYoMTA8PWUpdGhyb3cgRXJyb3IoIkludmFsaWQgbnVtZXJpYyB2YWx1ZSBhYm92ZSA5Iik7Zi5wdXNoKDQ4K2UpO2QrPWUudG9TdHJpbmcoKX1iLnRleHQrPQpkO2IuYnl0ZXMucHVzaCguLi5mKTtiLmNodW5rcy5wdXNoKHt0eXBlOkIuTnVtZXJpYyx0ZXh0OmR9KX1lbHNlIGlmKGQ9PT1ELkFscGhhbnVtZXJpYyl7ZT1hO2Y9W107ZD0iIjtmb3IoZz1lLnJlYWRCaXRzKFs5LDExLDEzXVtjXSk7Mjw9ZzspbT1lLnJlYWRCaXRzKDExKSxrPU1hdGguZmxvb3IobS80NSksbSU9NDUsZi5wdXNoKEZba10uY2hhckNvZGVBdCgwKSxGW21dLmNoYXJDb2RlQXQoMCkpLGQrPUZba10rRlttXSxnLT0yOzE9PT1nJiYoZT1lLnJlYWRCaXRzKDYpLGYucHVzaChGW2VdLmNoYXJDb2RlQXQoMCkpLGQrPUZbZV0pO2IudGV4dCs9ZDtiLmJ5dGVzLnB1c2goLi4uZik7Yi5jaHVua3MucHVzaCh7dHlwZTpCLkFscGhhbnVtZXJpYyx0ZXh0OmR9KX1lbHNlIGlmKGQ9PT1ELkJ5dGUpZD1jYShhLGMpLGIudGV4dCs9ZC50ZXh0LGIuYnl0ZXMucHVzaCguLi5kLmJ5dGVzKSxiLmNodW5rcy5wdXNoKHt0eXBlOkIuQnl0ZSxieXRlczpkLmJ5dGVzLHRleHQ6ZC50ZXh0fSk7CmVsc2UgaWYoZD09PUQuS2Fuamkpe2Y9YTtkPVtdO2U9Zi5yZWFkQml0cyhbOCwxMCwxMl1bY10pO2ZvcihnPTA7ZzxlO2crKylrPWYucmVhZEJpdHMoMTMpLGs9TWF0aC5mbG9vcihrLzE5Mik8PDh8ayUxOTIsaz03OTM2Pms/ayszMzA4ODprKzQ5NDcyLGQucHVzaChrPj44LGsmMjU1KTtmPShuZXcgVGV4dERlY29kZXIoInNoaWZ0LWppcyIpKS5kZWNvZGUoVWludDhBcnJheS5mcm9tKGQpKTtiLnRleHQrPWY7Yi5ieXRlcy5wdXNoKC4uLmQpO2IuY2h1bmtzLnB1c2goe3R5cGU6Qi5LYW5qaSxieXRlczpkLHRleHQ6Zn0pfWVsc2UgZD09PUQuU3RydWN0dXJlZEFwcGVuZCYmYi5jaHVua3MucHVzaCh7dHlwZTpCLlN0cnVjdHVyZWRBcHBlbmQsY3VycmVudFNlcXVlbmNlOmEucmVhZEJpdHMoNCksdG90YWxTZXF1ZW5jZTphLnJlYWRCaXRzKDQpLHBhcml0eTphLnJlYWRCaXRzKDgpfSl9aWYoMD09PWEuYXZhaWxhYmxlKCl8fDA9PT1hLnJlYWRCaXRzKGEuYXZhaWxhYmxlKCkpKXJldHVybiBifQpjbGFzcyBHe2NvbnN0cnVjdG9yKGEsYil7aWYoMD09PWIubGVuZ3RoKXRocm93IEVycm9yKCJObyBjb2VmZmljaWVudHMuIik7dGhpcy5maWVsZD1hO2xldCBjPWIubGVuZ3RoO2lmKDE8YyYmMD09PWJbMF0pe2xldCBkPTE7Zm9yKDtkPGMmJjA9PT1iW2RdOylkKys7aWYoZD09PWMpdGhpcy5jb2VmZmljaWVudHM9YS56ZXJvLmNvZWZmaWNpZW50cztlbHNlIGZvcih0aGlzLmNvZWZmaWNpZW50cz1uZXcgVWludDhDbGFtcGVkQXJyYXkoYy1kKSxhPTA7YTx0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7YSsrKXRoaXMuY29lZmZpY2llbnRzW2FdPWJbZCthXX1lbHNlIHRoaXMuY29lZmZpY2llbnRzPWJ9ZGVncmVlKCl7cmV0dXJuIHRoaXMuY29lZmZpY2llbnRzLmxlbmd0aC0xfWlzWmVybygpe3JldHVybiAwPT09dGhpcy5jb2VmZmljaWVudHNbMF19Z2V0Q29lZmZpY2llbnQoYSl7cmV0dXJuIHRoaXMuY29lZmZpY2llbnRzW3RoaXMuY29lZmZpY2llbnRzLmxlbmd0aC0xLWFdfWFkZE9yU3VidHJhY3QoYSl7aWYodGhpcy5pc1plcm8oKSlyZXR1cm4gYTsKaWYoYS5pc1plcm8oKSlyZXR1cm4gdGhpcztsZXQgYj10aGlzLmNvZWZmaWNpZW50czthPWEuY29lZmZpY2llbnRzO2IubGVuZ3RoPmEubGVuZ3RoJiYoW2IsYV09W2EsYl0pO2xldCBjPW5ldyBVaW50OENsYW1wZWRBcnJheShhLmxlbmd0aCksZD1hLmxlbmd0aC1iLmxlbmd0aDtmb3IodmFyIGU9MDtlPGQ7ZSsrKWNbZV09YVtlXTtmb3IoZT1kO2U8YS5sZW5ndGg7ZSsrKWNbZV09YltlLWRdXmFbZV07cmV0dXJuIG5ldyBHKHRoaXMuZmllbGQsYyl9bXVsdGlwbHkoYSl7aWYoMD09PWEpcmV0dXJuIHRoaXMuZmllbGQuemVybztpZigxPT09YSlyZXR1cm4gdGhpcztsZXQgYj10aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgsYz1uZXcgVWludDhDbGFtcGVkQXJyYXkoYik7Zm9yKGxldCBkPTA7ZDxiO2QrKyljW2RdPXRoaXMuZmllbGQubXVsdGlwbHkodGhpcy5jb2VmZmljaWVudHNbZF0sYSk7cmV0dXJuIG5ldyBHKHRoaXMuZmllbGQsYyl9bXVsdGlwbHlQb2x5KGEpe2lmKHRoaXMuaXNaZXJvKCl8fAphLmlzWmVybygpKXJldHVybiB0aGlzLmZpZWxkLnplcm87bGV0IGI9dGhpcy5jb2VmZmljaWVudHMsYz1iLmxlbmd0aDthPWEuY29lZmZpY2llbnRzO2xldCBkPWEubGVuZ3RoLGU9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGMrZC0xKTtmb3IobGV0IGY9MDtmPGM7ZisrKXtsZXQgZz1iW2ZdO2ZvcihsZXQgaD0wO2g8ZDtoKyspZVtmK2hdPUgoZVtmK2hdLHRoaXMuZmllbGQubXVsdGlwbHkoZyxhW2hdKSl9cmV0dXJuIG5ldyBHKHRoaXMuZmllbGQsZSl9bXVsdGlwbHlCeU1vbm9taWFsKGEsYil7aWYoMD5hKXRocm93IEVycm9yKCJJbnZhbGlkIGRlZ3JlZSBsZXNzIHRoYW4gMCIpO2lmKDA9PT1iKXJldHVybiB0aGlzLmZpZWxkLnplcm87bGV0IGM9dGhpcy5jb2VmZmljaWVudHMubGVuZ3RoO2E9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGMrYSk7Zm9yKGxldCBkPTA7ZDxjO2QrKylhW2RdPXRoaXMuZmllbGQubXVsdGlwbHkodGhpcy5jb2VmZmljaWVudHNbZF0sYik7cmV0dXJuIG5ldyBHKHRoaXMuZmllbGQsCmEpfWV2YWx1YXRlQXQoYSl7bGV0IGI9MDtpZigwPT09YSlyZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTtsZXQgYz10aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7aWYoMT09PWEpcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzLmZvckVhY2goZD0+e2JePWR9KSxiO2I9dGhpcy5jb2VmZmljaWVudHNbMF07Zm9yKGxldCBkPTE7ZDxjO2QrKyliPUgodGhpcy5maWVsZC5tdWx0aXBseShhLGIpLHRoaXMuY29lZmZpY2llbnRzW2RdKTtyZXR1cm4gYn19ZnVuY3Rpb24gSChhLGIpe3JldHVybiBhXmJ9CmNsYXNzIGVhe2NvbnN0cnVjdG9yKGEsYixjKXt0aGlzLnByaW1pdGl2ZT1hO3RoaXMuc2l6ZT1iO3RoaXMuZ2VuZXJhdG9yQmFzZT1jO3RoaXMuZXhwVGFibGU9QXJyYXkodGhpcy5zaXplKTt0aGlzLmxvZ1RhYmxlPUFycmF5KHRoaXMuc2l6ZSk7YT0xO2ZvcihiPTA7Yjx0aGlzLnNpemU7YisrKXRoaXMuZXhwVGFibGVbYl09YSxhKj0yLGE+PXRoaXMuc2l6ZSYmKGE9KGFedGhpcy5wcmltaXRpdmUpJnRoaXMuc2l6ZS0xKTtmb3IoYT0wO2E8dGhpcy5zaXplLTE7YSsrKXRoaXMubG9nVGFibGVbdGhpcy5leHBUYWJsZVthXV09YTt0aGlzLnplcm89bmV3IEcodGhpcyxVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSkpO3RoaXMub25lPW5ldyBHKHRoaXMsVWludDhDbGFtcGVkQXJyYXkuZnJvbShbMV0pKX1tdWx0aXBseShhLGIpe3JldHVybiAwPT09YXx8MD09PWI/MDp0aGlzLmV4cFRhYmxlWyh0aGlzLmxvZ1RhYmxlW2FdK3RoaXMubG9nVGFibGVbYl0pJSh0aGlzLnNpemUtMSldfWludmVyc2UoYSl7aWYoMD09PQphKXRocm93IEVycm9yKCJDYW4ndCBpbnZlcnQgMCIpO3JldHVybiB0aGlzLmV4cFRhYmxlW3RoaXMuc2l6ZS10aGlzLmxvZ1RhYmxlW2FdLTFdfWJ1aWxkTW9ub21pYWwoYSxiKXtpZigwPmEpdGhyb3cgRXJyb3IoIkludmFsaWQgbW9ub21pYWwgZGVncmVlIGxlc3MgdGhhbiAwIik7aWYoMD09PWIpcmV0dXJuIHRoaXMuemVybzthPW5ldyBVaW50OENsYW1wZWRBcnJheShhKzEpO2FbMF09YjtyZXR1cm4gbmV3IEcodGhpcyxhKX1sb2coYSl7aWYoMD09PWEpdGhyb3cgRXJyb3IoIkNhbid0IHRha2UgbG9nKDApIik7cmV0dXJuIHRoaXMubG9nVGFibGVbYV19ZXhwKGEpe3JldHVybiB0aGlzLmV4cFRhYmxlW2FdfX0KZnVuY3Rpb24gZmEoYSxiLGMsZCl7Yi5kZWdyZWUoKTxjLmRlZ3JlZSgpJiYoW2IsY109W2MsYl0pO2xldCBlPWEuemVybztmb3IodmFyIGY9YS5vbmU7Yy5kZWdyZWUoKT49ZC8yOyl7dmFyIGc9YjtsZXQgaD1lO2I9YztlPWY7aWYoYi5pc1plcm8oKSlyZXR1cm4gbnVsbDtjPWc7Zj1hLnplcm87Zz1iLmdldENvZWZmaWNpZW50KGIuZGVncmVlKCkpO2ZvcihnPWEuaW52ZXJzZShnKTtjLmRlZ3JlZSgpPj1iLmRlZ3JlZSgpJiYhYy5pc1plcm8oKTspe2xldCBrPWMuZGVncmVlKCktYi5kZWdyZWUoKSxtPWEubXVsdGlwbHkoYy5nZXRDb2VmZmljaWVudChjLmRlZ3JlZSgpKSxnKTtmPWYuYWRkT3JTdWJ0cmFjdChhLmJ1aWxkTW9ub21pYWwoayxtKSk7Yz1jLmFkZE9yU3VidHJhY3QoYi5tdWx0aXBseUJ5TW9ub21pYWwoayxtKSl9Zj1mLm11bHRpcGx5UG9seShlKS5hZGRPclN1YnRyYWN0KGgpO2lmKGMuZGVncmVlKCk+PWIuZGVncmVlKCkpcmV0dXJuIG51bGx9ZD1mLmdldENvZWZmaWNpZW50KDApOwppZigwPT09ZClyZXR1cm4gbnVsbDthPWEuaW52ZXJzZShkKTtyZXR1cm5bZi5tdWx0aXBseShhKSxjLm11bHRpcGx5KGEpXX0KZnVuY3Rpb24gaGEoYSxiKXtsZXQgYz1uZXcgVWludDhDbGFtcGVkQXJyYXkoYS5sZW5ndGgpO2Muc2V0KGEpO2E9bmV3IGVhKDI4NSwyNTYsMCk7dmFyIGQ9bmV3IEcoYSxjKSxlPW5ldyBVaW50OENsYW1wZWRBcnJheShiKSxmPSExO2Zvcih2YXIgZz0wO2c8YjtnKyspe3ZhciBoPWQuZXZhbHVhdGVBdChhLmV4cChnK2EuZ2VuZXJhdG9yQmFzZSkpO2VbZS5sZW5ndGgtMS1nXT1oOzAhPT1oJiYoZj0hMCl9aWYoIWYpcmV0dXJuIGM7ZD1uZXcgRyhhLGUpO2Q9ZmEoYSxhLmJ1aWxkTW9ub21pYWwoYiwxKSxkLGIpO2lmKG51bGw9PT1kKXJldHVybiBudWxsO2I9ZFswXTtnPWIuZGVncmVlKCk7aWYoMT09PWcpYj1bYi5nZXRDb2VmZmljaWVudCgxKV07ZWxzZXtlPUFycmF5KGcpO2Y9MDtmb3IoaD0xO2g8YS5zaXplJiZmPGc7aCsrKTA9PT1iLmV2YWx1YXRlQXQoaCkmJihlW2ZdPWEuaW52ZXJzZShoKSxmKyspO2I9ZiE9PWc/bnVsbDplfWlmKG51bGw9PWIpcmV0dXJuIG51bGw7ZT1kWzFdOwpmPWIubGVuZ3RoO2Q9QXJyYXkoZik7Zm9yKGc9MDtnPGY7ZysrKXtoPWEuaW52ZXJzZShiW2ddKTtsZXQgaz0xO2ZvcihsZXQgbT0wO208ZjttKyspZyE9PW0mJihrPWEubXVsdGlwbHkoayxIKDEsYS5tdWx0aXBseShiW21dLGgpKSkpO2RbZ109YS5tdWx0aXBseShlLmV2YWx1YXRlQXQoaCksYS5pbnZlcnNlKGspKTswIT09YS5nZW5lcmF0b3JCYXNlJiYoZFtnXT1hLm11bHRpcGx5KGRbZ10saCkpfWZvcihlPTA7ZTxiLmxlbmd0aDtlKyspe2Y9Yy5sZW5ndGgtMS1hLmxvZyhiW2VdKTtpZigwPmYpcmV0dXJuIG51bGw7Y1tmXV49ZFtlXX1yZXR1cm4gY30KbGV0IEk9W3tpbmZvQml0czpudWxsLHZlcnNpb25OdW1iZXI6MSxhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczpbXSxlcnJvckNvcnJlY3Rpb25MZXZlbHM6W3tlY0NvZGV3b3Jkc1BlckJsb2NrOjcsZWNCbG9ja3M6W3tudW1CbG9ja3M6MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTl9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MTAsZWNCbG9ja3M6W3tudW1CbG9ja3M6MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MTMsZWNCbG9ja3M6W3tudW1CbG9ja3M6MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTN9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MTcsZWNCbG9ja3M6W3tudW1CbG9ja3M6MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6OX1dfV19LHtpbmZvQml0czpudWxsLHZlcnNpb25OdW1iZXI6MixhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczpbNiwxOF0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazoxMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxLApkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MzR9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MTYsZWNCbG9ja3M6W3tudW1CbG9ja3M6MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6Mjh9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjIsZWNCbG9ja3M6W3tudW1CbG9ja3M6MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjJ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9XX1dfSx7aW5mb0JpdHM6bnVsbCx2ZXJzaW9uTnVtYmVyOjMsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMjJdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MTUsZWNCbG9ja3M6W3tudW1CbG9ja3M6MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NTV9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjYsZWNCbG9ja3M6W3tudW1CbG9ja3M6MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDR9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MTgsCmVjQmxvY2tzOlt7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE3fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjIyLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEzfV19XX0se2luZm9CaXRzOm51bGwsdmVyc2lvbk51bWJlcjo0LGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDI2XSxlcnJvckNvcnJlY3Rpb25MZXZlbHM6W3tlY0NvZGV3b3Jkc1BlckJsb2NrOjIwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjgwfV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjE4LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjMyfV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI2LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI0fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjE2LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjl9XX1dfSwKe2luZm9CaXRzOm51bGwsdmVyc2lvbk51bWJlcjo1LGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDMwXSxlcnJvckNvcnJlY3Rpb25MZXZlbHM6W3tlY0NvZGV3b3Jkc1BlckJsb2NrOjI2LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEwOH1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyNCxlY0Jsb2Nrczpbe251bUJsb2NrczoyLGRhdGFDb2Rld29yZHNQZXJCbG9jazo0M31dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoxOCxlY0Jsb2Nrczpbe251bUJsb2NrczoyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNX0se251bUJsb2NrczoyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNn1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyMixlY0Jsb2Nrczpbe251bUJsb2NrczoyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMX0se251bUJsb2NrczoyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMn1dfV19LHtpbmZvQml0czpudWxsLHZlcnNpb25OdW1iZXI6NixhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczpbNiwKMzRdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MTgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6Njh9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MTYsZWNCbG9ja3M6W3tudW1CbG9ja3M6NCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6Mjd9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjQsZWNCbG9ja3M6W3tudW1CbG9ja3M6NCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTl9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6NCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTV9XX1dfSx7aW5mb0JpdHM6MzE4OTIsdmVyc2lvbk51bWJlcjo3LGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDIyLDM4XSxlcnJvckNvcnJlY3Rpb25MZXZlbHM6W3tlY0NvZGV3b3Jkc1BlckJsb2NrOjIwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjc4fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjE4LAplY0Jsb2Nrczpbe251bUJsb2Nrczo0LGRhdGFDb2Rld29yZHNQZXJCbG9jazozMX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoxOCxlY0Jsb2Nrczpbe251bUJsb2NrczoyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNH0se251bUJsb2Nrczo0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyNixlY0Jsb2Nrczpbe251bUJsb2Nrczo0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxM30se251bUJsb2NrczoxLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNH1dfV19LHtpbmZvQml0czozNDIzNix2ZXJzaW9uTnVtYmVyOjgsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMjQsNDJdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MjQsZWNCbG9ja3M6W3tudW1CbG9ja3M6MixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6OTd9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjIsZWNCbG9ja3M6W3tudW1CbG9ja3M6MixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6Mzh9LAp7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjM5fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjIyLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE4fSx7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE5fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI2LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE0fSx7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE1fV19XX0se2luZm9CaXRzOjM5NTc3LHZlcnNpb25OdW1iZXI6OSxhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczpbNiwyNiw0Nl0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMTZ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjIsZWNCbG9ja3M6W3tudW1CbG9ja3M6MyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MzZ9LAp7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjM3fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjIwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE2fSx7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE3fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI0LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEyfSx7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEzfV19XX0se2luZm9CaXRzOjQyMTk1LHZlcnNpb25OdW1iZXI6MTAsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMjgsNTBdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MTgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6Njh9LHtudW1CbG9ja3M6MixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6Njl9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjYsZWNCbG9ja3M6W3tudW1CbG9ja3M6NCwKZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQzfSx7bnVtQmxvY2tzOjEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ0fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI0LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjYsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE5fSx7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjIwfV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI4LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjYsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE1fSx7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE2fV19XX0se2luZm9CaXRzOjQ4MTE4LHZlcnNpb25OdW1iZXI6MTEsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMzAsNTRdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MjAsZWNCbG9ja3M6W3tudW1CbG9ja3M6NCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6ODF9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6MSwKZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjUwfSx7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjUxfV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI4LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjIyfSx7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjIzfV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI0LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjMsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEyfSx7bnVtQmxvY2tzOjgsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEzfV19XX0se2luZm9CaXRzOjUxMDQyLHZlcnNpb25OdW1iZXI6MTIsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMzIsNThdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MjQsZWNCbG9ja3M6W3tudW1CbG9ja3M6MixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6OTJ9LHtudW1CbG9ja3M6MixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6OTN9XX0sCntlY0NvZGV3b3Jkc1BlckJsb2NrOjIyLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjYsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjM2fSx7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjM3fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI2LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjIwfSx7bnVtQmxvY2tzOjYsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjIxfV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI4LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjcsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE0fSx7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE1fV19XX0se2luZm9CaXRzOjU1MzY3LHZlcnNpb25OdW1iZXI6MTMsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMzQsNjJdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MjYsZWNCbG9ja3M6W3tudW1CbG9ja3M6NCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTA3fV19LAp7ZWNDb2Rld29yZHNQZXJCbG9jazoyMixlY0Jsb2Nrczpbe251bUJsb2Nrczo4LGRhdGFDb2Rld29yZHNQZXJCbG9jazozN30se251bUJsb2NrczoxLGRhdGFDb2Rld29yZHNQZXJCbG9jazozOH1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyNCxlY0Jsb2Nrczpbe251bUJsb2Nrczo4LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyMH0se251bUJsb2Nrczo0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyMX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyMixlY0Jsb2Nrczpbe251bUJsb2NrczoxMixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTF9LHtudW1CbG9ja3M6NCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTJ9XX1dfSx7aW5mb0JpdHM6NTg4OTMsdmVyc2lvbk51bWJlcjoxNCxhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczpbNiwyNiw0Niw2Nl0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczozLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMTV9LAp7bnVtQmxvY2tzOjEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExNn1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyNCxlY0Jsb2Nrczpbe251bUJsb2Nrczo0LGRhdGFDb2Rld29yZHNQZXJCbG9jazo0MH0se251bUJsb2Nrczo1LGRhdGFDb2Rld29yZHNQZXJCbG9jazo0MX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxMSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9LHtudW1CbG9ja3M6NSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTd9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjQsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEyfSx7bnVtQmxvY2tzOjUsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEzfV19XX0se2luZm9CaXRzOjYzNzg0LHZlcnNpb25OdW1iZXI6MTUsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMjYsNDgsNzBdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MjIsCmVjQmxvY2tzOlt7bnVtQmxvY2tzOjUsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjg3fSx7bnVtQmxvY2tzOjEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjg4fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI0LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjUsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQxfSx7bnVtQmxvY2tzOjUsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQyfV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjUsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI0fSx7bnVtQmxvY2tzOjcsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI1fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI0LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjExLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMn0se251bUJsb2Nrczo3LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxM31dfV19LHtpbmZvQml0czo2ODQ3Mix2ZXJzaW9uTnVtYmVyOjE2LGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDI2LDUwLAo3NF0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazoyNCxlY0Jsb2Nrczpbe251bUJsb2Nrczo1LGRhdGFDb2Rld29yZHNQZXJCbG9jazo5OH0se251bUJsb2NrczoxLGRhdGFDb2Rld29yZHNQZXJCbG9jazo5OX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2Nrczo3LGRhdGFDb2Rld29yZHNQZXJCbG9jazo0NX0se251bUJsb2NrczozLGRhdGFDb2Rld29yZHNQZXJCbG9jazo0Nn1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyNCxlY0Jsb2Nrczpbe251bUJsb2NrczoxNSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTl9LHtudW1CbG9ja3M6MixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjB9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6MyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTV9LHtudW1CbG9ja3M6MTMsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE2fV19XX0se2luZm9CaXRzOjcwNzQ5LAp2ZXJzaW9uTnVtYmVyOjE3LGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDMwLDU0LDc4XSxlcnJvckNvcnJlY3Rpb25MZXZlbHM6W3tlY0NvZGV3b3Jkc1BlckJsb2NrOjI4LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEwN30se251bUJsb2Nrczo1LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMDh9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTAsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ2fSx7bnVtQmxvY2tzOjEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ3fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI4LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjIyfSx7bnVtQmxvY2tzOjE1LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyM31dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2NrczoyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNH0se251bUJsb2NrczoxNywKZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE1fV19XX0se2luZm9CaXRzOjc2MzExLHZlcnNpb25OdW1iZXI6MTgsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMzAsNTYsODJdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6NSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTIwfSx7bnVtQmxvY2tzOjEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEyMX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyNixlY0Jsb2Nrczpbe251bUJsb2Nrczo5LGRhdGFDb2Rld29yZHNQZXJCbG9jazo0M30se251bUJsb2Nrczo0LGRhdGFDb2Rld29yZHNQZXJCbG9jazo0NH1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2NrczoxNyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjJ9LHtudW1CbG9ja3M6MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjN9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MiwKZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE0fSx7bnVtQmxvY2tzOjE5LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNX1dfV19LHtpbmZvQml0czo3OTE1NCx2ZXJzaW9uTnVtYmVyOjE5LGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDMwLDU4LDg2XSxlcnJvckNvcnJlY3Rpb25MZXZlbHM6W3tlY0NvZGV3b3Jkc1BlckJsb2NrOjI4LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjMsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExM30se251bUJsb2Nrczo0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMTR9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjYsZWNCbG9ja3M6W3tudW1CbG9ja3M6MyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDR9LHtudW1CbG9ja3M6MTEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ1fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI2LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjE3LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyMX0se251bUJsb2Nrczo0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyMn1dfSwKe2VjQ29kZXdvcmRzUGVyQmxvY2s6MjYsZWNCbG9ja3M6W3tudW1CbG9ja3M6OSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTN9LHtudW1CbG9ja3M6MTYsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE0fV19XX0se2luZm9CaXRzOjg0MzkwLHZlcnNpb25OdW1iZXI6MjAsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMzQsNjIsOTBdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTA3fSx7bnVtQmxvY2tzOjUsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEwOH1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyNixlY0Jsb2Nrczpbe251bUJsb2NrczozLGRhdGFDb2Rld29yZHNQZXJCbG9jazo0MX0se251bUJsb2NrczoxMyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDJ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTUsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI0fSwKe251bUJsb2Nrczo1LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyNX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2NrczoxNSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTV9LHtudW1CbG9ja3M6MTAsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE2fV19XX0se2luZm9CaXRzOjg3NjgzLHZlcnNpb25OdW1iZXI6MjEsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMjgsNTAsNzIsOTRdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6NCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTE2fSx7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExN31dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyNixlY0Jsb2Nrczpbe251bUJsb2NrczoxNyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDJ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTcsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjIyfSwKe251bUJsb2Nrczo2LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyM31dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxOSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9LHtudW1CbG9ja3M6NixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTd9XX1dfSx7aW5mb0JpdHM6OTIzNjEsdmVyc2lvbk51bWJlcjoyMixhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczpbNiwyNiw1MCw3NCw5OF0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2NrczoyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMTF9LHtudW1CbG9ja3M6NyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTEyfV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI4LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjE3LGRhdGFDb2Rld29yZHNQZXJCbG9jazo0Nn1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2Nrczo3LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyNH0sCntudW1CbG9ja3M6MTYsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI1fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI0LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjM0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxM31dfV19LHtpbmZvQml0czo5NjIzNix2ZXJzaW9uTnVtYmVyOjIzLGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDMwLDU0LDc0LDEwMl0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2Nrczo0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMjF9LHtudW1CbG9ja3M6NSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTIyfV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI4LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ3fSx7bnVtQmxvY2tzOjE0LGRhdGFDb2Rld29yZHNQZXJCbG9jazo0OH1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxMSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjR9LAp7bnVtQmxvY2tzOjE0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyNX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxNixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTV9LHtudW1CbG9ja3M6MTQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE2fV19XX0se2luZm9CaXRzOjEwMjA4NCx2ZXJzaW9uTnVtYmVyOjI0LGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDI4LDU0LDgwLDEwNl0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2Nrczo2LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMTd9LHtudW1CbG9ja3M6NCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTE4fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI4LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjYsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ1fSx7bnVtQmxvY2tzOjE0LGRhdGFDb2Rld29yZHNQZXJCbG9jazo0Nn1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCwKZWNCbG9ja3M6W3tudW1CbG9ja3M6MTEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI0fSx7bnVtQmxvY2tzOjE2LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyNX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczozMCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9LHtudW1CbG9ja3M6MixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTd9XX1dfSx7aW5mb0JpdHM6MTAyODgxLHZlcnNpb25OdW1iZXI6MjUsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMzIsNTgsODQsMTEwXSxlcnJvckNvcnJlY3Rpb25MZXZlbHM6W3tlY0NvZGV3b3Jkc1BlckJsb2NrOjI2LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjgsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEwNn0se251bUJsb2Nrczo0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMDd9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6OCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDd9LHtudW1CbG9ja3M6MTMsCmRhdGFDb2Rld29yZHNQZXJCbG9jazo0OH1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2Nrczo3LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyNH0se251bUJsb2NrczoyMixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjV9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6MjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE1fSx7bnVtQmxvY2tzOjEzLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNn1dfV19LHtpbmZvQml0czoxMTA1MDcsdmVyc2lvbk51bWJlcjoyNixhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczpbNiwzMCw1OCw4NiwxMTRdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTAsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExNH0se251bUJsb2NrczoyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMTV9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTksCmRhdGFDb2Rld29yZHNQZXJCbG9jazo0Nn0se251bUJsb2Nrczo0LGRhdGFDb2Rld29yZHNQZXJCbG9jazo0N31dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2NrczoyOCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjJ9LHtudW1CbG9ja3M6NixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjN9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6MzMsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE2fSx7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE3fV19XX0se2luZm9CaXRzOjExMDczNCx2ZXJzaW9uTnVtYmVyOjI3LGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDM0LDYyLDkwLDExOF0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2Nrczo4LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMjJ9LHtudW1CbG9ja3M6NCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTIzfV19LAp7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2NrczoyMixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDV9LHtudW1CbG9ja3M6MyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDZ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6OCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjN9LHtudW1CbG9ja3M6MjYsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI0fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjEyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNX0se251bUJsb2NrczoyOCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9XX1dfSx7aW5mb0JpdHM6MTE3Nzg2LHZlcnNpb25OdW1iZXI6MjgsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMjYsNTAsNzQsOTgsMTIyXSxlcnJvckNvcnJlY3Rpb25MZXZlbHM6W3tlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjMsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExN30sCntudW1CbG9ja3M6MTAsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExOH1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2NrczozLGRhdGFDb2Rld29yZHNQZXJCbG9jazo0NX0se251bUJsb2NrczoyMyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDZ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6NCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjR9LHtudW1CbG9ja3M6MzEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI1fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjExLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNX0se251bUJsb2NrczozMSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9XX1dfSx7aW5mb0JpdHM6MTE5NjE1LHZlcnNpb25OdW1iZXI6MjksYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMzAsNTQsNzgsMTAyLDEyNl0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazozMCwKZWNCbG9ja3M6W3tudW1CbG9ja3M6NyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTE2fSx7bnVtQmxvY2tzOjcsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExN31dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2NrczoyMSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDV9LHtudW1CbG9ja3M6NyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDZ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjN9LHtudW1CbG9ja3M6MzcsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI0fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjE5LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNX0se251bUJsb2NrczoyNixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9XX1dfSx7aW5mb0JpdHM6MTI2MzI1LHZlcnNpb25OdW1iZXI6MzAsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsCjI2LDUyLDc4LDEwNCwxMzBdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6NSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTE1fSx7bnVtQmxvY2tzOjEwLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMTZ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTksZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ3fSx7bnVtQmxvY2tzOjEwLGRhdGFDb2Rld29yZHNQZXJCbG9jazo0OH1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxNSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjR9LHtudW1CbG9ja3M6MjUsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI1fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjIzLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNX0se251bUJsb2NrczoyNSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9XX1dfSwKe2luZm9CaXRzOjEyNzU2OCx2ZXJzaW9uTnVtYmVyOjMxLGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDMwLDU2LDgyLDEwOCwxMzRdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTMsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExNX0se251bUJsb2NrczozLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMTZ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDZ9LHtudW1CbG9ja3M6MjksZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ3fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjQyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoyNH0se251bUJsb2NrczoxLGRhdGFDb2Rld29yZHNQZXJCbG9jazoyNX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoyMyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTV9LAp7bnVtQmxvY2tzOjI4LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNn1dfV19LHtpbmZvQml0czoxMzM1ODksdmVyc2lvbk51bWJlcjozMixhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczpbNiwzNCw2MCw4NiwxMTIsMTM4XSxlcnJvckNvcnJlY3Rpb25MZXZlbHM6W3tlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjE3LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMTV9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTAsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ2fSx7bnVtQmxvY2tzOjIzLGRhdGFDb2Rld29yZHNQZXJCbG9jazo0N31dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxMCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjR9LHtudW1CbG9ja3M6MzUsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI1fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjE5LApkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTV9LHtudW1CbG9ja3M6MzUsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE2fV19XX0se2luZm9CaXRzOjEzNjk0NCx2ZXJzaW9uTnVtYmVyOjMzLGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDMwLDU4LDg2LDExNCwxNDJdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTcsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExNX0se251bUJsb2NrczoxLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMTZ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ2fSx7bnVtQmxvY2tzOjIxLGRhdGFDb2Rld29yZHNQZXJCbG9jazo0N31dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoyOSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjR9LHtudW1CbG9ja3M6MTksZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI1fV19LAp7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxMSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTV9LHtudW1CbG9ja3M6NDYsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE2fV19XX0se2luZm9CaXRzOjE0MTQ5OCx2ZXJzaW9uTnVtYmVyOjM0LGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDM0LDYyLDkwLDExOCwxNDZdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTMsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExNX0se251bUJsb2Nrczo2LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMTZ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MTQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ2fSx7bnVtQmxvY2tzOjIzLGRhdGFDb2Rld29yZHNQZXJCbG9jazo0N31dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2Nrczo0NCwKZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI0fSx7bnVtQmxvY2tzOjcsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI1fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjU5LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNn0se251bUJsb2NrczoxLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxN31dfV19LHtpbmZvQml0czoxNDUzMTEsdmVyc2lvbk51bWJlcjozNSxhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczpbNiwzMCw1NCw3OCwxMDIsMTI2LDE1MF0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxMixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTIxfSx7bnVtQmxvY2tzOjcsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEyMn1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2NrczoxMixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDd9LHtudW1CbG9ja3M6MjYsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ4fV19LAp7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczozOSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjR9LHtudW1CbG9ja3M6MTQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI1fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjIyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNX0se251bUJsb2Nrczo0MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9XX1dfSx7aW5mb0JpdHM6MTUwMjgzLHZlcnNpb25OdW1iZXI6MzYsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMjQsNTAsNzYsMTAyLDEyOCwxNTRdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6NixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTIxfSx7bnVtQmxvY2tzOjE0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxMjJ9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6NiwKZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ3fSx7bnVtQmxvY2tzOjM0LGRhdGFDb2Rld29yZHNQZXJCbG9jazo0OH1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2Nrczo0NixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjR9LHtudW1CbG9ja3M6MTAsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI1fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE1fSx7bnVtQmxvY2tzOjY0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNn1dfV19LHtpbmZvQml0czoxNTI2MjIsdmVyc2lvbk51bWJlcjozNyxhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczpbNiwyOCw1NCw4MCwxMDYsMTMyLDE1OF0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxNyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTIyfSx7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEyM31dfSwKe2VjQ29kZXdvcmRzUGVyQmxvY2s6MjgsZWNCbG9ja3M6W3tudW1CbG9ja3M6MjksZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ2fSx7bnVtQmxvY2tzOjE0LGRhdGFDb2Rld29yZHNQZXJCbG9jazo0N31dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2Nrczo0OSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjR9LHtudW1CbG9ja3M6MTAsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI1fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjI0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoxNX0se251bUJsb2Nrczo0NixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9XX1dfSx7aW5mb0JpdHM6MTU4MzA4LHZlcnNpb25OdW1iZXI6MzgsYWxpZ25tZW50UGF0dGVybkNlbnRlcnM6WzYsMzIsNTgsODQsMTEwLDEzNiwxNjJdLGVycm9yQ29ycmVjdGlvbkxldmVsczpbe2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6NCwKZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjEyMn0se251bUJsb2NrczoxOCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTIzfV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjI4LGVjQmxvY2tzOlt7bnVtQmxvY2tzOjEzLGRhdGFDb2Rld29yZHNQZXJCbG9jazo0Nn0se251bUJsb2NrczozMixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDd9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6NDgsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI0fSx7bnVtQmxvY2tzOjE0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyNX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2Nrczo0MixkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTV9LHtudW1CbG9ja3M6MzIsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE2fV19XX0se2luZm9CaXRzOjE2MTA4OSx2ZXJzaW9uTnVtYmVyOjM5LGFsaWdubWVudFBhdHRlcm5DZW50ZXJzOls2LDI2LDU0LDgyLDExMCwxMzgsMTY2XSwKZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoyMCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTE3fSx7bnVtQmxvY2tzOjQsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExOH1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2Nrczo0MCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDd9LHtudW1CbG9ja3M6NyxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDh9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6NDMsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjI0fSx7bnVtQmxvY2tzOjIyLGRhdGFDb2Rld29yZHNQZXJCbG9jazoyNX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxMCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTV9LHtudW1CbG9ja3M6NjcsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE2fV19XX0se2luZm9CaXRzOjE2NzAxNywKdmVyc2lvbk51bWJlcjo0MCxhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczpbNiwzMCw1OCw4NiwxMTQsMTQyLDE3MF0sZXJyb3JDb3JyZWN0aW9uTGV2ZWxzOlt7ZWNDb2Rld29yZHNQZXJCbG9jazozMCxlY0Jsb2Nrczpbe251bUJsb2NrczoxOSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTE4fSx7bnVtQmxvY2tzOjYsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjExOX1dfSx7ZWNDb2Rld29yZHNQZXJCbG9jazoyOCxlY0Jsb2Nrczpbe251bUJsb2NrczoxOCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6NDd9LHtudW1CbG9ja3M6MzEsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjQ4fV19LHtlY0NvZGV3b3Jkc1BlckJsb2NrOjMwLGVjQmxvY2tzOlt7bnVtQmxvY2tzOjM0LGRhdGFDb2Rld29yZHNQZXJCbG9jazoyNH0se251bUJsb2NrczozNCxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MjV9XX0se2VjQ29kZXdvcmRzUGVyQmxvY2s6MzAsZWNCbG9ja3M6W3tudW1CbG9ja3M6MjAsZGF0YUNvZGV3b3Jkc1BlckJsb2NrOjE1fSwKe251bUJsb2Nrczo2MSxkYXRhQ29kZXdvcmRzUGVyQmxvY2s6MTZ9XX1dfV07ZnVuY3Rpb24gSihhLGIpe2FePWI7Zm9yKGI9MDthOyliKyssYSY9YS0xO3JldHVybiBifWZ1bmN0aW9uIEsoYSxiKXtyZXR1cm4gYjw8MXxhfQpsZXQgaWE9W3tiaXRzOjIxNTIyLGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjEsZGF0YU1hc2s6MH19LHtiaXRzOjIwNzczLGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjEsZGF0YU1hc2s6MX19LHtiaXRzOjI0MTg4LGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjEsZGF0YU1hc2s6Mn19LHtiaXRzOjIzMzcxLGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjEsZGF0YU1hc2s6M319LHtiaXRzOjE3OTEzLGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjEsZGF0YU1hc2s6NH19LHtiaXRzOjE2NTkwLGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjEsZGF0YU1hc2s6NX19LHtiaXRzOjIwMzc1LGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjEsZGF0YU1hc2s6Nn19LHtiaXRzOjE5MTA0LGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjEsZGF0YU1hc2s6N319LHtiaXRzOjMwNjYwLGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjAsCmRhdGFNYXNrOjB9fSx7Yml0czoyOTQyNyxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDowLGRhdGFNYXNrOjF9fSx7Yml0czozMjE3MCxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDowLGRhdGFNYXNrOjJ9fSx7Yml0czozMDg3Nyxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDowLGRhdGFNYXNrOjN9fSx7Yml0czoyNjE1OSxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDowLGRhdGFNYXNrOjR9fSx7Yml0czoyNTM2OCxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDowLGRhdGFNYXNrOjV9fSx7Yml0czoyNzcxMyxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDowLGRhdGFNYXNrOjZ9fSx7Yml0czoyNjk5OCxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDowLGRhdGFNYXNrOjd9fSx7Yml0czo1NzY5LGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjMsZGF0YU1hc2s6MH19LHtiaXRzOjUwNTQsCmZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjMsZGF0YU1hc2s6MX19LHtiaXRzOjczOTksZm9ybWF0SW5mbzp7ZXJyb3JDb3JyZWN0aW9uTGV2ZWw6MyxkYXRhTWFzazoyfX0se2JpdHM6NjYwOCxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDozLGRhdGFNYXNrOjN9fSx7Yml0czoxODkwLGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjMsZGF0YU1hc2s6NH19LHtiaXRzOjU5Nyxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDozLGRhdGFNYXNrOjV9fSx7Yml0czozMzQwLGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjMsZGF0YU1hc2s6Nn19LHtiaXRzOjIxMDcsZm9ybWF0SW5mbzp7ZXJyb3JDb3JyZWN0aW9uTGV2ZWw6MyxkYXRhTWFzazo3fX0se2JpdHM6MTM2NjMsZm9ybWF0SW5mbzp7ZXJyb3JDb3JyZWN0aW9uTGV2ZWw6MixkYXRhTWFzazowfX0se2JpdHM6MTIzOTIsZm9ybWF0SW5mbzp7ZXJyb3JDb3JyZWN0aW9uTGV2ZWw6MiwKZGF0YU1hc2s6MX19LHtiaXRzOjE2MTc3LGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjIsZGF0YU1hc2s6Mn19LHtiaXRzOjE0ODU0LGZvcm1hdEluZm86e2Vycm9yQ29ycmVjdGlvbkxldmVsOjIsZGF0YU1hc2s6M319LHtiaXRzOjkzOTYsZm9ybWF0SW5mbzp7ZXJyb3JDb3JyZWN0aW9uTGV2ZWw6MixkYXRhTWFzazo0fX0se2JpdHM6ODU3OSxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDoyLGRhdGFNYXNrOjV9fSx7Yml0czoxMTk5NCxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDoyLGRhdGFNYXNrOjZ9fSx7Yml0czoxMTI0NSxmb3JtYXRJbmZvOntlcnJvckNvcnJlY3Rpb25MZXZlbDoyLGRhdGFNYXNrOjd9fV0samE9W2E9PjA9PT0oYS55K2EueCklMixhPT4wPT09YS55JTIsYT0+MD09PWEueCUzLGE9PjA9PT0oYS55K2EueCklMyxhPT4wPT09KE1hdGguZmxvb3IoYS55LzIpK01hdGguZmxvb3IoYS54LzMpKSUyLGE9PjA9PT1hLngqYS55JQoyK2EueCphLnklMyxhPT4wPT09KGEueSphLnglMithLnkqYS54JTMpJTIsYT0+MD09PSgoYS55K2EueCklMithLnkqYS54JTMpJTJdOwpmdW5jdGlvbiBrYShhLGIsYyl7Yz1qYVtjLmRhdGFNYXNrXTtsZXQgZD1hLmhlaWdodDt2YXIgZT0xNys0KmIudmVyc2lvbk51bWJlcjtsZXQgZj14LmNyZWF0ZUVtcHR5KGUsZSk7Zi5zZXRSZWdpb24oMCwwLDksOSwhMCk7Zi5zZXRSZWdpb24oZS04LDAsOCw5LCEwKTtmLnNldFJlZ2lvbigwLGUtOCw5LDgsITApO2Zvcih2YXIgZyBvZiBiLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzKWZvcih2YXIgaCBvZiBiLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzKTY9PT1nJiY2PT09aHx8Nj09PWcmJmg9PT1lLTd8fGc9PT1lLTcmJjY9PT1ofHxmLnNldFJlZ2lvbihnLTIsaC0yLDUsNSwhMCk7Zi5zZXRSZWdpb24oNiw5LDEsZS0xNywhMCk7Zi5zZXRSZWdpb24oOSw2LGUtMTcsMSwhMCk7NjxiLnZlcnNpb25OdW1iZXImJihmLnNldFJlZ2lvbihlLTExLDAsMyw2LCEwKSxmLnNldFJlZ2lvbigwLGUtMTEsNiwzLCEwKSk7Yj1bXTtoPWc9MDtlPSEwO2ZvcihsZXQgaz1kLTE7MDxrO2stPTIpezY9PT0KayYmay0tO2ZvcihsZXQgbT0wO208ZDttKyspe2xldCBsPWU/ZC0xLW06bTtmb3IobGV0IG49MDsyPm47bisrKXtsZXQgcT1rLW47aWYoIWYuZ2V0KHEsbCkpe2grKztsZXQgcj1hLmdldChxLGwpO2Moe3k6bCx4OnF9KSYmKHI9IXIpO2c9Zzw8MXxyOzg9PT1oJiYoYi5wdXNoKGcpLGc9aD0wKX19fWU9IWV9cmV0dXJuIGJ9CmZ1bmN0aW9uIGxhKGEpe3ZhciBiPWEuaGVpZ2h0LGM9TWF0aC5mbG9vcigoYi0xNykvNCk7aWYoNj49YylyZXR1cm4gSVtjLTFdO2M9MDtmb3IodmFyIGQ9NTswPD1kO2QtLSlmb3IodmFyIGU9Yi05O2U+PWItMTE7ZS0tKWM9SyhhLmdldChlLGQpLGMpO2Q9MDtmb3IoZT01OzA8PWU7ZS0tKWZvcihsZXQgZz1iLTk7Zz49Yi0xMTtnLS0pZD1LKGEuZ2V0KGUsZyksZCk7YT1JbmZpbml0eTtsZXQgZjtmb3IobGV0IGcgb2YgSSl7aWYoZy5pbmZvQml0cz09PWN8fGcuaW5mb0JpdHM9PT1kKXJldHVybiBnO2I9SihjLGcuaW5mb0JpdHMpO2I8YSYmKGY9ZyxhPWIpO2I9SihkLGcuaW5mb0JpdHMpO2I8YSYmKGY9ZyxhPWIpfWlmKDM+PWEpcmV0dXJuIGZ9CmZ1bmN0aW9uIG1hKGEpe2xldCBiPTA7Zm9yKHZhciBjPTA7OD49YztjKyspNiE9PWMmJihiPUsoYS5nZXQoYyw4KSxiKSk7Zm9yKGM9NzswPD1jO2MtLSk2IT09YyYmKGI9SyhhLmdldCg4LGMpLGIpKTt2YXIgZD1hLmhlaWdodDtjPTA7Zm9yKHZhciBlPWQtMTtlPj1kLTc7ZS0tKWM9SyhhLmdldCg4LGUpLGMpO2ZvcihlPWQtODtlPGQ7ZSsrKWM9SyhhLmdldChlLDgpLGMpO2E9SW5maW5pdHk7ZD1udWxsO2ZvcihsZXQge2JpdHM6Zixmb3JtYXRJbmZvOmd9b2YgaWEpe2lmKGY9PT1ifHxmPT09YylyZXR1cm4gZztlPUooYixmKTtlPGEmJihkPWcsYT1lKTtiIT09YyYmKGU9SihjLGYpLGU8YSYmKGQ9ZyxhPWUpKX1yZXR1cm4gMz49YT9kOm51bGx9CmZ1bmN0aW9uIG5hKGEsYixjKXtsZXQgZD1iLmVycm9yQ29ycmVjdGlvbkxldmVsc1tjXSxlPVtdLGY9MDtkLmVjQmxvY2tzLmZvckVhY2goaD0+e2ZvcihsZXQgaz0wO2s8aC5udW1CbG9ja3M7aysrKWUucHVzaCh7bnVtRGF0YUNvZGV3b3JkczpoLmRhdGFDb2Rld29yZHNQZXJCbG9jayxjb2Rld29yZHM6W119KSxmKz1oLmRhdGFDb2Rld29yZHNQZXJCbG9jaytkLmVjQ29kZXdvcmRzUGVyQmxvY2t9KTtpZihhLmxlbmd0aDxmKXJldHVybiBudWxsO2E9YS5zbGljZSgwLGYpO2I9ZC5lY0Jsb2Nrc1swXS5kYXRhQ29kZXdvcmRzUGVyQmxvY2s7Zm9yKGM9MDtjPGI7YysrKWZvcih2YXIgZyBvZiBlKWcuY29kZXdvcmRzLnB1c2goYS5zaGlmdCgpKTtpZigxPGQuZWNCbG9ja3MubGVuZ3RoKWZvcihnPWQuZWNCbG9ja3NbMF0ubnVtQmxvY2tzLGI9ZC5lY0Jsb2Nrc1sxXS5udW1CbG9ja3MsYz0wO2M8YjtjKyspZVtnK2NdLmNvZGV3b3Jkcy5wdXNoKGEuc2hpZnQoKSk7Zm9yKDswPGEubGVuZ3RoOylmb3IobGV0IGggb2YgZSloLmNvZGV3b3Jkcy5wdXNoKGEuc2hpZnQoKSk7CnJldHVybiBlfWZ1bmN0aW9uIEwoYSl7bGV0IGI9bGEoYSk7aWYoIWIpcmV0dXJuIG51bGw7dmFyIGM9bWEoYSk7aWYoIWMpcmV0dXJuIG51bGw7YT1rYShhLGIsYyk7dmFyIGQ9bmEoYSxiLGMuZXJyb3JDb3JyZWN0aW9uTGV2ZWwpO2lmKCFkKXJldHVybiBudWxsO2M9ZC5yZWR1Y2UoKGUsZik9PmUrZi5udW1EYXRhQ29kZXdvcmRzLDApO2M9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGMpO2E9MDtmb3IobGV0IGUgb2YgZCl7ZD1oYShlLmNvZGV3b3JkcyxlLmNvZGV3b3Jkcy5sZW5ndGgtZS5udW1EYXRhQ29kZXdvcmRzKTtpZighZClyZXR1cm4gbnVsbDtmb3IobGV0IGY9MDtmPGUubnVtRGF0YUNvZGV3b3JkcztmKyspY1thKytdPWRbZl19dHJ5e3JldHVybiBkYShjLGIudmVyc2lvbk51bWJlcil9Y2F0Y2goZSl7cmV0dXJuIG51bGx9fQpmdW5jdGlvbiBNKGEsYixjLGQpe3ZhciBlPWEueC1iLngrYy54LWQueDtsZXQgZj1hLnktYi55K2MueS1kLnk7aWYoMD09PWUmJjA9PT1mKXJldHVybnthMTE6Yi54LWEueCxhMTI6Yi55LWEueSxhMTM6MCxhMjE6Yy54LWIueCxhMjI6Yy55LWIueSxhMjM6MCxhMzE6YS54LGEzMjphLnksYTMzOjF9O2xldCBnPWIueC1jLng7dmFyIGg9ZC54LWMueDtsZXQgaz1iLnktYy55LG09ZC55LWMueTtjPWcqbS1oKms7aD0oZSptLWgqZikvYztlPShnKmYtZSprKS9jO3JldHVybnthMTE6Yi54LWEueCtoKmIueCxhMTI6Yi55LWEueStoKmIueSxhMTM6aCxhMjE6ZC54LWEueCtlKmQueCxhMjI6ZC55LWEueStlKmQueSxhMjM6ZSxhMzE6YS54LGEzMjphLnksYTMzOjF9fQpmdW5jdGlvbiBvYShhLGIsYyxkKXthPU0oYSxiLGMsZCk7cmV0dXJue2ExMTphLmEyMiphLmEzMy1hLmEyMyphLmEzMixhMTI6YS5hMTMqYS5hMzItYS5hMTIqYS5hMzMsYTEzOmEuYTEyKmEuYTIzLWEuYTEzKmEuYTIyLGEyMTphLmEyMyphLmEzMS1hLmEyMSphLmEzMyxhMjI6YS5hMTEqYS5hMzMtYS5hMTMqYS5hMzEsYTIzOmEuYTEzKmEuYTIxLWEuYTExKmEuYTIzLGEzMTphLmEyMSphLmEzMi1hLmEyMiphLmEzMSxhMzI6YS5hMTIqYS5hMzEtYS5hMTEqYS5hMzIsYTMzOmEuYTExKmEuYTIyLWEuYTEyKmEuYTIxfX0KZnVuY3Rpb24gcGEoYSxiKXt2YXIgYz1vYSh7eDozLjUseTozLjV9LHt4OmIuZGltZW5zaW9uLTMuNSx5OjMuNX0se3g6Yi5kaW1lbnNpb24tNi41LHk6Yi5kaW1lbnNpb24tNi41fSx7eDozLjUseTpiLmRpbWVuc2lvbi0zLjV9KSxkPU0oYi50b3BMZWZ0LGIudG9wUmlnaHQsYi5hbGlnbm1lbnRQYXR0ZXJuLGIuYm90dG9tTGVmdCksZT1kLmExMSpjLmExMStkLmEyMSpjLmExMitkLmEzMSpjLmExMyxmPWQuYTEyKmMuYTExK2QuYTIyKmMuYTEyK2QuYTMyKmMuYTEzLGc9ZC5hMTMqYy5hMTErZC5hMjMqYy5hMTIrZC5hMzMqYy5hMTMsaD1kLmExMSpjLmEyMStkLmEyMSpjLmEyMitkLmEzMSpjLmEyMyxrPWQuYTEyKmMuYTIxK2QuYTIyKmMuYTIyK2QuYTMyKmMuYTIzLG09ZC5hMTMqYy5hMjErZC5hMjMqYy5hMjIrZC5hMzMqYy5hMjMsbD1kLmExMSpjLmEzMStkLmEyMSpjLmEzMitkLmEzMSpjLmEzMyxuPWQuYTEyKmMuYTMxK2QuYTIyKmMuYTMyK2QuYTMyKmMuYTMzLHE9ZC5hMTMqCmMuYTMxK2QuYTIzKmMuYTMyK2QuYTMzKmMuYTMzO2M9eC5jcmVhdGVFbXB0eShiLmRpbWVuc2lvbixiLmRpbWVuc2lvbik7ZD0ocix1KT0+e2NvbnN0IHA9ZypyK20qdStxO3JldHVybnt4OihlKnIraCp1K2wpL3AseTooZipyK2sqdStuKS9wfX07Zm9yKGxldCByPTA7cjxiLmRpbWVuc2lvbjtyKyspZm9yKGxldCB1PTA7dTxiLmRpbWVuc2lvbjt1Kyspe2xldCBwPWQodSsuNSxyKy41KTtjLnNldCh1LHIsYS5nZXQoTWF0aC5mbG9vcihwLngpLE1hdGguZmxvb3IocC55KSkpfXJldHVybnttYXRyaXg6YyxtYXBwaW5nRnVuY3Rpb246ZH19bGV0IE49KGEsYik9Pk1hdGguc3FydChNYXRoLnBvdyhiLngtYS54LDIpK01hdGgucG93KGIueS1hLnksMikpO2Z1bmN0aW9uIE8oYSl7cmV0dXJuIGEucmVkdWNlKChiLGMpPT5iK2MpfQpmdW5jdGlvbiBxYShhLGIsYyl7bGV0IGQ9TihhLGIpLGU9TihiLGMpLGY9TihhLGMpLGcsaCxrO2U+PWQmJmU+PWY/W2csaCxrXT1bYixhLGNdOmY+PWUmJmY+PWQ/W2csaCxrXT1bYSxiLGNdOltnLGgsa109W2EsYyxiXTswPihrLngtaC54KSooZy55LWgueSktKGsueS1oLnkpKihnLngtaC54KSYmKFtnLGtdPVtrLGddKTtyZXR1cm57Ym90dG9tTGVmdDpnLHRvcExlZnQ6aCx0b3BSaWdodDprfX0KZnVuY3Rpb24gcmEoYSxiLGMsZCl7ZD0oTyhQKGEsYyxkLDUpKS83K08oUChhLGIsZCw1KSkvNytPKFAoYyxhLGQsNSkpLzcrTyhQKGIsYSxkLDUpKS83KS80O2lmKDE+ZCl0aHJvdyBFcnJvcigiSW52YWxpZCBtb2R1bGUgc2l6ZSIpO2I9TWF0aC5yb3VuZChOKGEsYikvZCk7YT1NYXRoLnJvdW5kKE4oYSxjKS9kKTthPU1hdGguZmxvb3IoKGIrYSkvMikrNztzd2l0Y2goYSU0KXtjYXNlIDA6YSsrO2JyZWFrO2Nhc2UgMjphLS19cmV0dXJue2RpbWVuc2lvbjphLG1vZHVsZVNpemU6ZH19CmZ1bmN0aW9uIFEoYSxiLGMsZCl7bGV0IGU9W3t4Ok1hdGguZmxvb3IoYS54KSx5Ok1hdGguZmxvb3IoYS55KX1dO3ZhciBmPU1hdGguYWJzKGIueS1hLnkpPk1hdGguYWJzKGIueC1hLngpO2lmKGYpe3ZhciBnPU1hdGguZmxvb3IoYS55KTt2YXIgaD1NYXRoLmZsb29yKGEueCk7YT1NYXRoLmZsb29yKGIueSk7Yj1NYXRoLmZsb29yKGIueCl9ZWxzZSBnPU1hdGguZmxvb3IoYS54KSxoPU1hdGguZmxvb3IoYS55KSxhPU1hdGguZmxvb3IoYi54KSxiPU1hdGguZmxvb3IoYi55KTtsZXQgaz1NYXRoLmFicyhhLWcpLG09TWF0aC5hYnMoYi1oKSxsPU1hdGguZmxvb3IoLWsvMiksbj1nPGE/MTotMSxxPWg8Yj8xOi0xLHI9ITA7Zm9yKGxldCB1PWcscD1oO3UhPT1hK247dSs9bil7Zz1mP3A6dTtoPWY/dTpwO2lmKGMuZ2V0KGcsaCkhPT1yJiYocj0hcixlLnB1c2goe3g6Zyx5Omh9KSxlLmxlbmd0aD09PWQrMSkpYnJlYWs7bCs9bTtpZigwPGwpe2lmKHA9PT1iKWJyZWFrO3ArPXE7bC09a319Yz0KW107Zm9yKGY9MDtmPGQ7ZisrKWVbZl0mJmVbZisxXT9jLnB1c2goTihlW2ZdLGVbZisxXSkpOmMucHVzaCgwKTtyZXR1cm4gY31mdW5jdGlvbiBQKGEsYixjLGQpe2xldCBlPWIueS1hLnksZj1iLngtYS54O2I9UShhLGIsYyxNYXRoLmNlaWwoZC8yKSk7YT1RKGEse3g6YS54LWYseTphLnktZX0sYyxNYXRoLmNlaWwoZC8yKSk7Yz1iLnNoaWZ0KCkrYS5zaGlmdCgpLTE7cmV0dXJuIGEuY29uY2F0KGMpLmNvbmNhdCguLi5iKX1mdW5jdGlvbiBSKGEsYil7bGV0IGM9TyhhKS9PKGIpLGQ9MDtiLmZvckVhY2goKGUsZik9PntkKz1NYXRoLnBvdyhhW2ZdLWUqYywyKX0pO3JldHVybnthdmVyYWdlU2l6ZTpjLGVycm9yOmR9fQpmdW5jdGlvbiBTKGEsYixjKXt0cnl7bGV0IGQ9UChhLHt4Oi0xLHk6YS55fSxjLGIubGVuZ3RoKSxlPVAoYSx7eDphLngseTotMX0sYyxiLmxlbmd0aCksZj1QKGEse3g6TWF0aC5tYXgoMCxhLngtYS55KS0xLHk6TWF0aC5tYXgoMCxhLnktYS54KS0xfSxjLGIubGVuZ3RoKSxnPVAoYSx7eDpNYXRoLm1pbihjLndpZHRoLGEueCthLnkpKzEseTpNYXRoLm1pbihjLmhlaWdodCxhLnkrYS54KSsxfSxjLGIubGVuZ3RoKSxoPVIoZCxiKSxrPVIoZSxiKSxtPVIoZixiKSxsPVIoZyxiKSxuPShoLmF2ZXJhZ2VTaXplK2suYXZlcmFnZVNpemUrbS5hdmVyYWdlU2l6ZStsLmF2ZXJhZ2VTaXplKS80O3JldHVybiBNYXRoLnNxcnQoaC5lcnJvcipoLmVycm9yK2suZXJyb3Iqay5lcnJvcittLmVycm9yKm0uZXJyb3IrbC5lcnJvcipsLmVycm9yKSsoTWF0aC5wb3coaC5hdmVyYWdlU2l6ZS1uLDIpK01hdGgucG93KGsuYXZlcmFnZVNpemUtbiwyKStNYXRoLnBvdyhtLmF2ZXJhZ2VTaXplLW4sMikrCk1hdGgucG93KGwuYXZlcmFnZVNpemUtbiwyKSkvbn1jYXRjaChkKXtyZXR1cm4gSW5maW5pdHl9fWZ1bmN0aW9uIFQoYSxiKXtmb3IodmFyIGM9TWF0aC5yb3VuZChiLngpO2EuZ2V0KGMsTWF0aC5yb3VuZChiLnkpKTspYy0tO2Zvcih2YXIgZD1NYXRoLnJvdW5kKGIueCk7YS5nZXQoZCxNYXRoLnJvdW5kKGIueSkpOylkKys7Yz0oYytkKS8yO2ZvcihkPU1hdGgucm91bmQoYi55KTthLmdldChNYXRoLnJvdW5kKGMpLGQpOylkLS07Zm9yKGI9TWF0aC5yb3VuZChiLnkpO2EuZ2V0KE1hdGgucm91bmQoYyksYik7KWIrKztyZXR1cm57eDpjLHk6KGQrYikvMn19CmZ1bmN0aW9uIHNhKGEpe3ZhciBiPVtdLGM9W107bGV0IGQ9W107dmFyIGU9W107Zm9yKGxldCBwPTA7cDw9YS5oZWlnaHQ7cCsrKXt2YXIgZj0wLGc9ITE7bGV0IHQ9WzAsMCwwLDAsMF07Zm9yKGxldCB2PS0xO3Y8PWEud2lkdGg7disrKXt2YXIgaD1hLmdldCh2LHApO2lmKGg9PT1nKWYrKztlbHNle3Q9W3RbMV0sdFsyXSx0WzNdLHRbNF0sZl07Zj0xO2c9aDt2YXIgaz1PKHQpLzc7az1NYXRoLmFicyh0WzBdLWspPGsmJk1hdGguYWJzKHRbMV0tayk8ayYmTWF0aC5hYnModFsyXS0zKmspPDMqayYmTWF0aC5hYnModFszXS1rKTxrJiZNYXRoLmFicyh0WzRdLWspPGsmJiFoO3ZhciBtPU8odC5zbGljZSgtMykpLzM7aD1NYXRoLmFicyh0WzJdLW0pPG0mJk1hdGguYWJzKHRbM10tbSk8bSYmTWF0aC5hYnModFs0XS1tKTxtJiZoO2lmKGspe2xldCB6PXYtdFszXS10WzRdLHk9ei10WzJdO2s9e3N0YXJ0WDp5LGVuZFg6eix5OnB9O209Yy5maWx0ZXIodz0+eT49dy5ib3R0b20uc3RhcnRYJiYKeTw9dy5ib3R0b20uZW5kWHx8ej49dy5ib3R0b20uc3RhcnRYJiZ5PD13LmJvdHRvbS5lbmRYfHx5PD13LmJvdHRvbS5zdGFydFgmJno+PXcuYm90dG9tLmVuZFgmJjEuNT50WzJdLyh3LmJvdHRvbS5lbmRYLXcuYm90dG9tLnN0YXJ0WCkmJi41PHRbMl0vKHcuYm90dG9tLmVuZFgtdy5ib3R0b20uc3RhcnRYKSk7MDxtLmxlbmd0aD9tWzBdLmJvdHRvbT1rOmMucHVzaCh7dG9wOmssYm90dG9tOmt9KX1pZihoKXtsZXQgej12LXRbNF0seT16LXRbM107aD17c3RhcnRYOnkseTpwLGVuZFg6en07az1lLmZpbHRlcih3PT55Pj13LmJvdHRvbS5zdGFydFgmJnk8PXcuYm90dG9tLmVuZFh8fHo+PXcuYm90dG9tLnN0YXJ0WCYmeTw9dy5ib3R0b20uZW5kWHx8eTw9dy5ib3R0b20uc3RhcnRYJiZ6Pj13LmJvdHRvbS5lbmRYJiYxLjU+dFsyXS8ody5ib3R0b20uZW5kWC13LmJvdHRvbS5zdGFydFgpJiYuNTx0WzJdLyh3LmJvdHRvbS5lbmRYLXcuYm90dG9tLnN0YXJ0WCkpOzA8ay5sZW5ndGg/CmtbMF0uYm90dG9tPWg6ZS5wdXNoKHt0b3A6aCxib3R0b206aH0pfX19Yi5wdXNoKC4uLmMuZmlsdGVyKHY9PnYuYm90dG9tLnkhPT1wJiYyPD12LmJvdHRvbS55LXYudG9wLnkpKTtjPWMuZmlsdGVyKHY9PnYuYm90dG9tLnk9PT1wKTtkLnB1c2goLi4uZS5maWx0ZXIodj0+di5ib3R0b20ueSE9PXApKTtlPWUuZmlsdGVyKHY9PnYuYm90dG9tLnk9PT1wKX1iLnB1c2goLi4uYy5maWx0ZXIocD0+Mjw9cC5ib3R0b20ueS1wLnRvcC55KSk7ZC5wdXNoKC4uLmUpO2M9W107Zm9yKHZhciBsIG9mIGIpMj5sLmJvdHRvbS55LWwudG9wLnl8fChiPShsLnRvcC5zdGFydFgrbC50b3AuZW5kWCtsLmJvdHRvbS5zdGFydFgrbC5ib3R0b20uZW5kWCkvNCxlPShsLnRvcC55K2wuYm90dG9tLnkrMSkvMixhLmdldChNYXRoLnJvdW5kKGIpLE1hdGgucm91bmQoZSkpJiYoZj1bbC50b3AuZW5kWC1sLnRvcC5zdGFydFgsbC5ib3R0b20uZW5kWC1sLmJvdHRvbS5zdGFydFgsbC5ib3R0b20ueS1sLnRvcC55KwoxXSxmPU8oZikvZi5sZW5ndGgsZz1TKHt4Ok1hdGgucm91bmQoYikseTpNYXRoLnJvdW5kKGUpfSxbMSwxLDMsMSwxXSxhKSxjLnB1c2goe3Njb3JlOmcseDpiLHk6ZSxzaXplOmZ9KSkpO2lmKDM+Yy5sZW5ndGgpcmV0dXJuIG51bGw7Yy5zb3J0KChwLHQpPT5wLnNjb3JlLXQuc2NvcmUpO2w9W107Zm9yKGI9MDtiPE1hdGgubWluKGMubGVuZ3RoLDUpOysrYil7ZT1jW2JdO2Y9W107Zm9yKHZhciBuIG9mIGMpbiE9PWUmJmYucHVzaChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbikse3Njb3JlOm4uc2NvcmUrTWF0aC5wb3cobi5zaXplLWUuc2l6ZSwyKS9lLnNpemV9KSk7Zi5zb3J0KChwLHQpPT5wLnNjb3JlLXQuc2NvcmUpO2wucHVzaCh7cG9pbnRzOltlLGZbMF0sZlsxXV0sc2NvcmU6ZS5zY29yZStmWzBdLnNjb3JlK2ZbMV0uc2NvcmV9KX1sLnNvcnQoKHAsdCk9PnAuc2NvcmUtdC5zY29yZSk7bGV0IHt0b3BSaWdodDpxLHRvcExlZnQ6cixib3R0b21MZWZ0OnV9PXFhKC4uLmxbMF0ucG9pbnRzKTsKbD1VKGEsZCxxLHIsdSk7bj1bXTtsJiZuLnB1c2goe2FsaWdubWVudFBhdHRlcm46e3g6bC5hbGlnbm1lbnRQYXR0ZXJuLngseTpsLmFsaWdubWVudFBhdHRlcm4ueX0sYm90dG9tTGVmdDp7eDp1LngseTp1Lnl9LGRpbWVuc2lvbjpsLmRpbWVuc2lvbix0b3BMZWZ0Ont4OnIueCx5OnIueX0sdG9wUmlnaHQ6e3g6cS54LHk6cS55fX0pO2w9VChhLHEpO2I9VChhLHIpO2M9VChhLHUpOyhhPVUoYSxkLGwsYixjKSkmJm4ucHVzaCh7YWxpZ25tZW50UGF0dGVybjp7eDphLmFsaWdubWVudFBhdHRlcm4ueCx5OmEuYWxpZ25tZW50UGF0dGVybi55fSxib3R0b21MZWZ0Ont4OmMueCx5OmMueX0sdG9wTGVmdDp7eDpiLngseTpiLnl9LHRvcFJpZ2h0Ont4OmwueCx5OmwueX0sZGltZW5zaW9uOmEuZGltZW5zaW9ufSk7cmV0dXJuIDA9PT1uLmxlbmd0aD9udWxsOm59CmZ1bmN0aW9uIFUoYSxiLGMsZCxlKXtsZXQgZixnO3RyeXsoe2RpbWVuc2lvbjpmLG1vZHVsZVNpemU6Z309cmEoZCxjLGUsYSkpfWNhdGNoKGwpe3JldHVybiBudWxsfXZhciBoPWMueC1kLngrZS54LGs9Yy55LWQueStlLnk7Yz0oTihkLGUpK04oZCxjKSkvMi9nO2U9MS0zL2M7bGV0IG09e3g6ZC54K2UqKGgtZC54KSx5OmQueStlKihrLWQueSl9O2I9Yi5tYXAobD0+e2NvbnN0IG49KGwudG9wLnN0YXJ0WCtsLnRvcC5lbmRYK2wuYm90dG9tLnN0YXJ0WCtsLmJvdHRvbS5lbmRYKS80O2w9KGwudG9wLnkrbC5ib3R0b20ueSsxKS8yO2lmKGEuZ2V0KE1hdGguZmxvb3IobiksTWF0aC5mbG9vcihsKSkpe3ZhciBxPVMoe3g6TWF0aC5mbG9vcihuKSx5Ok1hdGguZmxvb3IobCl9LFsxLDEsMV0sYSkrTih7eDpuLHk6bH0sbSk7cmV0dXJue3g6bix5Omwsc2NvcmU6cX19fSkuZmlsdGVyKGw9PiEhbCkuc29ydCgobCxuKT0+bC5zY29yZS1uLnNjb3JlKTtyZXR1cm57YWxpZ25tZW50UGF0dGVybjoxNTw9CmMmJmIubGVuZ3RoP2JbMF06bSxkaW1lbnNpb246Zn19CmZ1bmN0aW9uIFYoYSl7dmFyIGI9c2EoYSk7aWYoIWIpcmV0dXJuIG51bGw7Zm9yKGxldCBlIG9mIGIpe2I9cGEoYSxlKTt2YXIgYz1iLm1hdHJpeDtpZihudWxsPT1jKWM9bnVsbDtlbHNle3ZhciBkPUwoYyk7aWYoZCljPWQ7ZWxzZXtmb3IoZD0wO2Q8Yy53aWR0aDtkKyspZm9yKGxldCBmPWQrMTtmPGMuaGVpZ2h0O2YrKyljLmdldChkLGYpIT09Yy5nZXQoZixkKSYmKGMuc2V0KGQsZiwhYy5nZXQoZCxmKSksYy5zZXQoZixkLCFjLmdldChmLGQpKSk7Yz1MKGMpfX1pZihjKXJldHVybntiaW5hcnlEYXRhOmMuYnl0ZXMsZGF0YTpjLnRleHQsY2h1bmtzOmMuY2h1bmtzLHZlcnNpb246Yy52ZXJzaW9uLGxvY2F0aW9uOnt0b3BSaWdodENvcm5lcjpiLm1hcHBpbmdGdW5jdGlvbihlLmRpbWVuc2lvbiwwKSx0b3BMZWZ0Q29ybmVyOmIubWFwcGluZ0Z1bmN0aW9uKDAsMCksYm90dG9tUmlnaHRDb3JuZXI6Yi5tYXBwaW5nRnVuY3Rpb24oZS5kaW1lbnNpb24sZS5kaW1lbnNpb24pLGJvdHRvbUxlZnRDb3JuZXI6Yi5tYXBwaW5nRnVuY3Rpb24oMCwKZS5kaW1lbnNpb24pLHRvcFJpZ2h0RmluZGVyUGF0dGVybjplLnRvcFJpZ2h0LHRvcExlZnRGaW5kZXJQYXR0ZXJuOmUudG9wTGVmdCxib3R0b21MZWZ0RmluZGVyUGF0dGVybjplLmJvdHRvbUxlZnQsYm90dG9tUmlnaHRBbGlnbm1lbnRQYXR0ZXJuOmUuYWxpZ25tZW50UGF0dGVybn0sbWF0cml4OmIubWF0cml4fX1yZXR1cm4gbnVsbH1sZXQgdGE9e2ludmVyc2lvbkF0dGVtcHRzOiJhdHRlbXB0Qm90aCIsZ3JleVNjYWxlV2VpZ2h0czp7cmVkOi4yMTI2LGdyZWVuOi43MTUyLGJsdWU6LjA3MjIsdXNlSW50ZWdlckFwcHJveGltYXRpb246ITF9LGNhbk92ZXJ3cml0ZUltYWdlOiEwfTtmdW5jdGlvbiBXKGEsYil7T2JqZWN0LmtleXMoYikuZm9yRWFjaChjPT57YVtjXT1iW2NdfSl9CmZ1bmN0aW9uIFgoYSxiLGMsZD17fSl7bGV0IGU9T2JqZWN0LmNyZWF0ZShudWxsKTtXKGUsdGEpO1coZSxkKTtkPSJvbmx5SW52ZXJ0Ij09PWUuaW52ZXJzaW9uQXR0ZW1wdHN8fCJpbnZlcnRGaXJzdCI9PT1lLmludmVyc2lvbkF0dGVtcHRzO3ZhciBmPSJhdHRlbXB0Qm90aCI9PT1lLmludmVyc2lvbkF0dGVtcHRzfHxkO3ZhciBnPWUuZ3JleVNjYWxlV2VpZ2h0cyxoPWUuY2FuT3ZlcndyaXRlSW1hZ2Usaz1iKmM7aWYoYS5sZW5ndGghPT00KmspdGhyb3cgRXJyb3IoIk1hbGZvcm1lZCBkYXRhIHBhc3NlZCB0byBiaW5hcml6ZXIuIik7dmFyIG09MDtpZihoKXt2YXIgbD1uZXcgVWludDhDbGFtcGVkQXJyYXkoYS5idWZmZXIsbSxrKTttKz1rfWw9bmV3IEEoYixjLGwpO2lmKGcudXNlSW50ZWdlckFwcHJveGltYXRpb24pZm9yKHZhciBuPTA7bjxjO24rKylmb3IodmFyIHE9MDtxPGI7cSsrKXt2YXIgcj00KihuKmIrcSk7bC5zZXQocSxuLGcucmVkKmFbcl0rZy5ncmVlbiphW3IrMV0rCmcuYmx1ZSphW3IrMl0rMTI4Pj44KX1lbHNlIGZvcihuPTA7bjxjO24rKylmb3IocT0wO3E8YjtxKyspcj00KihuKmIrcSksbC5zZXQocSxuLGcucmVkKmFbcl0rZy5ncmVlbiphW3IrMV0rZy5ibHVlKmFbcisyXSk7Zz1NYXRoLmNlaWwoYi84KTtuPU1hdGguY2VpbChjLzgpO3E9ZypuO2lmKGgpe3ZhciB1PW5ldyBVaW50OENsYW1wZWRBcnJheShhLmJ1ZmZlcixtLHEpO20rPXF9dT1uZXcgQShnLG4sdSk7Zm9yKHE9MDtxPG47cSsrKWZvcihyPTA7cjxnO3IrKyl7dmFyIHA9SW5maW5pdHksdD0wO2Zvcih2YXIgdj0wOzg+djt2KyspZm9yKGxldCB3PTA7OD53O3crKyl7bGV0IGFhPWwuZ2V0KDgqcit3LDgqcSt2KTtwPU1hdGgubWluKHAsYWEpO3Q9TWF0aC5tYXgodCxhYSl9dj0ocCt0KS8yO3Y9TWF0aC5taW4oMjU1LDEuMTEqdik7MjQ+PXQtcCYmKHY9cC8yLDA8cSYmMDxyJiYodD0odS5nZXQocixxLTEpKzIqdS5nZXQoci0xLHEpK3UuZ2V0KHItMSxxLTEpKS80LHA8dCYmKHY9dCkpKTsKdS5zZXQocixxLHYpfWg/KHE9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGEuYnVmZmVyLG0sayksbSs9ayxxPW5ldyB4KHEsYikpOnE9eC5jcmVhdGVFbXB0eShiLGMpO3I9bnVsbDtmJiYoaD8oYT1uZXcgVWludDhDbGFtcGVkQXJyYXkoYS5idWZmZXIsbSxrKSxyPW5ldyB4KGEsYikpOnI9eC5jcmVhdGVFbXB0eShiLGMpKTtmb3IoYj0wO2I8bjtiKyspZm9yKGE9MDthPGc7YSsrKXtjPWctMztjPTI+YT8yOmE+Yz9jOmE7aD1uLTM7aD0yPmI/MjpiPmg/aDpiO2s9MDtmb3IobT0tMjsyPj1tO20rKylmb3IocD0tMjsyPj1wO3ArKylrKz11LmdldChjK20saCtwKTtjPWsvMjU7Zm9yKGg9MDs4Pmg7aCsrKWZvcihrPTA7OD5rO2srKyltPTgqYStoLHA9OCpiK2ssdD1sLmdldChtLHApLHEuc2V0KG0scCx0PD1jKSxmJiZyLnNldChtLHAsISh0PD1jKSl9Zj1mP3tiaW5hcml6ZWQ6cSxpbnZlcnRlZDpyfTp7YmluYXJpemVkOnF9O2xldCB7YmluYXJpemVkOnosaW52ZXJ0ZWQ6eX09ZjsoZj1WKGQ/Cnk6eikpfHwiYXR0ZW1wdEJvdGgiIT09ZS5pbnZlcnNpb25BdHRlbXB0cyYmImludmVydEZpcnN0IiE9PWUuaW52ZXJzaW9uQXR0ZW1wdHN8fChmPVYoZD96OnkpKTtyZXR1cm4gZn1YLmRlZmF1bHQ9WDtsZXQgWT0iZG9udEludmVydCIsWj17cmVkOjc3LGdyZWVuOjE1MCxibHVlOjI5LHVzZUludGVnZXJBcHByb3hpbWF0aW9uOiEwfTsKc2VsZi5vbm1lc3NhZ2U9YT0+e2xldCBiPWEuZGF0YS5pZCxjPWEuZGF0YS5kYXRhO3N3aXRjaChhLmRhdGEudHlwZSl7Y2FzZSAiZGVjb2RlIjooYT1YKGMuZGF0YSxjLndpZHRoLGMuaGVpZ2h0LHtpbnZlcnNpb25BdHRlbXB0czpZLGdyZXlTY2FsZVdlaWdodHM6Wn0pKT9zZWxmLnBvc3RNZXNzYWdlKHtpZDpiLHR5cGU6InFyUmVzdWx0IixkYXRhOmEuZGF0YSxjb3JuZXJQb2ludHM6W2EubG9jYXRpb24udG9wTGVmdENvcm5lcixhLmxvY2F0aW9uLnRvcFJpZ2h0Q29ybmVyLGEubG9jYXRpb24uYm90dG9tUmlnaHRDb3JuZXIsYS5sb2NhdGlvbi5ib3R0b21MZWZ0Q29ybmVyXX0pOnNlbGYucG9zdE1lc3NhZ2Uoe2lkOmIsdHlwZToicXJSZXN1bHQiLGRhdGE6bnVsbH0pO2JyZWFrO2Nhc2UgImdyYXlzY2FsZVdlaWdodHMiOloucmVkPWMucmVkO1ouZ3JlZW49Yy5ncmVlbjtaLmJsdWU9Yy5ibHVlO1oudXNlSW50ZWdlckFwcHJveGltYXRpb249Yy51c2VJbnRlZ2VyQXBwcm94aW1hdGlvbjsKYnJlYWs7Y2FzZSAiaW52ZXJzaW9uTW9kZSI6c3dpdGNoKGMpe2Nhc2UgIm9yaWdpbmFsIjpZPSJkb250SW52ZXJ0IjticmVhaztjYXNlICJpbnZlcnQiOlk9Im9ubHlJbnZlcnQiO2JyZWFrO2Nhc2UgImJvdGgiOlk9ImF0dGVtcHRCb3RoIjticmVhaztkZWZhdWx0OnRocm93IEVycm9yKCJJbnZhbGlkIGludmVyc2lvbiBtb2RlIik7fWJyZWFrO2Nhc2UgImNsb3NlIjpzZWxmLmNsb3NlKCl9fQpgXSkse3R5cGU6ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQifSkpLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXItc2Nhbm5lci13b3JrZXIubWluLmpzLm1hcAo=" type="module"></script>
<script type="module" charset="utf-8">
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 2.7.0

Copyright (c) 2015-2018, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
!function(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r=n();for(var a in r)("object"==typeof exports?exports:t)[a]=r[a]}}("undefined"!=typeof self?self:this,function(){return function(t){var n={};function r(a){if(n[a])return n[a].exports;var e=n[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=t,r.c=n,r.d=function(t,n,a){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var e in t)r.d(a,e,function(n){return t[n]}.bind(null,e));return a},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=10)}([function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t},n.toRadian=function(t){return t*e},n.equals=function(t,n){return Math.abs(t-n)<=a*Math.max(1,Math.abs(t),Math.abs(n))};var a=n.EPSILON=1e-6;n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random;var e=Math.PI/180},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0,n.create=e,n.clone=function(t){var n=new a.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.fromValues=function(t,n,r,e){var u=new a.ARRAY_TYPE(4);return u[0]=t,u[1]=n,u[2]=r,u[3]=e,u},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.set=function(t,n,r,a,e){return t[0]=n,t[1]=r,t[2]=a,t[3]=e,t},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},n.subtract=u,n.multiply=o,n.divide=i,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},n.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t},n.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},n.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},n.scaleAndAdd=function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t},n.distance=s,n.squaredDistance=c,n.length=f,n.squaredLength=M,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},n.normalize=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=r*r+a*a+e*e+u*u;o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=a*o,t[2]=e*o,t[3]=u*o);return t},n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},n.lerp=function(t,n,r,a){var e=n[0],u=n[1],o=n[2],i=n[3];return t[0]=e+a*(r[0]-e),t[1]=u+a*(r[1]-u),t[2]=o+a*(r[2]-o),t[3]=i+a*(r[3]-i),t},n.random=function(t,n){var r,e,u,o,i,s;n=n||1;do{r=2*a.RANDOM()-1,e=2*a.RANDOM()-1,i=r*r+e*e}while(i>=1);do{u=2*a.RANDOM()-1,o=2*a.RANDOM()-1,s=u*u+o*o}while(s>=1);var c=Math.sqrt((1-i)/s);return t[0]=n*r,t[1]=n*e,t[2]=n*u*c,t[3]=n*o*c,t},n.transformMat4=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3];return t[0]=r[0]*a+r[4]*e+r[8]*u+r[12]*o,t[1]=r[1]*a+r[5]*e+r[9]*u+r[13]*o,t[2]=r[2]*a+r[6]*e+r[10]*u+r[14]*o,t[3]=r[3]*a+r[7]*e+r[11]*u+r[15]*o,t},n.transformQuat=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=r[0],i=r[1],s=r[2],c=r[3],f=c*a+i*u-s*e,M=c*e+s*a-o*u,h=c*u+o*e-i*a,l=-o*a-i*e-s*u;return t[0]=f*c+l*-o+M*-s-h*-i,t[1]=M*c+l*-i+h*-o-f*-s,t[2]=h*c+l*-s+f*-i-M*-o,t[3]=n[3],t},n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){var r=t[0],e=t[1],u=t[2],o=t[3],i=n[0],s=n[1],c=n[2],f=n[3];return Math.abs(r-i)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-s)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(u-c)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(c))&&Math.abs(o-f)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))};var a=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}(r(0));function e(){var t=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function u(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function o(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t}function i(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t}function s(t,n){var r=n[0]-t[0],a=n[1]-t[1],e=n[2]-t[2],u=n[3]-t[3];return Math.sqrt(r*r+a*a+e*e+u*u)}function c(t,n){var r=n[0]-t[0],a=n[1]-t[1],e=n[2]-t[2],u=n[3]-t[3];return r*r+a*a+e*e+u*u}function f(t){var n=t[0],r=t[1],a=t[2],e=t[3];return Math.sqrt(n*n+r*r+a*a+e*e)}function M(t){var n=t[0],r=t[1],a=t[2],e=t[3];return n*n+r*r+a*a+e*e}n.sub=u,n.mul=o,n.div=i,n.dist=s,n.sqrDist=c,n.len=f,n.sqrLen=M,n.forEach=function(){var t=e();return function(n,r,a,e,u,o){var i=void 0,s=void 0;for(r||(r=4),a||(a=0),s=e?Math.min(e*r+a,n.length):n.length,i=a;i<s;i+=r)t[0]=n[i],t[1]=n[i+1],t[2]=n[i+2],t[3]=n[i+3],u(t,t,o),n[i]=t[0],n[i+1]=t[1],n[i+2]=t[2],n[i+3]=t[3];return n}}()},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0,n.create=e,n.clone=function(t){var n=new a.ARRAY_TYPE(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},n.length=u,n.fromValues=o,n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},n.set=function(t,n,r,a){return t[0]=n,t[1]=r,t[2]=a,t},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t},n.subtract=i,n.multiply=s,n.divide=c,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},n.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t},n.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},n.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t},n.scaleAndAdd=function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t},n.distance=f,n.squaredDistance=M,n.squaredLength=h,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},n.normalize=l,n.dot=v,n.cross=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=r[0],i=r[1],s=r[2];return t[0]=e*s-u*i,t[1]=u*o-a*s,t[2]=a*i-e*o,t},n.lerp=function(t,n,r,a){var e=n[0],u=n[1],o=n[2];return t[0]=e+a*(r[0]-e),t[1]=u+a*(r[1]-u),t[2]=o+a*(r[2]-o),t},n.hermite=function(t,n,r,a,e,u){var o=u*u,i=o*(2*u-3)+1,s=o*(u-2)+u,c=o*(u-1),f=o*(3-2*u);return t[0]=n[0]*i+r[0]*s+a[0]*c+e[0]*f,t[1]=n[1]*i+r[1]*s+a[1]*c+e[1]*f,t[2]=n[2]*i+r[2]*s+a[2]*c+e[2]*f,t},n.bezier=function(t,n,r,a,e,u){var o=1-u,i=o*o,s=u*u,c=i*o,f=3*u*i,M=3*s*o,h=s*u;return t[0]=n[0]*c+r[0]*f+a[0]*M+e[0]*h,t[1]=n[1]*c+r[1]*f+a[1]*M+e[1]*h,t[2]=n[2]*c+r[2]*f+a[2]*M+e[2]*h,t},n.random=function(t,n){n=n||1;var r=2*a.RANDOM()*Math.PI,e=2*a.RANDOM()-1,u=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(r)*u,t[1]=Math.sin(r)*u,t[2]=e*n,t},n.transformMat4=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=r[3]*a+r[7]*e+r[11]*u+r[15];return o=o||1,t[0]=(r[0]*a+r[4]*e+r[8]*u+r[12])/o,t[1]=(r[1]*a+r[5]*e+r[9]*u+r[13])/o,t[2]=(r[2]*a+r[6]*e+r[10]*u+r[14])/o,t},n.transformMat3=function(t,n,r){var a=n[0],e=n[1],u=n[2];return t[0]=a*r[0]+e*r[3]+u*r[6],t[1]=a*r[1]+e*r[4]+u*r[7],t[2]=a*r[2]+e*r[5]+u*r[8],t},n.transformQuat=function(t,n,r){var a=r[0],e=r[1],u=r[2],o=r[3],i=n[0],s=n[1],c=n[2],f=e*c-u*s,M=u*i-a*c,h=a*s-e*i,l=e*h-u*M,v=u*f-a*h,d=a*M-e*f,b=2*o;return f*=b,M*=b,h*=b,l*=2,v*=2,d*=2,t[0]=i+f+l,t[1]=s+M+v,t[2]=c+h+d,t},n.rotateX=function(t,n,r,a){var e=[],u=[];return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],u[0]=e[0],u[1]=e[1]*Math.cos(a)-e[2]*Math.sin(a),u[2]=e[1]*Math.sin(a)+e[2]*Math.cos(a),t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},n.rotateY=function(t,n,r,a){var e=[],u=[];return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],u[0]=e[2]*Math.sin(a)+e[0]*Math.cos(a),u[1]=e[1],u[2]=e[2]*Math.cos(a)-e[0]*Math.sin(a),t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},n.rotateZ=function(t,n,r,a){var e=[],u=[];return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],u[0]=e[0]*Math.cos(a)-e[1]*Math.sin(a),u[1]=e[0]*Math.sin(a)+e[1]*Math.cos(a),u[2]=e[2],t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},n.angle=function(t,n){var r=o(t[0],t[1],t[2]),a=o(n[0],n[1],n[2]);l(r,r),l(a,a);var e=v(r,a);return e>1?0:e<-1?Math.PI:Math.acos(e)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},n.equals=function(t,n){var r=t[0],e=t[1],u=t[2],o=n[0],i=n[1],s=n[2];return Math.abs(r-o)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(e-i)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(u-s)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(s))};var a=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}(r(0));function e(){var t=new a.ARRAY_TYPE(3);return a.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function u(t){var n=t[0],r=t[1],a=t[2];return Math.sqrt(n*n+r*r+a*a)}function o(t,n,r){var e=new a.ARRAY_TYPE(3);return e[0]=t,e[1]=n,e[2]=r,e}function i(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function s(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function c(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function f(t,n){var r=n[0]-t[0],a=n[1]-t[1],e=n[2]-t[2];return Math.sqrt(r*r+a*a+e*e)}function M(t,n){var r=n[0]-t[0],a=n[1]-t[1],e=n[2]-t[2];return r*r+a*a+e*e}function h(t){var n=t[0],r=t[1],a=t[2];return n*n+r*r+a*a}function l(t,n){var r=n[0],a=n[1],e=n[2],u=r*r+a*a+e*e;return u>0&&(u=1/Math.sqrt(u),t[0]=n[0]*u,t[1]=n[1]*u,t[2]=n[2]*u),t}function v(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}n.sub=i,n.mul=s,n.div=c,n.dist=f,n.sqrDist=M,n.len=u,n.sqrLen=h,n.forEach=function(){var t=e();return function(n,r,a,e,u,o){var i=void 0,s=void 0;for(r||(r=3),a||(a=0),s=e?Math.min(e*r+a,n.length):n.length,i=a;i<s;i+=r)t[0]=n[i],t[1]=n[i+1],t[2]=n[i+2],u(t,t,o),n[i]=t[0],n[i+1]=t[1],n[i+2]=t[2];return n}}()},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setAxes=n.sqlerp=n.rotationTo=n.equals=n.exactEquals=n.normalize=n.sqrLen=n.squaredLength=n.len=n.length=n.lerp=n.dot=n.scale=n.mul=n.add=n.set=n.copy=n.fromValues=n.clone=void 0,n.create=s,n.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},n.setAxisAngle=c,n.getAxisAngle=function(t,n){var r=2*Math.acos(n[3]),e=Math.sin(r/2);e>a.EPSILON?(t[0]=n[0]/e,t[1]=n[1]/e,t[2]=n[2]/e):(t[0]=1,t[1]=0,t[2]=0);return r},n.multiply=f,n.rotateX=function(t,n,r){r*=.5;var a=n[0],e=n[1],u=n[2],o=n[3],i=Math.sin(r),s=Math.cos(r);return t[0]=a*s+o*i,t[1]=e*s+u*i,t[2]=u*s-e*i,t[3]=o*s-a*i,t},n.rotateY=function(t,n,r){r*=.5;var a=n[0],e=n[1],u=n[2],o=n[3],i=Math.sin(r),s=Math.cos(r);return t[0]=a*s-u*i,t[1]=e*s+o*i,t[2]=u*s+a*i,t[3]=o*s-e*i,t},n.rotateZ=function(t,n,r){r*=.5;var a=n[0],e=n[1],u=n[2],o=n[3],i=Math.sin(r),s=Math.cos(r);return t[0]=a*s+e*i,t[1]=e*s-a*i,t[2]=u*s+o*i,t[3]=o*s-u*i,t},n.calculateW=function(t,n){var r=n[0],a=n[1],e=n[2];return t[0]=r,t[1]=a,t[2]=e,t[3]=Math.sqrt(Math.abs(1-r*r-a*a-e*e)),t},n.slerp=M,n.random=function(t){var n=a.RANDOM(),r=a.RANDOM(),e=a.RANDOM(),u=Math.sqrt(1-n),o=Math.sqrt(n);return t[0]=u*Math.sin(2*Math.PI*r),t[1]=u*Math.cos(2*Math.PI*r),t[2]=o*Math.sin(2*Math.PI*e),t[3]=o*Math.cos(2*Math.PI*e),t},n.invert=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=r*r+a*a+e*e+u*u,i=o?1/o:0;return t[0]=-r*i,t[1]=-a*i,t[2]=-e*i,t[3]=u*i,t},n.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},n.fromMat3=h,n.fromEuler=function(t,n,r,a){var e=.5*Math.PI/180;n*=e,r*=e,a*=e;var u=Math.sin(n),o=Math.cos(n),i=Math.sin(r),s=Math.cos(r),c=Math.sin(a),f=Math.cos(a);return t[0]=u*s*f-o*i*c,t[1]=o*i*f+u*s*c,t[2]=o*s*c-u*i*f,t[3]=o*s*f+u*i*c,t},n.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var a=i(r(0)),e=i(r(5)),u=i(r(2)),o=i(r(1));function i(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}function s(){var t=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function c(t,n,r){r*=.5;var a=Math.sin(r);return t[0]=a*n[0],t[1]=a*n[1],t[2]=a*n[2],t[3]=Math.cos(r),t}function f(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=r[0],s=r[1],c=r[2],f=r[3];return t[0]=a*f+o*i+e*c-u*s,t[1]=e*f+o*s+u*i-a*c,t[2]=u*f+o*c+a*s-e*i,t[3]=o*f-a*i-e*s-u*c,t}function M(t,n,r,e){var u=n[0],o=n[1],i=n[2],s=n[3],c=r[0],f=r[1],M=r[2],h=r[3],l=void 0,v=void 0,d=void 0,b=void 0,m=void 0;return(v=u*c+o*f+i*M+s*h)<0&&(v=-v,c=-c,f=-f,M=-M,h=-h),1-v>a.EPSILON?(l=Math.acos(v),d=Math.sin(l),b=Math.sin((1-e)*l)/d,m=Math.sin(e*l)/d):(b=1-e,m=e),t[0]=b*u+m*c,t[1]=b*o+m*f,t[2]=b*i+m*M,t[3]=b*s+m*h,t}function h(t,n){var r=n[0]+n[4]+n[8],a=void 0;if(r>0)a=Math.sqrt(r+1),t[3]=.5*a,a=.5/a,t[0]=(n[5]-n[7])*a,t[1]=(n[6]-n[2])*a,t[2]=(n[1]-n[3])*a;else{var e=0;n[4]>n[0]&&(e=1),n[8]>n[3*e+e]&&(e=2);var u=(e+1)%3,o=(e+2)%3;a=Math.sqrt(n[3*e+e]-n[3*u+u]-n[3*o+o]+1),t[e]=.5*a,a=.5/a,t[3]=(n[3*u+o]-n[3*o+u])*a,t[u]=(n[3*u+e]+n[3*e+u])*a,t[o]=(n[3*o+e]+n[3*e+o])*a}return t}n.clone=o.clone,n.fromValues=o.fromValues,n.copy=o.copy,n.set=o.set,n.add=o.add,n.mul=f,n.scale=o.scale,n.dot=o.dot,n.lerp=o.lerp;var l=n.length=o.length,v=(n.len=l,n.squaredLength=o.squaredLength),d=(n.sqrLen=v,n.normalize=o.normalize);n.exactEquals=o.exactEquals,n.equals=o.equals,n.rotationTo=function(){var t=u.create(),n=u.fromValues(1,0,0),r=u.fromValues(0,1,0);return function(a,e,o){var i=u.dot(e,o);return i<-.999999?(u.cross(t,n,e),u.len(t)<1e-6&&u.cross(t,r,e),u.normalize(t,t),c(a,t,Math.PI),a):i>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(u.cross(t,e,o),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1+i,d(a,a))}}(),n.sqlerp=function(){var t=s(),n=s();return function(r,a,e,u,o,i){return M(t,a,o,i),M(n,e,u,i),M(r,t,n,2*i*(1-i)),r}}(),n.setAxes=function(){var t=e.create();return function(n,r,a,e){return t[0]=a[0],t[3]=a[1],t[6]=a[2],t[1]=e[0],t[4]=e[1],t[7]=e[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],d(n,h(n,t))}}()},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sub=n.mul=void 0,n.create=function(){var t=new a.ARRAY_TYPE(16);a.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},n.clone=function(t){var n=new a.ARRAY_TYPE(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.fromValues=function(t,n,r,e,u,o,i,s,c,f,M,h,l,v,d,b){var m=new a.ARRAY_TYPE(16);return m[0]=t,m[1]=n,m[2]=r,m[3]=e,m[4]=u,m[5]=o,m[6]=i,m[7]=s,m[8]=c,m[9]=f,m[10]=M,m[11]=h,m[12]=l,m[13]=v,m[14]=d,m[15]=b,m},n.set=function(t,n,r,a,e,u,o,i,s,c,f,M,h,l,v,d,b){return t[0]=n,t[1]=r,t[2]=a,t[3]=e,t[4]=u,t[5]=o,t[6]=i,t[7]=s,t[8]=c,t[9]=f,t[10]=M,t[11]=h,t[12]=l,t[13]=v,t[14]=d,t[15]=b,t},n.identity=e,n.transpose=function(t,n){if(t===n){var r=n[1],a=n[2],e=n[3],u=n[6],o=n[7],i=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=a,t[9]=u,t[11]=n[14],t[12]=e,t[13]=o,t[14]=i}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},n.invert=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],s=n[6],c=n[7],f=n[8],M=n[9],h=n[10],l=n[11],v=n[12],d=n[13],b=n[14],m=n[15],p=r*i-a*o,P=r*s-e*o,A=r*c-u*o,E=a*s-e*i,O=a*c-u*i,R=e*c-u*s,y=f*d-M*v,q=f*b-h*v,x=f*m-l*v,_=M*b-h*d,Y=M*m-l*d,L=h*m-l*b,S=p*L-P*Y+A*_+E*x-O*q+R*y;if(!S)return null;return S=1/S,t[0]=(i*L-s*Y+c*_)*S,t[1]=(e*Y-a*L-u*_)*S,t[2]=(d*R-b*O+m*E)*S,t[3]=(h*O-M*R-l*E)*S,t[4]=(s*x-o*L-c*q)*S,t[5]=(r*L-e*x+u*q)*S,t[6]=(b*A-v*R-m*P)*S,t[7]=(f*R-h*A+l*P)*S,t[8]=(o*Y-i*x+c*y)*S,t[9]=(a*x-r*Y-u*y)*S,t[10]=(v*O-d*A+m*p)*S,t[11]=(M*A-f*O-l*p)*S,t[12]=(i*q-o*_-s*y)*S,t[13]=(r*_-a*q+e*y)*S,t[14]=(d*P-v*E-b*p)*S,t[15]=(f*E-M*P+h*p)*S,t},n.adjoint=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],s=n[6],c=n[7],f=n[8],M=n[9],h=n[10],l=n[11],v=n[12],d=n[13],b=n[14],m=n[15];return t[0]=i*(h*m-l*b)-M*(s*m-c*b)+d*(s*l-c*h),t[1]=-(a*(h*m-l*b)-M*(e*m-u*b)+d*(e*l-u*h)),t[2]=a*(s*m-c*b)-i*(e*m-u*b)+d*(e*c-u*s),t[3]=-(a*(s*l-c*h)-i*(e*l-u*h)+M*(e*c-u*s)),t[4]=-(o*(h*m-l*b)-f*(s*m-c*b)+v*(s*l-c*h)),t[5]=r*(h*m-l*b)-f*(e*m-u*b)+v*(e*l-u*h),t[6]=-(r*(s*m-c*b)-o*(e*m-u*b)+v*(e*c-u*s)),t[7]=r*(s*l-c*h)-o*(e*l-u*h)+f*(e*c-u*s),t[8]=o*(M*m-l*d)-f*(i*m-c*d)+v*(i*l-c*M),t[9]=-(r*(M*m-l*d)-f*(a*m-u*d)+v*(a*l-u*M)),t[10]=r*(i*m-c*d)-o*(a*m-u*d)+v*(a*c-u*i),t[11]=-(r*(i*l-c*M)-o*(a*l-u*M)+f*(a*c-u*i)),t[12]=-(o*(M*b-h*d)-f*(i*b-s*d)+v*(i*h-s*M)),t[13]=r*(M*b-h*d)-f*(a*b-e*d)+v*(a*h-e*M),t[14]=-(r*(i*b-s*d)-o*(a*b-e*d)+v*(a*s-e*i)),t[15]=r*(i*h-s*M)-o*(a*h-e*M)+f*(a*s-e*i),t},n.determinant=function(t){var n=t[0],r=t[1],a=t[2],e=t[3],u=t[4],o=t[5],i=t[6],s=t[7],c=t[8],f=t[9],M=t[10],h=t[11],l=t[12],v=t[13],d=t[14],b=t[15];return(n*o-r*u)*(M*b-h*d)-(n*i-a*u)*(f*b-h*v)+(n*s-e*u)*(f*d-M*v)+(r*i-a*o)*(c*b-h*l)-(r*s-e*o)*(c*d-M*l)+(a*s-e*i)*(c*v-f*l)},n.multiply=u,n.translate=function(t,n,r){var a=r[0],e=r[1],u=r[2],o=void 0,i=void 0,s=void 0,c=void 0,f=void 0,M=void 0,h=void 0,l=void 0,v=void 0,d=void 0,b=void 0,m=void 0;n===t?(t[12]=n[0]*a+n[4]*e+n[8]*u+n[12],t[13]=n[1]*a+n[5]*e+n[9]*u+n[13],t[14]=n[2]*a+n[6]*e+n[10]*u+n[14],t[15]=n[3]*a+n[7]*e+n[11]*u+n[15]):(o=n[0],i=n[1],s=n[2],c=n[3],f=n[4],M=n[5],h=n[6],l=n[7],v=n[8],d=n[9],b=n[10],m=n[11],t[0]=o,t[1]=i,t[2]=s,t[3]=c,t[4]=f,t[5]=M,t[6]=h,t[7]=l,t[8]=v,t[9]=d,t[10]=b,t[11]=m,t[12]=o*a+f*e+v*u+n[12],t[13]=i*a+M*e+d*u+n[13],t[14]=s*a+h*e+b*u+n[14],t[15]=c*a+l*e+m*u+n[15]);return t},n.scale=function(t,n,r){var a=r[0],e=r[1],u=r[2];return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*u,t[9]=n[9]*u,t[10]=n[10]*u,t[11]=n[11]*u,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.rotate=function(t,n,r,e){var u=e[0],o=e[1],i=e[2],s=Math.sqrt(u*u+o*o+i*i),c=void 0,f=void 0,M=void 0,h=void 0,l=void 0,v=void 0,d=void 0,b=void 0,m=void 0,p=void 0,P=void 0,A=void 0,E=void 0,O=void 0,R=void 0,y=void 0,q=void 0,x=void 0,_=void 0,Y=void 0,L=void 0,S=void 0,w=void 0,I=void 0;if(s<a.EPSILON)return null;u*=s=1/s,o*=s,i*=s,c=Math.sin(r),f=Math.cos(r),M=1-f,h=n[0],l=n[1],v=n[2],d=n[3],b=n[4],m=n[5],p=n[6],P=n[7],A=n[8],E=n[9],O=n[10],R=n[11],y=u*u*M+f,q=o*u*M+i*c,x=i*u*M-o*c,_=u*o*M-i*c,Y=o*o*M+f,L=i*o*M+u*c,S=u*i*M+o*c,w=o*i*M-u*c,I=i*i*M+f,t[0]=h*y+b*q+A*x,t[1]=l*y+m*q+E*x,t[2]=v*y+p*q+O*x,t[3]=d*y+P*q+R*x,t[4]=h*_+b*Y+A*L,t[5]=l*_+m*Y+E*L,t[6]=v*_+p*Y+O*L,t[7]=d*_+P*Y+R*L,t[8]=h*S+b*w+A*I,t[9]=l*S+m*w+E*I,t[10]=v*S+p*w+O*I,t[11]=d*S+P*w+R*I,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t},n.rotateX=function(t,n,r){var a=Math.sin(r),e=Math.cos(r),u=n[4],o=n[5],i=n[6],s=n[7],c=n[8],f=n[9],M=n[10],h=n[11];n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[4]=u*e+c*a,t[5]=o*e+f*a,t[6]=i*e+M*a,t[7]=s*e+h*a,t[8]=c*e-u*a,t[9]=f*e-o*a,t[10]=M*e-i*a,t[11]=h*e-s*a,t},n.rotateY=function(t,n,r){var a=Math.sin(r),e=Math.cos(r),u=n[0],o=n[1],i=n[2],s=n[3],c=n[8],f=n[9],M=n[10],h=n[11];n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[0]=u*e-c*a,t[1]=o*e-f*a,t[2]=i*e-M*a,t[3]=s*e-h*a,t[8]=u*a+c*e,t[9]=o*a+f*e,t[10]=i*a+M*e,t[11]=s*a+h*e,t},n.rotateZ=function(t,n,r){var a=Math.sin(r),e=Math.cos(r),u=n[0],o=n[1],i=n[2],s=n[3],c=n[4],f=n[5],M=n[6],h=n[7];n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]);return t[0]=u*e+c*a,t[1]=o*e+f*a,t[2]=i*e+M*a,t[3]=s*e+h*a,t[4]=c*e-u*a,t[5]=f*e-o*a,t[6]=M*e-i*a,t[7]=h*e-s*a,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,n,r){var e=r[0],u=r[1],o=r[2],i=Math.sqrt(e*e+u*u+o*o),s=void 0,c=void 0,f=void 0;if(i<a.EPSILON)return null;return e*=i=1/i,u*=i,o*=i,s=Math.sin(n),c=Math.cos(n),f=1-c,t[0]=e*e*f+c,t[1]=u*e*f+o*s,t[2]=o*e*f-u*s,t[3]=0,t[4]=e*u*f-o*s,t[5]=u*u*f+c,t[6]=o*u*f+e*s,t[7]=0,t[8]=e*o*f+u*s,t[9]=u*o*f-e*s,t[10]=o*o*f+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromXRotation=function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=o,n.fromQuat2=function(t,n){var r=new a.ARRAY_TYPE(3),e=-n[0],u=-n[1],i=-n[2],s=n[3],c=n[4],f=n[5],M=n[6],h=n[7],l=e*e+u*u+i*i+s*s;l>0?(r[0]=2*(c*s+h*e+f*i-M*u)/l,r[1]=2*(f*s+h*u+M*e-c*i)/l,r[2]=2*(M*s+h*i+c*u-f*e)/l):(r[0]=2*(c*s+h*e+f*i-M*u),r[1]=2*(f*s+h*u+M*e-c*i),r[2]=2*(M*s+h*i+c*u-f*e));return o(t,n,r),t},n.getTranslation=function(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t},n.getScaling=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[4],o=n[5],i=n[6],s=n[8],c=n[9],f=n[10];return t[0]=Math.sqrt(r*r+a*a+e*e),t[1]=Math.sqrt(u*u+o*o+i*i),t[2]=Math.sqrt(s*s+c*c+f*f),t},n.getRotation=function(t,n){var r=n[0]+n[5]+n[10],a=0;r>0?(a=2*Math.sqrt(r+1),t[3]=.25*a,t[0]=(n[6]-n[9])/a,t[1]=(n[8]-n[2])/a,t[2]=(n[1]-n[4])/a):n[0]>n[5]&&n[0]>n[10]?(a=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/a,t[0]=.25*a,t[1]=(n[1]+n[4])/a,t[2]=(n[8]+n[2])/a):n[5]>n[10]?(a=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/a,t[0]=(n[1]+n[4])/a,t[1]=.25*a,t[2]=(n[6]+n[9])/a):(a=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/a,t[0]=(n[8]+n[2])/a,t[1]=(n[6]+n[9])/a,t[2]=.25*a);return t},n.fromRotationTranslationScale=function(t,n,r,a){var e=n[0],u=n[1],o=n[2],i=n[3],s=e+e,c=u+u,f=o+o,M=e*s,h=e*c,l=e*f,v=u*c,d=u*f,b=o*f,m=i*s,p=i*c,P=i*f,A=a[0],E=a[1],O=a[2];return t[0]=(1-(v+b))*A,t[1]=(h+P)*A,t[2]=(l-p)*A,t[3]=0,t[4]=(h-P)*E,t[5]=(1-(M+b))*E,t[6]=(d+m)*E,t[7]=0,t[8]=(l+p)*O,t[9]=(d-m)*O,t[10]=(1-(M+v))*O,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,n,r,a,e){var u=n[0],o=n[1],i=n[2],s=n[3],c=u+u,f=o+o,M=i+i,h=u*c,l=u*f,v=u*M,d=o*f,b=o*M,m=i*M,p=s*c,P=s*f,A=s*M,E=a[0],O=a[1],R=a[2],y=e[0],q=e[1],x=e[2],_=(1-(d+m))*E,Y=(l+A)*E,L=(v-P)*E,S=(l-A)*O,w=(1-(h+m))*O,I=(b+p)*O,N=(v+P)*R,g=(b-p)*R,T=(1-(h+d))*R;return t[0]=_,t[1]=Y,t[2]=L,t[3]=0,t[4]=S,t[5]=w,t[6]=I,t[7]=0,t[8]=N,t[9]=g,t[10]=T,t[11]=0,t[12]=r[0]+y-(_*y+S*q+N*x),t[13]=r[1]+q-(Y*y+w*q+g*x),t[14]=r[2]+x-(L*y+I*q+T*x),t[15]=1,t},n.fromQuat=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=r+r,i=a+a,s=e+e,c=r*o,f=a*o,M=a*i,h=e*o,l=e*i,v=e*s,d=u*o,b=u*i,m=u*s;return t[0]=1-M-v,t[1]=f+m,t[2]=h-b,t[3]=0,t[4]=f-m,t[5]=1-c-v,t[6]=l+d,t[7]=0,t[8]=h+b,t[9]=l-d,t[10]=1-c-M,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,n,r,a,e,u,o){var i=1/(r-n),s=1/(e-a),c=1/(u-o);return t[0]=2*u*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*u*s,t[6]=0,t[7]=0,t[8]=(r+n)*i,t[9]=(e+a)*s,t[10]=(o+u)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*u*2*c,t[15]=0,t},n.perspective=function(t,n,r,a,e){var u=1/Math.tan(n/2),o=void 0;t[0]=u/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(o=1/(a-e),t[10]=(e+a)*o,t[14]=2*e*a*o):(t[10]=-1,t[14]=-2*a);return t},n.perspectiveFromFieldOfView=function(t,n,r,a){var e=Math.tan(n.upDegrees*Math.PI/180),u=Math.tan(n.downDegrees*Math.PI/180),o=Math.tan(n.leftDegrees*Math.PI/180),i=Math.tan(n.rightDegrees*Math.PI/180),s=2/(o+i),c=2/(e+u);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-i)*s*.5,t[9]=(e-u)*c*.5,t[10]=a/(r-a),t[11]=-1,t[12]=0,t[13]=0,t[14]=a*r/(r-a),t[15]=0,t},n.ortho=function(t,n,r,a,e,u,o){var i=1/(n-r),s=1/(a-e),c=1/(u-o);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+r)*i,t[13]=(e+a)*s,t[14]=(o+u)*c,t[15]=1,t},n.lookAt=function(t,n,r,u){var o=void 0,i=void 0,s=void 0,c=void 0,f=void 0,M=void 0,h=void 0,l=void 0,v=void 0,d=void 0,b=n[0],m=n[1],p=n[2],P=u[0],A=u[1],E=u[2],O=r[0],R=r[1],y=r[2];if(Math.abs(b-O)<a.EPSILON&&Math.abs(m-R)<a.EPSILON&&Math.abs(p-y)<a.EPSILON)return e(t);h=b-O,l=m-R,v=p-y,d=1/Math.sqrt(h*h+l*l+v*v),o=A*(v*=d)-E*(l*=d),i=E*(h*=d)-P*v,s=P*l-A*h,(d=Math.sqrt(o*o+i*i+s*s))?(o*=d=1/d,i*=d,s*=d):(o=0,i=0,s=0);c=l*s-v*i,f=v*o-h*s,M=h*i-l*o,(d=Math.sqrt(c*c+f*f+M*M))?(c*=d=1/d,f*=d,M*=d):(c=0,f=0,M=0);return t[0]=o,t[1]=c,t[2]=h,t[3]=0,t[4]=i,t[5]=f,t[6]=l,t[7]=0,t[8]=s,t[9]=M,t[10]=v,t[11]=0,t[12]=-(o*b+i*m+s*p),t[13]=-(c*b+f*m+M*p),t[14]=-(h*b+l*m+v*p),t[15]=1,t},n.targetTo=function(t,n,r,a){var e=n[0],u=n[1],o=n[2],i=a[0],s=a[1],c=a[2],f=e-r[0],M=u-r[1],h=o-r[2],l=f*f+M*M+h*h;l>0&&(l=1/Math.sqrt(l),f*=l,M*=l,h*=l);var v=s*h-c*M,d=c*f-i*h,b=i*M-s*f;(l=v*v+d*d+b*b)>0&&(l=1/Math.sqrt(l),v*=l,d*=l,b*=l);return t[0]=v,t[1]=d,t[2]=b,t[3]=0,t[4]=M*b-h*d,t[5]=h*v-f*b,t[6]=f*d-M*v,t[7]=0,t[8]=f,t[9]=M,t[10]=h,t[11]=0,t[12]=e,t[13]=u,t[14]=o,t[15]=1,t},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t},n.subtract=i,n.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t},n.multiplyScalarAndAdd=function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t[4]=n[4]+r[4]*a,t[5]=n[5]+r[5]*a,t[6]=n[6]+r[6]*a,t[7]=n[7]+r[7]*a,t[8]=n[8]+r[8]*a,t[9]=n[9]+r[9]*a,t[10]=n[10]+r[10]*a,t[11]=n[11]+r[11]*a,t[12]=n[12]+r[12]*a,t[13]=n[13]+r[13]*a,t[14]=n[14]+r[14]*a,t[15]=n[15]+r[15]*a,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},n.equals=function(t,n){var r=t[0],e=t[1],u=t[2],o=t[3],i=t[4],s=t[5],c=t[6],f=t[7],M=t[8],h=t[9],l=t[10],v=t[11],d=t[12],b=t[13],m=t[14],p=t[15],P=n[0],A=n[1],E=n[2],O=n[3],R=n[4],y=n[5],q=n[6],x=n[7],_=n[8],Y=n[9],L=n[10],S=n[11],w=n[12],I=n[13],N=n[14],g=n[15];return Math.abs(r-P)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(e-A)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(A))&&Math.abs(u-E)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(o-O)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(i-R)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(R))&&Math.abs(s-y)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-q)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(f-x)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))&&Math.abs(M-_)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(_))&&Math.abs(h-Y)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(Y))&&Math.abs(l-L)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(v-S)<=a.EPSILON*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(d-w)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(b-I)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(m-N)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(p-g)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(g))};var a=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}(r(0));function e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function u(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],s=n[5],c=n[6],f=n[7],M=n[8],h=n[9],l=n[10],v=n[11],d=n[12],b=n[13],m=n[14],p=n[15],P=r[0],A=r[1],E=r[2],O=r[3];return t[0]=P*a+A*i+E*M+O*d,t[1]=P*e+A*s+E*h+O*b,t[2]=P*u+A*c+E*l+O*m,t[3]=P*o+A*f+E*v+O*p,P=r[4],A=r[5],E=r[6],O=r[7],t[4]=P*a+A*i+E*M+O*d,t[5]=P*e+A*s+E*h+O*b,t[6]=P*u+A*c+E*l+O*m,t[7]=P*o+A*f+E*v+O*p,P=r[8],A=r[9],E=r[10],O=r[11],t[8]=P*a+A*i+E*M+O*d,t[9]=P*e+A*s+E*h+O*b,t[10]=P*u+A*c+E*l+O*m,t[11]=P*o+A*f+E*v+O*p,P=r[12],A=r[13],E=r[14],O=r[15],t[12]=P*a+A*i+E*M+O*d,t[13]=P*e+A*s+E*h+O*b,t[14]=P*u+A*c+E*l+O*m,t[15]=P*o+A*f+E*v+O*p,t}function o(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=a+a,s=e+e,c=u+u,f=a*i,M=a*s,h=a*c,l=e*s,v=e*c,d=u*c,b=o*i,m=o*s,p=o*c;return t[0]=1-(l+d),t[1]=M+p,t[2]=h-m,t[3]=0,t[4]=M-p,t[5]=1-(f+d),t[6]=v+b,t[7]=0,t[8]=h+m,t[9]=v-b,t[10]=1-(f+l),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function i(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}n.mul=u,n.sub=i},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sub=n.mul=void 0,n.create=function(){var t=new a.ARRAY_TYPE(9);a.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0);return t[0]=1,t[4]=1,t[8]=1,t},n.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},n.clone=function(t){var n=new a.ARRAY_TYPE(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromValues=function(t,n,r,e,u,o,i,s,c){var f=new a.ARRAY_TYPE(9);return f[0]=t,f[1]=n,f[2]=r,f[3]=e,f[4]=u,f[5]=o,f[6]=i,f[7]=s,f[8]=c,f},n.set=function(t,n,r,a,e,u,o,i,s,c){return t[0]=n,t[1]=r,t[2]=a,t[3]=e,t[4]=u,t[5]=o,t[6]=i,t[7]=s,t[8]=c,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,n){if(t===n){var r=n[1],a=n[2],e=n[5];t[1]=n[3],t[2]=n[6],t[3]=r,t[5]=n[7],t[6]=a,t[7]=e}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},n.invert=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],s=n[6],c=n[7],f=n[8],M=f*o-i*c,h=-f*u+i*s,l=c*u-o*s,v=r*M+a*h+e*l;if(!v)return null;return v=1/v,t[0]=M*v,t[1]=(-f*a+e*c)*v,t[2]=(i*a-e*o)*v,t[3]=h*v,t[4]=(f*r-e*s)*v,t[5]=(-i*r+e*u)*v,t[6]=l*v,t[7]=(-c*r+a*s)*v,t[8]=(o*r-a*u)*v,t},n.adjoint=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],s=n[6],c=n[7],f=n[8];return t[0]=o*f-i*c,t[1]=e*c-a*f,t[2]=a*i-e*o,t[3]=i*s-u*f,t[4]=r*f-e*s,t[5]=e*u-r*i,t[6]=u*c-o*s,t[7]=a*s-r*c,t[8]=r*o-a*u,t},n.determinant=function(t){var n=t[0],r=t[1],a=t[2],e=t[3],u=t[4],o=t[5],i=t[6],s=t[7],c=t[8];return n*(c*u-o*s)+r*(-c*e+o*i)+a*(s*e-u*i)},n.multiply=e,n.translate=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],s=n[5],c=n[6],f=n[7],M=n[8],h=r[0],l=r[1];return t[0]=a,t[1]=e,t[2]=u,t[3]=o,t[4]=i,t[5]=s,t[6]=h*a+l*o+c,t[7]=h*e+l*i+f,t[8]=h*u+l*s+M,t},n.rotate=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],s=n[5],c=n[6],f=n[7],M=n[8],h=Math.sin(r),l=Math.cos(r);return t[0]=l*a+h*o,t[1]=l*e+h*i,t[2]=l*u+h*s,t[3]=l*o-h*a,t[4]=l*i-h*e,t[5]=l*s-h*u,t[6]=c,t[7]=f,t[8]=M,t},n.scale=function(t,n,r){var a=r[0],e=r[1];return t[0]=a*n[0],t[1]=a*n[1],t[2]=a*n[2],t[3]=e*n[3],t[4]=e*n[4],t[5]=e*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},n.fromRotation=function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=r,t[2]=0,t[3]=-r,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},n.fromQuat=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=r+r,i=a+a,s=e+e,c=r*o,f=a*o,M=a*i,h=e*o,l=e*i,v=e*s,d=u*o,b=u*i,m=u*s;return t[0]=1-M-v,t[3]=f-m,t[6]=h+b,t[1]=f+m,t[4]=1-c-v,t[7]=l-d,t[2]=h-b,t[5]=l+d,t[8]=1-c-M,t},n.normalFromMat4=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],s=n[6],c=n[7],f=n[8],M=n[9],h=n[10],l=n[11],v=n[12],d=n[13],b=n[14],m=n[15],p=r*i-a*o,P=r*s-e*o,A=r*c-u*o,E=a*s-e*i,O=a*c-u*i,R=e*c-u*s,y=f*d-M*v,q=f*b-h*v,x=f*m-l*v,_=M*b-h*d,Y=M*m-l*d,L=h*m-l*b,S=p*L-P*Y+A*_+E*x-O*q+R*y;if(!S)return null;return S=1/S,t[0]=(i*L-s*Y+c*_)*S,t[1]=(s*x-o*L-c*q)*S,t[2]=(o*Y-i*x+c*y)*S,t[3]=(e*Y-a*L-u*_)*S,t[4]=(r*L-e*x+u*q)*S,t[5]=(a*x-r*Y-u*y)*S,t[6]=(d*R-b*O+m*E)*S,t[7]=(b*A-v*R-m*P)*S,t[8]=(v*O-d*A+m*p)*S,t},n.projection=function(t,n,r){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t},n.subtract=u,n.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t},n.multiplyScalarAndAdd=function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t[4]=n[4]+r[4]*a,t[5]=n[5]+r[5]*a,t[6]=n[6]+r[6]*a,t[7]=n[7]+r[7]*a,t[8]=n[8]+r[8]*a,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},n.equals=function(t,n){var r=t[0],e=t[1],u=t[2],o=t[3],i=t[4],s=t[5],c=t[6],f=t[7],M=t[8],h=n[0],l=n[1],v=n[2],d=n[3],b=n[4],m=n[5],p=n[6],P=n[7],A=n[8];return Math.abs(r-h)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(e-l)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(u-v)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(o-d)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-b)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(s-m)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(c-p)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(f-P)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(M-A)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(A))};var a=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}(r(0));function e(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],s=n[5],c=n[6],f=n[7],M=n[8],h=r[0],l=r[1],v=r[2],d=r[3],b=r[4],m=r[5],p=r[6],P=r[7],A=r[8];return t[0]=h*a+l*o+v*c,t[1]=h*e+l*i+v*f,t[2]=h*u+l*s+v*M,t[3]=d*a+b*o+m*c,t[4]=d*e+b*i+m*f,t[5]=d*u+b*s+m*M,t[6]=p*a+P*o+A*c,t[7]=p*e+P*i+A*f,t[8]=p*u+P*s+A*M,t}function u(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t}n.mul=e,n.sub=u},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.forEach=n.sqrLen=n.sqrDist=n.dist=n.div=n.mul=n.sub=n.len=void 0,n.create=e,n.clone=function(t){var n=new a.ARRAY_TYPE(2);return n[0]=t[0],n[1]=t[1],n},n.fromValues=function(t,n){var r=new a.ARRAY_TYPE(2);return r[0]=t,r[1]=n,r},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},n.set=function(t,n,r){return t[0]=n,t[1]=r,t},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t},n.subtract=u,n.multiply=o,n.divide=i,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},n.min=function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t},n.max=function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},n.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t},n.scaleAndAdd=function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t},n.distance=s,n.squaredDistance=c,n.length=f,n.squaredLength=M,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},n.normalize=function(t,n){var r=n[0],a=n[1],e=r*r+a*a;e>0&&(e=1/Math.sqrt(e),t[0]=n[0]*e,t[1]=n[1]*e);return t},n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},n.cross=function(t,n,r){var a=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=a,t},n.lerp=function(t,n,r,a){var e=n[0],u=n[1];return t[0]=e+a*(r[0]-e),t[1]=u+a*(r[1]-u),t},n.random=function(t,n){n=n||1;var r=2*a.RANDOM()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t},n.transformMat2=function(t,n,r){var a=n[0],e=n[1];return t[0]=r[0]*a+r[2]*e,t[1]=r[1]*a+r[3]*e,t},n.transformMat2d=function(t,n,r){var a=n[0],e=n[1];return t[0]=r[0]*a+r[2]*e+r[4],t[1]=r[1]*a+r[3]*e+r[5],t},n.transformMat3=function(t,n,r){var a=n[0],e=n[1];return t[0]=r[0]*a+r[3]*e+r[6],t[1]=r[1]*a+r[4]*e+r[7],t},n.transformMat4=function(t,n,r){var a=n[0],e=n[1];return t[0]=r[0]*a+r[4]*e+r[12],t[1]=r[1]*a+r[5]*e+r[13],t},n.rotate=function(t,n,r,a){var e=n[0]-r[0],u=n[1]-r[1],o=Math.sin(a),i=Math.cos(a);return t[0]=e*i-u*o+r[0],t[1]=e*o+u*i+r[1],t},n.angle=function(t,n){var r=t[0],a=t[1],e=n[0],u=n[1],o=r*r+a*a;o>0&&(o=1/Math.sqrt(o));var i=e*e+u*u;i>0&&(i=1/Math.sqrt(i));var s=(r*e+a*u)*o*i;return s>1?0:s<-1?Math.PI:Math.acos(s)},n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]},n.equals=function(t,n){var r=t[0],e=t[1],u=n[0],o=n[1];return Math.abs(r-u)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(e-o)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))};var a=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}(r(0));function e(){var t=new a.ARRAY_TYPE(2);return a.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function u(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t}function o(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t}function i(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t}function s(t,n){var r=n[0]-t[0],a=n[1]-t[1];return Math.sqrt(r*r+a*a)}function c(t,n){var r=n[0]-t[0],a=n[1]-t[1];return r*r+a*a}function f(t){var n=t[0],r=t[1];return Math.sqrt(n*n+r*r)}function M(t){var n=t[0],r=t[1];return n*n+r*r}n.len=f,n.sub=u,n.mul=o,n.div=i,n.dist=s,n.sqrDist=c,n.sqrLen=M,n.forEach=function(){var t=e();return function(n,r,a,e,u,o){var i=void 0,s=void 0;for(r||(r=2),a||(a=0),s=e?Math.min(e*r+a,n.length):n.length,i=a;i<s;i+=r)t[0]=n[i],t[1]=n[i+1],u(t,t,o),n[i]=t[0],n[i+1]=t[1];return n}}()},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sqrLen=n.squaredLength=n.len=n.length=n.dot=n.mul=n.setReal=n.getReal=void 0,n.create=function(){var t=new a.ARRAY_TYPE(8);a.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0);return t[3]=1,t},n.clone=function(t){var n=new a.ARRAY_TYPE(8);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n},n.fromValues=function(t,n,r,e,u,o,i,s){var c=new a.ARRAY_TYPE(8);return c[0]=t,c[1]=n,c[2]=r,c[3]=e,c[4]=u,c[5]=o,c[6]=i,c[7]=s,c},n.fromRotationTranslationValues=function(t,n,r,e,u,o,i){var s=new a.ARRAY_TYPE(8);s[0]=t,s[1]=n,s[2]=r,s[3]=e;var c=.5*u,f=.5*o,M=.5*i;return s[4]=c*e+f*r-M*n,s[5]=f*e+M*t-c*r,s[6]=M*e+c*n-f*t,s[7]=-c*t-f*n-M*r,s},n.fromRotationTranslation=i,n.fromTranslation=function(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t},n.fromRotation=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},n.fromMat4=function(t,n){var r=e.create();u.getRotation(r,n);var o=new a.ARRAY_TYPE(3);return u.getTranslation(o,n),i(t,r,o),t},n.copy=s,n.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},n.set=function(t,n,r,a,e,u,o,i,s){return t[0]=n,t[1]=r,t[2]=a,t[3]=e,t[4]=u,t[5]=o,t[6]=i,t[7]=s,t},n.getDual=function(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t},n.setDual=function(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t},n.getTranslation=function(t,n){var r=n[4],a=n[5],e=n[6],u=n[7],o=-n[0],i=-n[1],s=-n[2],c=n[3];return t[0]=2*(r*c+u*o+a*s-e*i),t[1]=2*(a*c+u*i+e*o-r*s),t[2]=2*(e*c+u*s+r*i-a*o),t},n.translate=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=.5*r[0],s=.5*r[1],c=.5*r[2],f=n[4],M=n[5],h=n[6],l=n[7];return t[0]=a,t[1]=e,t[2]=u,t[3]=o,t[4]=o*i+e*c-u*s+f,t[5]=o*s+u*i-a*c+M,t[6]=o*c+a*s-e*i+h,t[7]=-a*i-e*s-u*c+l,t},n.rotateX=function(t,n,r){var a=-n[0],u=-n[1],o=-n[2],i=n[3],s=n[4],c=n[5],f=n[6],M=n[7],h=s*i+M*a+c*o-f*u,l=c*i+M*u+f*a-s*o,v=f*i+M*o+s*u-c*a,d=M*i-s*a-c*u-f*o;return e.rotateX(t,n,r),a=t[0],u=t[1],o=t[2],i=t[3],t[4]=h*i+d*a+l*o-v*u,t[5]=l*i+d*u+v*a-h*o,t[6]=v*i+d*o+h*u-l*a,t[7]=d*i-h*a-l*u-v*o,t},n.rotateY=function(t,n,r){var a=-n[0],u=-n[1],o=-n[2],i=n[3],s=n[4],c=n[5],f=n[6],M=n[7],h=s*i+M*a+c*o-f*u,l=c*i+M*u+f*a-s*o,v=f*i+M*o+s*u-c*a,d=M*i-s*a-c*u-f*o;return e.rotateY(t,n,r),a=t[0],u=t[1],o=t[2],i=t[3],t[4]=h*i+d*a+l*o-v*u,t[5]=l*i+d*u+v*a-h*o,t[6]=v*i+d*o+h*u-l*a,t[7]=d*i-h*a-l*u-v*o,t},n.rotateZ=function(t,n,r){var a=-n[0],u=-n[1],o=-n[2],i=n[3],s=n[4],c=n[5],f=n[6],M=n[7],h=s*i+M*a+c*o-f*u,l=c*i+M*u+f*a-s*o,v=f*i+M*o+s*u-c*a,d=M*i-s*a-c*u-f*o;return e.rotateZ(t,n,r),a=t[0],u=t[1],o=t[2],i=t[3],t[4]=h*i+d*a+l*o-v*u,t[5]=l*i+d*u+v*a-h*o,t[6]=v*i+d*o+h*u-l*a,t[7]=d*i-h*a-l*u-v*o,t},n.rotateByQuatAppend=function(t,n,r){var a=r[0],e=r[1],u=r[2],o=r[3],i=n[0],s=n[1],c=n[2],f=n[3];return t[0]=i*o+f*a+s*u-c*e,t[1]=s*o+f*e+c*a-i*u,t[2]=c*o+f*u+i*e-s*a,t[3]=f*o-i*a-s*e-c*u,i=n[4],s=n[5],c=n[6],f=n[7],t[4]=i*o+f*a+s*u-c*e,t[5]=s*o+f*e+c*a-i*u,t[6]=c*o+f*u+i*e-s*a,t[7]=f*o-i*a-s*e-c*u,t},n.rotateByQuatPrepend=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=r[0],s=r[1],c=r[2],f=r[3];return t[0]=a*f+o*i+e*c-u*s,t[1]=e*f+o*s+u*i-a*c,t[2]=u*f+o*c+a*s-e*i,t[3]=o*f-a*i-e*s-u*c,i=r[4],s=r[5],c=r[6],f=r[7],t[4]=a*f+o*i+e*c-u*s,t[5]=e*f+o*s+u*i-a*c,t[6]=u*f+o*c+a*s-e*i,t[7]=o*f-a*i-e*s-u*c,t},n.rotateAroundAxis=function(t,n,r,e){if(Math.abs(e)<a.EPSILON)return s(t,n);var u=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);e*=.5;var o=Math.sin(e),i=o*r[0]/u,c=o*r[1]/u,f=o*r[2]/u,M=Math.cos(e),h=n[0],l=n[1],v=n[2],d=n[3];t[0]=h*M+d*i+l*f-v*c,t[1]=l*M+d*c+v*i-h*f,t[2]=v*M+d*f+h*c-l*i,t[3]=d*M-h*i-l*c-v*f;var b=n[4],m=n[5],p=n[6],P=n[7];return t[4]=b*M+P*i+m*f-p*c,t[5]=m*M+P*c+p*i-b*f,t[6]=p*M+P*f+b*c-m*i,t[7]=P*M-b*i-m*c-p*f,t},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t},n.multiply=c,n.scale=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t},n.lerp=function(t,n,r,a){var e=1-a;f(n,r)<0&&(a=-a);return t[0]=n[0]*e+r[0]*a,t[1]=n[1]*e+r[1]*a,t[2]=n[2]*e+r[2]*a,t[3]=n[3]*e+r[3]*a,t[4]=n[4]*e+r[4]*a,t[5]=n[5]*e+r[5]*a,t[6]=n[6]*e+r[6]*a,t[7]=n[7]*e+r[7]*a,t},n.invert=function(t,n){var r=h(n);return t[0]=-n[0]/r,t[1]=-n[1]/r,t[2]=-n[2]/r,t[3]=n[3]/r,t[4]=-n[4]/r,t[5]=-n[5]/r,t[6]=-n[6]/r,t[7]=n[7]/r,t},n.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t},n.normalize=function(t,n){var r=h(n);if(r>0){r=Math.sqrt(r);var a=n[0]/r,e=n[1]/r,u=n[2]/r,o=n[3]/r,i=n[4],s=n[5],c=n[6],f=n[7],M=a*i+e*s+u*c+o*f;t[0]=a,t[1]=e,t[2]=u,t[3]=o,t[4]=(i-a*M)/r,t[5]=(s-e*M)/r,t[6]=(c-u*M)/r,t[7]=(f-o*M)/r}return t},n.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]},n.equals=function(t,n){var r=t[0],e=t[1],u=t[2],o=t[3],i=t[4],s=t[5],c=t[6],f=t[7],M=n[0],h=n[1],l=n[2],v=n[3],d=n[4],b=n[5],m=n[6],p=n[7];return Math.abs(r-M)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(e-h)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(u-l)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(l))&&Math.abs(o-v)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-d)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-b)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-m)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(f-p)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))};var a=o(r(0)),e=o(r(3)),u=o(r(4));function o(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}function i(t,n,r){var a=.5*r[0],e=.5*r[1],u=.5*r[2],o=n[0],i=n[1],s=n[2],c=n[3];return t[0]=o,t[1]=i,t[2]=s,t[3]=c,t[4]=a*c+e*s-u*i,t[5]=e*c+u*o-a*s,t[6]=u*c+a*i-e*o,t[7]=-a*o-e*i-u*s,t}function s(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}n.getReal=e.copy;n.setReal=e.copy;function c(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=r[4],s=r[5],c=r[6],f=r[7],M=n[4],h=n[5],l=n[6],v=n[7],d=r[0],b=r[1],m=r[2],p=r[3];return t[0]=a*p+o*d+e*m-u*b,t[1]=e*p+o*b+u*d-a*m,t[2]=u*p+o*m+a*b-e*d,t[3]=o*p-a*d-e*b-u*m,t[4]=a*f+o*i+e*c-u*s+M*p+v*d+h*m-l*b,t[5]=e*f+o*s+u*i-a*c+h*p+v*b+l*d-M*m,t[6]=u*f+o*c+a*s-e*i+l*p+v*m+M*b-h*d,t[7]=o*f-a*i-e*s-u*c+v*p-M*d-h*b-l*m,t}n.mul=c;var f=n.dot=e.dot;var M=n.length=e.length,h=(n.len=M,n.squaredLength=e.squaredLength);n.sqrLen=h},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sub=n.mul=void 0,n.create=function(){var t=new a.ARRAY_TYPE(6);a.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0);return t[0]=1,t[3]=1,t},n.clone=function(t){var n=new a.ARRAY_TYPE(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,n,r,e,u,o){var i=new a.ARRAY_TYPE(6);return i[0]=t,i[1]=n,i[2]=r,i[3]=e,i[4]=u,i[5]=o,i},n.set=function(t,n,r,a,e,u,o){return t[0]=n,t[1]=r,t[2]=a,t[3]=e,t[4]=u,t[5]=o,t},n.invert=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=n[4],i=n[5],s=r*u-a*e;if(!s)return null;return s=1/s,t[0]=u*s,t[1]=-a*s,t[2]=-e*s,t[3]=r*s,t[4]=(e*i-u*o)*s,t[5]=(a*o-r*i)*s,t},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=e,n.rotate=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],s=n[5],c=Math.sin(r),f=Math.cos(r);return t[0]=a*f+u*c,t[1]=e*f+o*c,t[2]=a*-c+u*f,t[3]=e*-c+o*f,t[4]=i,t[5]=s,t},n.scale=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],s=n[5],c=r[0],f=r[1];return t[0]=a*c,t[1]=e*c,t[2]=u*f,t[3]=o*f,t[4]=i,t[5]=s,t},n.translate=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],s=n[5],c=r[0],f=r[1];return t[0]=a,t[1]=e,t[2]=u,t[3]=o,t[4]=a*c+u*f+i,t[5]=e*c+o*f+s,t},n.fromRotation=function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=r,t[2]=-r,t[3]=a,t[4]=0,t[5]=0,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t},n.subtract=u,n.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t},n.multiplyScalarAndAdd=function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t[4]=n[4]+r[4]*a,t[5]=n[5]+r[5]*a,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},n.equals=function(t,n){var r=t[0],e=t[1],u=t[2],o=t[3],i=t[4],s=t[5],c=n[0],f=n[1],M=n[2],h=n[3],l=n[4],v=n[5];return Math.abs(r-c)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(e-f)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(u-M)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(o-h)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-l)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-v)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))};var a=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}(r(0));function e(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=n[4],s=n[5],c=r[0],f=r[1],M=r[2],h=r[3],l=r[4],v=r[5];return t[0]=a*c+u*f,t[1]=e*c+o*f,t[2]=a*M+u*h,t[3]=e*M+o*h,t[4]=a*l+u*v+i,t[5]=e*l+o*v+s,t}function u(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t}n.mul=e,n.sub=u},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sub=n.mul=void 0,n.create=function(){var t=new a.ARRAY_TYPE(4);a.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0);return t[0]=1,t[3]=1,t},n.clone=function(t){var n=new a.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,n,r,e){var u=new a.ARRAY_TYPE(4);return u[0]=t,u[1]=n,u[2]=r,u[3]=e,u},n.set=function(t,n,r,a,e){return t[0]=n,t[1]=r,t[2]=a,t[3]=e,t},n.transpose=function(t,n){if(t===n){var r=n[1];t[1]=n[2],t[2]=r}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},n.invert=function(t,n){var r=n[0],a=n[1],e=n[2],u=n[3],o=r*u-e*a;if(!o)return null;return o=1/o,t[0]=u*o,t[1]=-a*o,t[2]=-e*o,t[3]=r*o,t},n.adjoint=function(t,n){var r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=e,n.rotate=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=Math.sin(r),s=Math.cos(r);return t[0]=a*s+u*i,t[1]=e*s+o*i,t[2]=a*-i+u*s,t[3]=e*-i+o*s,t},n.scale=function(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=r[0],s=r[1];return t[0]=a*i,t[1]=e*i,t[2]=u*s,t[3]=o*s,t},n.fromRotation=function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=r,t[2]=-r,t[3]=a,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,n,r,a){return t[2]=a[2]/a[0],r[0]=a[0],r[1]=a[1],r[3]=a[3]-t[2]*r[1],[t,n,r]},n.add=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},n.subtract=u,n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){var r=t[0],e=t[1],u=t[2],o=t[3],i=n[0],s=n[1],c=n[2],f=n[3];return Math.abs(r-i)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-s)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(u-c)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(c))&&Math.abs(o-f)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))},n.multiplyScalar=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},n.multiplyScalarAndAdd=function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t};var a=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}(r(0));function e(t,n,r){var a=n[0],e=n[1],u=n[2],o=n[3],i=r[0],s=r[1],c=r[2],f=r[3];return t[0]=a*i+u*s,t[1]=e*i+o*s,t[2]=a*c+u*f,t[3]=e*c+o*f,t}function u(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}n.mul=e,n.sub=u},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.vec4=n.vec3=n.vec2=n.quat2=n.quat=n.mat4=n.mat3=n.mat2d=n.mat2=n.glMatrix=void 0;var a=l(r(0)),e=l(r(9)),u=l(r(8)),o=l(r(5)),i=l(r(4)),s=l(r(3)),c=l(r(7)),f=l(r(6)),M=l(r(2)),h=l(r(1));function l(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}n.glMatrix=a,n.mat2=e,n.mat2d=u,n.mat3=o,n.mat4=i,n.quat=s,n.quat2=c,n.vec2=f,n.vec3=M,n.vec4=h}])});
/*
 jquery-qrcode v0.14.0 - https://larsjung.de/jquery-qrcode/ */
'use strict';let G=null;class H{}H.render=function(w,B){G(w,B)};self.QrCreator=H;
(function(w){function B(t,c,a,e){var b={},h=w(a,c);h.u(t);h.J();e=e||0;var r=h.h(),d=h.h()+2*e;b.text=t;b.level=c;b.version=a;b.O=d;b.a=function(b,a){b-=e;a-=e;return 0>b||b>=r||0>a||a>=r?!1:h.a(b,a)};return b}function C(t,c,a,e,b,h,r,d,g,x){function u(b,a,f,c,d,r,g){b?(t.lineTo(a+r,f+g),t.arcTo(a,f,c,d,h)):t.lineTo(a,f)}r?t.moveTo(c+h,a):t.moveTo(c,a);u(d,e,a,e,b,-h,0);u(g,e,b,c,b,0,-h);u(x,c,b,c,a,h,0);u(r,c,a,e,a,0,h)}function z(t,c,a,e,b,h,r,d,g,x){function u(b,a,c,d){t.moveTo(b+c,a);t.lineTo(b,
a);t.lineTo(b,a+d);t.arcTo(b,a,b+c,a,h)}r&&u(c,a,h,h);d&&u(e,a,-h,h);g&&u(e,b,-h,-h);x&&u(c,b,h,-h)}function A(t,c){var a=c.fill;if("string"===typeof a)t.fillStyle=a;else{var e=a.type,b=a.colorStops;a=a.position.map((b)=>Math.round(b*c.size));if("linear-gradient"===e)var h=t.createLinearGradient.apply(t,a);else if("radial-gradient"===e)h=t.createRadialGradient.apply(t,a);else throw Error("Unsupported fill");b.forEach(([b,a])=>{h.addColorStop(b,a)});t.fillStyle=h}}function y(t,c){a:{var a=c.text,e=
c.v,b=c.N,h=c.K,r=c.P;b=Math.max(1,b||1);for(h=Math.min(40,h||40);b<=h;b+=1)try{var d=B(a,e,b,r);break a}catch(J){}d=void 0}if(!d)return null;a=t.getContext("2d");c.background&&(a.fillStyle=c.background,a.fillRect(c.left,c.top,c.size,c.size));e=d.O;h=c.size/e;a.beginPath();for(r=0;r<e;r+=1)for(b=0;b<e;b+=1){var g=a,x=c.left+b*h,u=c.top+r*h,p=r,q=b,f=d.a,k=x+h,m=u+h,D=p-1,E=p+1,n=q-1,l=q+1,y=Math.floor(Math.min(.5,Math.max(0,c.R))*h),v=f(p,q),I=f(D,n),w=f(D,q);D=f(D,l);var F=f(p,l);l=f(E,l);q=f(E,
q);E=f(E,n);p=f(p,n);x=Math.round(x);u=Math.round(u);k=Math.round(k);m=Math.round(m);v?C(g,x,u,k,m,y,!w&&!p,!w&&!F,!q&&!F,!q&&!p):z(g,x,u,k,m,y,w&&p&&I,w&&F&&D,q&&F&&l,q&&p&&E)}A(a,c);a.fill();return t}var v={minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:.5,quiet:0};G=function(t,c){var a={};Object.assign(a,v,t);a.N=a.minVersion;a.K=a.maxVersion;a.v=a.ecLevel;a.left=a.left;a.top=a.top;a.size=a.size;a.fill=a.fill;a.background=a.background;
a.text=a.text;a.R=a.radius;a.P=a.quiet;if(c instanceof HTMLCanvasElement){if(c.width!==a.size||c.height!==a.size)c.width=a.size,c.height=a.size;c.getContext("2d").clearRect(0,0,c.width,c.height);y(c,a)}else t=document.createElement("canvas"),t.width=a.size,t.height=a.size,a=y(t,a),c.appendChild(a)}})(function(){function w(c){var a=C.s(c);return{S:function(){return 4},b:function(){return a.length},write:function(c){for(var b=0;b<a.length;b+=1)c.put(a[b],8)}}}function B(){var c=[],a=0,e={B:function(){return c},
c:function(b){return 1==(c[Math.floor(b/8)]>>>7-b%8&1)},put:function(b,h){for(var a=0;a<h;a+=1)e.m(1==(b>>>h-a-1&1))},f:function(){return a},m:function(b){var h=Math.floor(a/8);c.length<=h&&c.push(0);b&&(c[h]|=128>>>a%8);a+=1}};return e}function C(c,a){function e(b,h){for(var a=-1;7>=a;a+=1)if(!(-1>=b+a||d<=b+a))for(var c=-1;7>=c;c+=1)-1>=h+c||d<=h+c||(r[b+a][h+c]=0<=a&&6>=a&&(0==c||6==c)||0<=c&&6>=c&&(0==a||6==a)||2<=a&&4>=a&&2<=c&&4>=c?!0:!1)}function b(b,a){for(var f=d=4*c+17,k=Array(f),m=0;m<
f;m+=1){k[m]=Array(f);for(var p=0;p<f;p+=1)k[m][p]=null}r=k;e(0,0);e(d-7,0);e(0,d-7);f=y.G(c);for(k=0;k<f.length;k+=1)for(m=0;m<f.length;m+=1){p=f[k];var q=f[m];if(null==r[p][q])for(var n=-2;2>=n;n+=1)for(var l=-2;2>=l;l+=1)r[p+n][q+l]=-2==n||2==n||-2==l||2==l||0==n&&0==l}for(f=8;f<d-8;f+=1)null==r[f][6]&&(r[f][6]=0==f%2);for(f=8;f<d-8;f+=1)null==r[6][f]&&(r[6][f]=0==f%2);f=y.w(h<<3|a);for(k=0;15>k;k+=1)m=!b&&1==(f>>k&1),r[6>k?k:8>k?k+1:d-15+k][8]=m,r[8][8>k?d-k-1:9>k?15-k:14-k]=m;r[d-8][8]=!b;if(7<=
c){f=y.A(c);for(k=0;18>k;k+=1)m=!b&&1==(f>>k&1),r[Math.floor(k/3)][k%3+d-8-3]=m;for(k=0;18>k;k+=1)m=!b&&1==(f>>k&1),r[k%3+d-8-3][Math.floor(k/3)]=m}if(null==g){b=t.I(c,h);f=B();for(k=0;k<x.length;k+=1)m=x[k],f.put(4,4),f.put(m.b(),y.f(4,c)),m.write(f);for(k=m=0;k<b.length;k+=1)m+=b[k].j;if(f.f()>8*m)throw Error("code length overflow. ("+f.f()+">"+8*m+")");for(f.f()+4<=8*m&&f.put(0,4);0!=f.f()%8;)f.m(!1);for(;!(f.f()>=8*m);){f.put(236,8);if(f.f()>=8*m)break;f.put(17,8)}var u=0;m=k=0;p=Array(b.length);
q=Array(b.length);for(n=0;n<b.length;n+=1){var v=b[n].j,w=b[n].o-v;k=Math.max(k,v);m=Math.max(m,w);p[n]=Array(v);for(l=0;l<p[n].length;l+=1)p[n][l]=255&f.B()[l+u];u+=v;l=y.C(w);v=z(p[n],l.b()-1).l(l);q[n]=Array(l.b()-1);for(l=0;l<q[n].length;l+=1)w=l+v.b()-q[n].length,q[n][l]=0<=w?v.c(w):0}for(l=f=0;l<b.length;l+=1)f+=b[l].o;f=Array(f);for(l=u=0;l<k;l+=1)for(n=0;n<b.length;n+=1)l<p[n].length&&(f[u]=p[n][l],u+=1);for(l=0;l<m;l+=1)for(n=0;n<b.length;n+=1)l<q[n].length&&(f[u]=q[n][l],u+=1);g=f}b=g;f=
-1;k=d-1;m=7;p=0;a=y.F(a);for(q=d-1;0<q;q-=2)for(6==q&&--q;;){for(n=0;2>n;n+=1)null==r[k][q-n]&&(l=!1,p<b.length&&(l=1==(b[p]>>>m&1)),a(k,q-n)&&(l=!l),r[k][q-n]=l,--m,-1==m&&(p+=1,m=7));k+=f;if(0>k||d<=k){k-=f;f=-f;break}}}var h=A[a],r=null,d=0,g=null,x=[],u={u:function(b){b=w(b);x.push(b);g=null},a:function(b,a){if(0>b||d<=b||0>a||d<=a)throw Error(b+","+a);return r[b][a]},h:function(){return d},J:function(){for(var a=0,h=0,c=0;8>c;c+=1){b(!0,c);var d=y.D(u);if(0==c||a>d)a=d,h=c}b(!1,h)}};return u}
function z(c,a){if("undefined"==typeof c.length)throw Error(c.length+"/"+a);var e=function(){for(var b=0;b<c.length&&0==c[b];)b+=1;for(var r=Array(c.length-b+a),d=0;d<c.length-b;d+=1)r[d]=c[d+b];return r}(),b={c:function(b){return e[b]},b:function(){return e.length},multiply:function(a){for(var h=Array(b.b()+a.b()-1),c=0;c<b.b();c+=1)for(var g=0;g<a.b();g+=1)h[c+g]^=v.i(v.g(b.c(c))+v.g(a.c(g)));return z(h,0)},l:function(a){if(0>b.b()-a.b())return b;for(var c=v.g(b.c(0))-v.g(a.c(0)),h=Array(b.b()),
g=0;g<b.b();g+=1)h[g]=b.c(g);for(g=0;g<a.b();g+=1)h[g]^=v.i(v.g(a.c(g))+c);return z(h,0).l(a)}};return b}C.s=function(c){for(var a=[],e=0;e<c.length;e++){var b=c.charCodeAt(e);128>b?a.push(b):2048>b?a.push(192|b>>6,128|b&63):55296>b||57344<=b?a.push(224|b>>12,128|b>>6&63,128|b&63):(e++,b=65536+((b&1023)<<10|c.charCodeAt(e)&1023),a.push(240|b>>18,128|b>>12&63,128|b>>6&63,128|b&63))}return a};var A={L:1,M:0,Q:3,H:2},y=function(){function c(b){for(var a=0;0!=b;)a+=1,b>>>=1;return a}var a=[[],[6,18],
[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],
[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],e={w:function(b){for(var a=b<<10;0<=c(a)-c(1335);)a^=1335<<c(a)-c(1335);return(b<<10|a)^21522},A:function(b){for(var a=b<<12;0<=c(a)-c(7973);)a^=7973<<c(a)-c(7973);return b<<12|a},G:function(b){return a[b-1]},F:function(b){switch(b){case 0:return function(b,a){return 0==(b+a)%2};case 1:return function(b){return 0==b%2};case 2:return function(b,a){return 0==a%3};case 3:return function(b,a){return 0==
(b+a)%3};case 4:return function(b,a){return 0==(Math.floor(b/2)+Math.floor(a/3))%2};case 5:return function(b,a){return 0==b*a%2+b*a%3};case 6:return function(b,a){return 0==(b*a%2+b*a%3)%2};case 7:return function(b,a){return 0==(b*a%3+(b+a)%2)%2};default:throw Error("bad maskPattern:"+b);}},C:function(b){for(var a=z([1],0),c=0;c<b;c+=1)a=a.multiply(z([1,v.i(c)],0));return a},f:function(b,a){if(4!=b||1>a||40<a)throw Error("mode: "+b+"; type: "+a);return 10>a?8:16},D:function(b){for(var a=b.h(),c=0,
d=0;d<a;d+=1)for(var g=0;g<a;g+=1){for(var e=0,t=b.a(d,g),p=-1;1>=p;p+=1)if(!(0>d+p||a<=d+p))for(var q=-1;1>=q;q+=1)0>g+q||a<=g+q||(0!=p||0!=q)&&t==b.a(d+p,g+q)&&(e+=1);5<e&&(c+=3+e-5)}for(d=0;d<a-1;d+=1)for(g=0;g<a-1;g+=1)if(e=0,b.a(d,g)&&(e+=1),b.a(d+1,g)&&(e+=1),b.a(d,g+1)&&(e+=1),b.a(d+1,g+1)&&(e+=1),0==e||4==e)c+=3;for(d=0;d<a;d+=1)for(g=0;g<a-6;g+=1)b.a(d,g)&&!b.a(d,g+1)&&b.a(d,g+2)&&b.a(d,g+3)&&b.a(d,g+4)&&!b.a(d,g+5)&&b.a(d,g+6)&&(c+=40);for(g=0;g<a;g+=1)for(d=0;d<a-6;d+=1)b.a(d,g)&&!b.a(d+
1,g)&&b.a(d+2,g)&&b.a(d+3,g)&&b.a(d+4,g)&&!b.a(d+5,g)&&b.a(d+6,g)&&(c+=40);for(g=e=0;g<a;g+=1)for(d=0;d<a;d+=1)b.a(d,g)&&(e+=1);return c+=Math.abs(100*e/a/a-50)/5*10}};return e}(),v=function(){for(var c=Array(256),a=Array(256),e=0;8>e;e+=1)c[e]=1<<e;for(e=8;256>e;e+=1)c[e]=c[e-4]^c[e-5]^c[e-6]^c[e-8];for(e=0;255>e;e+=1)a[c[e]]=e;return{g:function(b){if(1>b)throw Error("glog("+b+")");return a[b]},i:function(b){for(;0>b;)b+=255;for(;256<=b;)b-=255;return c[b]}}}(),t=function(){function c(b,c){switch(c){case A.L:return a[4*
(b-1)];case A.M:return a[4*(b-1)+1];case A.Q:return a[4*(b-1)+2];case A.H:return a[4*(b-1)+3]}}var a=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,
2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,
45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,
151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],
[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],
[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e={I:function(b,a){var e=c(b,a);if("undefined"==
typeof e)throw Error("bad rs block @ typeNumber:"+b+"/errorCorrectLevel:"+a);b=e.length/3;a=[];for(var d=0;d<b;d+=1)for(var g=e[3*d],h=e[3*d+1],t=e[3*d+2],p=0;p<g;p+=1){var q=t,f={};f.o=h;f.j=q;a.push(f)}return a}};return e}();return C}());
//# sourceMappingURL=qr-creator.min.js.map
export const createWorker=()=>new Worker(URL.createObjectURL(new Blob([`class x{constructor(a,b){this.width=b;this.height=a.length/b;this.data=a}static createEmpty(a,b){return new x(new Uint8ClampedArray(a*b),a)}get(a,b){return 0>a||a>=this.width||0>b||b>=this.height?!1:!!this.data[b*this.width+a]}set(a,b,c){this.data[b*this.width+a]=c?1:0}setRegion(a,b,c,d,e){for(let f=b;f<b+d;f++)for(let g=a;g<a+c;g++)this.set(g,f,!!e)}}
class A{constructor(a,b,c){this.width=a;a*=b;if(c&&c.length!==a)throw Error("Wrong buffer size");this.data=c||new Uint8ClampedArray(a)}get(a,b){return this.data[b*this.width+a]}set(a,b,c){this.data[b*this.width+a]=c}}
class ba{constructor(a){this.bitOffset=this.byteOffset=0;this.bytes=a}readBits(a){if(1>a||32<a||a>this.available())throw Error("Cannot read "+a.toString()+" bits");var b=0;if(0<this.bitOffset){b=8-this.bitOffset;var c=a<b?a:b;b-=c;b=(this.bytes[this.byteOffset]&255>>8-c<<b)>>b;a-=c;this.bitOffset+=c;8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(0<a){for(;8<=a;)b=b<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,a-=8;0<a&&(c=8-a,b=b<<a|(this.bytes[this.byteOffset]&255>>c<<c)>>c,
this.bitOffset+=a)}return b}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var B,C=B||(B={});C.Numeric="numeric";C.Alphanumeric="alphanumeric";C.Byte="byte";C.Kanji="kanji";C.ECI="eci";C.StructuredAppend="structuredappend";var D,E=D||(D={});E[E.Terminator=0]="Terminator";E[E.Numeric=1]="Numeric";E[E.Alphanumeric=2]="Alphanumeric";E[E.Byte=4]="Byte";E[E.Kanji=8]="Kanji";E[E.ECI=7]="ECI";E[E.StructuredAppend=3]="StructuredAppend";let F="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".split("");
function ca(a,b){let c=[],d="";b=a.readBits([8,16,16][b]);for(let e=0;e<b;e++){let f=a.readBits(8);c.push(f)}try{d+=decodeURIComponent(c.map(e=>\`%\${("0"+e.toString(16)).substr(-2)}\`).join(""))}catch(e){}return{bytes:c,text:d}}
function da(a,b){a=new ba(a);let c=9>=b?0:26>=b?1:2;for(b={text:"",bytes:[],chunks:[],version:b};4<=a.available();){var d=a.readBits(4);if(d===D.Terminator)return b;if(d===D.ECI)0===a.readBits(1)?b.chunks.push({type:B.ECI,assignmentNumber:a.readBits(7)}):0===a.readBits(1)?b.chunks.push({type:B.ECI,assignmentNumber:a.readBits(14)}):0===a.readBits(1)?b.chunks.push({type:B.ECI,assignmentNumber:a.readBits(21)}):b.chunks.push({type:B.ECI,assignmentNumber:-1});else if(d===D.Numeric){var e=a,f=[];d="";for(var g=
e.readBits([10,12,14][c]);3<=g;){var h=e.readBits(10);if(1E3<=h)throw Error("Invalid numeric value above 999");var k=Math.floor(h/100),m=Math.floor(h/10)%10;h%=10;f.push(48+k,48+m,48+h);d+=k.toString()+m.toString()+h.toString();g-=3}if(2===g){g=e.readBits(7);if(100<=g)throw Error("Invalid numeric value above 99");e=Math.floor(g/10);g%=10;f.push(48+e,48+g);d+=e.toString()+g.toString()}else if(1===g){e=e.readBits(4);if(10<=e)throw Error("Invalid numeric value above 9");f.push(48+e);d+=e.toString()}b.text+=
d;b.bytes.push(...f);b.chunks.push({type:B.Numeric,text:d})}else if(d===D.Alphanumeric){e=a;f=[];d="";for(g=e.readBits([9,11,13][c]);2<=g;)m=e.readBits(11),k=Math.floor(m/45),m%=45,f.push(F[k].charCodeAt(0),F[m].charCodeAt(0)),d+=F[k]+F[m],g-=2;1===g&&(e=e.readBits(6),f.push(F[e].charCodeAt(0)),d+=F[e]);b.text+=d;b.bytes.push(...f);b.chunks.push({type:B.Alphanumeric,text:d})}else if(d===D.Byte)d=ca(a,c),b.text+=d.text,b.bytes.push(...d.bytes),b.chunks.push({type:B.Byte,bytes:d.bytes,text:d.text});
else if(d===D.Kanji){f=a;d=[];e=f.readBits([8,10,12][c]);for(g=0;g<e;g++)k=f.readBits(13),k=Math.floor(k/192)<<8|k%192,k=7936>k?k+33088:k+49472,d.push(k>>8,k&255);f=(new TextDecoder("shift-jis")).decode(Uint8Array.from(d));b.text+=f;b.bytes.push(...d);b.chunks.push({type:B.Kanji,bytes:d,text:f})}else d===D.StructuredAppend&&b.chunks.push({type:B.StructuredAppend,currentSequence:a.readBits(4),totalSequence:a.readBits(4),parity:a.readBits(8)})}if(0===a.available()||0===a.readBits(a.available()))return b}
class G{constructor(a,b){if(0===b.length)throw Error("No coefficients.");this.field=a;let c=b.length;if(1<c&&0===b[0]){let d=1;for(;d<c&&0===b[d];)d++;if(d===c)this.coefficients=a.zero.coefficients;else for(this.coefficients=new Uint8ClampedArray(c-d),a=0;a<this.coefficients.length;a++)this.coefficients[a]=b[d+a]}else this.coefficients=b}degree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}addOrSubtract(a){if(this.isZero())return a;
if(a.isZero())return this;let b=this.coefficients;a=a.coefficients;b.length>a.length&&([b,a]=[a,b]);let c=new Uint8ClampedArray(a.length),d=a.length-b.length;for(var e=0;e<d;e++)c[e]=a[e];for(e=d;e<a.length;e++)c[e]=b[e-d]^a[e];return new G(this.field,c)}multiply(a){if(0===a)return this.field.zero;if(1===a)return this;let b=this.coefficients.length,c=new Uint8ClampedArray(b);for(let d=0;d<b;d++)c[d]=this.field.multiply(this.coefficients[d],a);return new G(this.field,c)}multiplyPoly(a){if(this.isZero()||
a.isZero())return this.field.zero;let b=this.coefficients,c=b.length;a=a.coefficients;let d=a.length,e=new Uint8ClampedArray(c+d-1);for(let f=0;f<c;f++){let g=b[f];for(let h=0;h<d;h++)e[f+h]=H(e[f+h],this.field.multiply(g,a[h]))}return new G(this.field,e)}multiplyByMonomial(a,b){if(0>a)throw Error("Invalid degree less than 0");if(0===b)return this.field.zero;let c=this.coefficients.length;a=new Uint8ClampedArray(c+a);for(let d=0;d<c;d++)a[d]=this.field.multiply(this.coefficients[d],b);return new G(this.field,
a)}evaluateAt(a){let b=0;if(0===a)return this.getCoefficient(0);let c=this.coefficients.length;if(1===a)return this.coefficients.forEach(d=>{b^=d}),b;b=this.coefficients[0];for(let d=1;d<c;d++)b=H(this.field.multiply(a,b),this.coefficients[d]);return b}}function H(a,b){return a^b}
class ea{constructor(a,b,c){this.primitive=a;this.size=b;this.generatorBase=c;this.expTable=Array(this.size);this.logTable=Array(this.size);a=1;for(b=0;b<this.size;b++)this.expTable[b]=a,a*=2,a>=this.size&&(a=(a^this.primitive)&this.size-1);for(a=0;a<this.size-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new G(this,Uint8ClampedArray.from([0]));this.one=new G(this,Uint8ClampedArray.from([1]))}multiply(a,b){return 0===a||0===b?0:this.expTable[(this.logTable[a]+this.logTable[b])%(this.size-1)]}inverse(a){if(0===
a)throw Error("Can't invert 0");return this.expTable[this.size-this.logTable[a]-1]}buildMonomial(a,b){if(0>a)throw Error("Invalid monomial degree less than 0");if(0===b)return this.zero;a=new Uint8ClampedArray(a+1);a[0]=b;return new G(this,a)}log(a){if(0===a)throw Error("Can't take log(0)");return this.logTable[a]}exp(a){return this.expTable[a]}}
function fa(a,b,c,d){b.degree()<c.degree()&&([b,c]=[c,b]);let e=a.zero;for(var f=a.one;c.degree()>=d/2;){var g=b;let h=e;b=c;e=f;if(b.isZero())return null;c=g;f=a.zero;g=b.getCoefficient(b.degree());for(g=a.inverse(g);c.degree()>=b.degree()&&!c.isZero();){let k=c.degree()-b.degree(),m=a.multiply(c.getCoefficient(c.degree()),g);f=f.addOrSubtract(a.buildMonomial(k,m));c=c.addOrSubtract(b.multiplyByMonomial(k,m))}f=f.multiplyPoly(e).addOrSubtract(h);if(c.degree()>=b.degree())return null}d=f.getCoefficient(0);
if(0===d)return null;a=a.inverse(d);return[f.multiply(a),c.multiply(a)]}
function ha(a,b){let c=new Uint8ClampedArray(a.length);c.set(a);a=new ea(285,256,0);var d=new G(a,c),e=new Uint8ClampedArray(b),f=!1;for(var g=0;g<b;g++){var h=d.evaluateAt(a.exp(g+a.generatorBase));e[e.length-1-g]=h;0!==h&&(f=!0)}if(!f)return c;d=new G(a,e);d=fa(a,a.buildMonomial(b,1),d,b);if(null===d)return null;b=d[0];g=b.degree();if(1===g)b=[b.getCoefficient(1)];else{e=Array(g);f=0;for(h=1;h<a.size&&f<g;h++)0===b.evaluateAt(h)&&(e[f]=a.inverse(h),f++);b=f!==g?null:e}if(null==b)return null;e=d[1];
f=b.length;d=Array(f);for(g=0;g<f;g++){h=a.inverse(b[g]);let k=1;for(let m=0;m<f;m++)g!==m&&(k=a.multiply(k,H(1,a.multiply(b[m],h))));d[g]=a.multiply(e.evaluateAt(h),a.inverse(k));0!==a.generatorBase&&(d[g]=a.multiply(d[g],h))}for(e=0;e<b.length;e++){f=c.length-1-a.log(b[e]);if(0>f)return null;c[f]^=d[e]}return c}
let I=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,
dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,
ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},
{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,
34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,
ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},
{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},
{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,
dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,
dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},
{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},
{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},
{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,
ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,
74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,
versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,
dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,
dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},
{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},
{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},
{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},
{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},
{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,
ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,
dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,
dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},
{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},
{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,
ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,
26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},
{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},
{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,
dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},
{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,
dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},
{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,
dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},
{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,
dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],
errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,
versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},
{numBlocks:61,dataCodewordsPerBlock:16}]}]}];function J(a,b){a^=b;for(b=0;a;)b++,a&=a-1;return b}function K(a,b){return b<<1|a}
let ia=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,
dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,
formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,
dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],ja=[a=>0===(a.y+a.x)%2,a=>0===a.y%2,a=>0===a.x%3,a=>0===(a.y+a.x)%3,a=>0===(Math.floor(a.y/2)+Math.floor(a.x/3))%2,a=>0===a.x*a.y%
2+a.x*a.y%3,a=>0===(a.y*a.x%2+a.y*a.x%3)%2,a=>0===((a.y+a.x)%2+a.y*a.x%3)%2];
function ka(a,b,c){c=ja[c.dataMask];let d=a.height;var e=17+4*b.versionNumber;let f=x.createEmpty(e,e);f.setRegion(0,0,9,9,!0);f.setRegion(e-8,0,8,9,!0);f.setRegion(0,e-8,9,8,!0);for(var g of b.alignmentPatternCenters)for(var h of b.alignmentPatternCenters)6===g&&6===h||6===g&&h===e-7||g===e-7&&6===h||f.setRegion(g-2,h-2,5,5,!0);f.setRegion(6,9,1,e-17,!0);f.setRegion(9,6,e-17,1,!0);6<b.versionNumber&&(f.setRegion(e-11,0,3,6,!0),f.setRegion(0,e-11,6,3,!0));b=[];h=g=0;e=!0;for(let k=d-1;0<k;k-=2){6===
k&&k--;for(let m=0;m<d;m++){let l=e?d-1-m:m;for(let n=0;2>n;n++){let q=k-n;if(!f.get(q,l)){h++;let r=a.get(q,l);c({y:l,x:q})&&(r=!r);g=g<<1|r;8===h&&(b.push(g),g=h=0)}}}e=!e}return b}
function la(a){var b=a.height,c=Math.floor((b-17)/4);if(6>=c)return I[c-1];c=0;for(var d=5;0<=d;d--)for(var e=b-9;e>=b-11;e--)c=K(a.get(e,d),c);d=0;for(e=5;0<=e;e--)for(let g=b-9;g>=b-11;g--)d=K(a.get(e,g),d);a=Infinity;let f;for(let g of I){if(g.infoBits===c||g.infoBits===d)return g;b=J(c,g.infoBits);b<a&&(f=g,a=b);b=J(d,g.infoBits);b<a&&(f=g,a=b)}if(3>=a)return f}
function ma(a){let b=0;for(var c=0;8>=c;c++)6!==c&&(b=K(a.get(c,8),b));for(c=7;0<=c;c--)6!==c&&(b=K(a.get(8,c),b));var d=a.height;c=0;for(var e=d-1;e>=d-7;e--)c=K(a.get(8,e),c);for(e=d-8;e<d;e++)c=K(a.get(e,8),c);a=Infinity;d=null;for(let {bits:f,formatInfo:g}of ia){if(f===b||f===c)return g;e=J(b,f);e<a&&(d=g,a=e);b!==c&&(e=J(c,f),e<a&&(d=g,a=e))}return 3>=a?d:null}
function na(a,b,c){let d=b.errorCorrectionLevels[c],e=[],f=0;d.ecBlocks.forEach(h=>{for(let k=0;k<h.numBlocks;k++)e.push({numDataCodewords:h.dataCodewordsPerBlock,codewords:[]}),f+=h.dataCodewordsPerBlock+d.ecCodewordsPerBlock});if(a.length<f)return null;a=a.slice(0,f);b=d.ecBlocks[0].dataCodewordsPerBlock;for(c=0;c<b;c++)for(var g of e)g.codewords.push(a.shift());if(1<d.ecBlocks.length)for(g=d.ecBlocks[0].numBlocks,b=d.ecBlocks[1].numBlocks,c=0;c<b;c++)e[g+c].codewords.push(a.shift());for(;0<a.length;)for(let h of e)h.codewords.push(a.shift());
return e}function L(a){let b=la(a);if(!b)return null;var c=ma(a);if(!c)return null;a=ka(a,b,c);var d=na(a,b,c.errorCorrectionLevel);if(!d)return null;c=d.reduce((e,f)=>e+f.numDataCodewords,0);c=new Uint8ClampedArray(c);a=0;for(let e of d){d=ha(e.codewords,e.codewords.length-e.numDataCodewords);if(!d)return null;for(let f=0;f<e.numDataCodewords;f++)c[a++]=d[f]}try{return da(c,b.versionNumber)}catch(e){return null}}
function M(a,b,c,d){var e=a.x-b.x+c.x-d.x;let f=a.y-b.y+c.y-d.y;if(0===e&&0===f)return{a11:b.x-a.x,a12:b.y-a.y,a13:0,a21:c.x-b.x,a22:c.y-b.y,a23:0,a31:a.x,a32:a.y,a33:1};let g=b.x-c.x;var h=d.x-c.x;let k=b.y-c.y,m=d.y-c.y;c=g*m-h*k;h=(e*m-h*f)/c;e=(g*f-e*k)/c;return{a11:b.x-a.x+h*b.x,a12:b.y-a.y+h*b.y,a13:h,a21:d.x-a.x+e*d.x,a22:d.y-a.y+e*d.y,a23:e,a31:a.x,a32:a.y,a33:1}}
function oa(a,b,c,d){a=M(a,b,c,d);return{a11:a.a22*a.a33-a.a23*a.a32,a12:a.a13*a.a32-a.a12*a.a33,a13:a.a12*a.a23-a.a13*a.a22,a21:a.a23*a.a31-a.a21*a.a33,a22:a.a11*a.a33-a.a13*a.a31,a23:a.a13*a.a21-a.a11*a.a23,a31:a.a21*a.a32-a.a22*a.a31,a32:a.a12*a.a31-a.a11*a.a32,a33:a.a11*a.a22-a.a12*a.a21}}
function pa(a,b){var c=oa({x:3.5,y:3.5},{x:b.dimension-3.5,y:3.5},{x:b.dimension-6.5,y:b.dimension-6.5},{x:3.5,y:b.dimension-3.5}),d=M(b.topLeft,b.topRight,b.alignmentPattern,b.bottomLeft),e=d.a11*c.a11+d.a21*c.a12+d.a31*c.a13,f=d.a12*c.a11+d.a22*c.a12+d.a32*c.a13,g=d.a13*c.a11+d.a23*c.a12+d.a33*c.a13,h=d.a11*c.a21+d.a21*c.a22+d.a31*c.a23,k=d.a12*c.a21+d.a22*c.a22+d.a32*c.a23,m=d.a13*c.a21+d.a23*c.a22+d.a33*c.a23,l=d.a11*c.a31+d.a21*c.a32+d.a31*c.a33,n=d.a12*c.a31+d.a22*c.a32+d.a32*c.a33,q=d.a13*
c.a31+d.a23*c.a32+d.a33*c.a33;c=x.createEmpty(b.dimension,b.dimension);d=(r,u)=>{const p=g*r+m*u+q;return{x:(e*r+h*u+l)/p,y:(f*r+k*u+n)/p}};for(let r=0;r<b.dimension;r++)for(let u=0;u<b.dimension;u++){let p=d(u+.5,r+.5);c.set(u,r,a.get(Math.floor(p.x),Math.floor(p.y)))}return{matrix:c,mappingFunction:d}}let N=(a,b)=>Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));function O(a){return a.reduce((b,c)=>b+c)}
function qa(a,b,c){let d=N(a,b),e=N(b,c),f=N(a,c),g,h,k;e>=d&&e>=f?[g,h,k]=[b,a,c]:f>=e&&f>=d?[g,h,k]=[a,b,c]:[g,h,k]=[a,c,b];0>(k.x-h.x)*(g.y-h.y)-(k.y-h.y)*(g.x-h.x)&&([g,k]=[k,g]);return{bottomLeft:g,topLeft:h,topRight:k}}
function ra(a,b,c,d){d=(O(P(a,c,d,5))/7+O(P(a,b,d,5))/7+O(P(c,a,d,5))/7+O(P(b,a,d,5))/7)/4;if(1>d)throw Error("Invalid module size");b=Math.round(N(a,b)/d);a=Math.round(N(a,c)/d);a=Math.floor((b+a)/2)+7;switch(a%4){case 0:a++;break;case 2:a--}return{dimension:a,moduleSize:d}}
function Q(a,b,c,d){let e=[{x:Math.floor(a.x),y:Math.floor(a.y)}];var f=Math.abs(b.y-a.y)>Math.abs(b.x-a.x);if(f){var g=Math.floor(a.y);var h=Math.floor(a.x);a=Math.floor(b.y);b=Math.floor(b.x)}else g=Math.floor(a.x),h=Math.floor(a.y),a=Math.floor(b.x),b=Math.floor(b.y);let k=Math.abs(a-g),m=Math.abs(b-h),l=Math.floor(-k/2),n=g<a?1:-1,q=h<b?1:-1,r=!0;for(let u=g,p=h;u!==a+n;u+=n){g=f?p:u;h=f?u:p;if(c.get(g,h)!==r&&(r=!r,e.push({x:g,y:h}),e.length===d+1))break;l+=m;if(0<l){if(p===b)break;p+=q;l-=k}}c=
[];for(f=0;f<d;f++)e[f]&&e[f+1]?c.push(N(e[f],e[f+1])):c.push(0);return c}function P(a,b,c,d){let e=b.y-a.y,f=b.x-a.x;b=Q(a,b,c,Math.ceil(d/2));a=Q(a,{x:a.x-f,y:a.y-e},c,Math.ceil(d/2));c=b.shift()+a.shift()-1;return a.concat(c).concat(...b)}function R(a,b){let c=O(a)/O(b),d=0;b.forEach((e,f)=>{d+=Math.pow(a[f]-e*c,2)});return{averageSize:c,error:d}}
function S(a,b,c){try{let d=P(a,{x:-1,y:a.y},c,b.length),e=P(a,{x:a.x,y:-1},c,b.length),f=P(a,{x:Math.max(0,a.x-a.y)-1,y:Math.max(0,a.y-a.x)-1},c,b.length),g=P(a,{x:Math.min(c.width,a.x+a.y)+1,y:Math.min(c.height,a.y+a.x)+1},c,b.length),h=R(d,b),k=R(e,b),m=R(f,b),l=R(g,b),n=(h.averageSize+k.averageSize+m.averageSize+l.averageSize)/4;return Math.sqrt(h.error*h.error+k.error*k.error+m.error*m.error+l.error*l.error)+(Math.pow(h.averageSize-n,2)+Math.pow(k.averageSize-n,2)+Math.pow(m.averageSize-n,2)+
Math.pow(l.averageSize-n,2))/n}catch(d){return Infinity}}function T(a,b){for(var c=Math.round(b.x);a.get(c,Math.round(b.y));)c--;for(var d=Math.round(b.x);a.get(d,Math.round(b.y));)d++;c=(c+d)/2;for(d=Math.round(b.y);a.get(Math.round(c),d);)d--;for(b=Math.round(b.y);a.get(Math.round(c),b);)b++;return{x:c,y:(d+b)/2}}
function sa(a){var b=[],c=[];let d=[];var e=[];for(let p=0;p<=a.height;p++){var f=0,g=!1;let t=[0,0,0,0,0];for(let v=-1;v<=a.width;v++){var h=a.get(v,p);if(h===g)f++;else{t=[t[1],t[2],t[3],t[4],f];f=1;g=h;var k=O(t)/7;k=Math.abs(t[0]-k)<k&&Math.abs(t[1]-k)<k&&Math.abs(t[2]-3*k)<3*k&&Math.abs(t[3]-k)<k&&Math.abs(t[4]-k)<k&&!h;var m=O(t.slice(-3))/3;h=Math.abs(t[2]-m)<m&&Math.abs(t[3]-m)<m&&Math.abs(t[4]-m)<m&&h;if(k){let z=v-t[3]-t[4],y=z-t[2];k={startX:y,endX:z,y:p};m=c.filter(w=>y>=w.bottom.startX&&
y<=w.bottom.endX||z>=w.bottom.startX&&y<=w.bottom.endX||y<=w.bottom.startX&&z>=w.bottom.endX&&1.5>t[2]/(w.bottom.endX-w.bottom.startX)&&.5<t[2]/(w.bottom.endX-w.bottom.startX));0<m.length?m[0].bottom=k:c.push({top:k,bottom:k})}if(h){let z=v-t[4],y=z-t[3];h={startX:y,y:p,endX:z};k=e.filter(w=>y>=w.bottom.startX&&y<=w.bottom.endX||z>=w.bottom.startX&&y<=w.bottom.endX||y<=w.bottom.startX&&z>=w.bottom.endX&&1.5>t[2]/(w.bottom.endX-w.bottom.startX)&&.5<t[2]/(w.bottom.endX-w.bottom.startX));0<k.length?
k[0].bottom=h:e.push({top:h,bottom:h})}}}b.push(...c.filter(v=>v.bottom.y!==p&&2<=v.bottom.y-v.top.y));c=c.filter(v=>v.bottom.y===p);d.push(...e.filter(v=>v.bottom.y!==p));e=e.filter(v=>v.bottom.y===p)}b.push(...c.filter(p=>2<=p.bottom.y-p.top.y));d.push(...e);c=[];for(var l of b)2>l.bottom.y-l.top.y||(b=(l.top.startX+l.top.endX+l.bottom.startX+l.bottom.endX)/4,e=(l.top.y+l.bottom.y+1)/2,a.get(Math.round(b),Math.round(e))&&(f=[l.top.endX-l.top.startX,l.bottom.endX-l.bottom.startX,l.bottom.y-l.top.y+
1],f=O(f)/f.length,g=S({x:Math.round(b),y:Math.round(e)},[1,1,3,1,1],a),c.push({score:g,x:b,y:e,size:f})));if(3>c.length)return null;c.sort((p,t)=>p.score-t.score);l=[];for(b=0;b<Math.min(c.length,5);++b){e=c[b];f=[];for(var n of c)n!==e&&f.push(Object.assign(Object.assign({},n),{score:n.score+Math.pow(n.size-e.size,2)/e.size}));f.sort((p,t)=>p.score-t.score);l.push({points:[e,f[0],f[1]],score:e.score+f[0].score+f[1].score})}l.sort((p,t)=>p.score-t.score);let {topRight:q,topLeft:r,bottomLeft:u}=qa(...l[0].points);
l=U(a,d,q,r,u);n=[];l&&n.push({alignmentPattern:{x:l.alignmentPattern.x,y:l.alignmentPattern.y},bottomLeft:{x:u.x,y:u.y},dimension:l.dimension,topLeft:{x:r.x,y:r.y},topRight:{x:q.x,y:q.y}});l=T(a,q);b=T(a,r);c=T(a,u);(a=U(a,d,l,b,c))&&n.push({alignmentPattern:{x:a.alignmentPattern.x,y:a.alignmentPattern.y},bottomLeft:{x:c.x,y:c.y},topLeft:{x:b.x,y:b.y},topRight:{x:l.x,y:l.y},dimension:a.dimension});return 0===n.length?null:n}
function U(a,b,c,d,e){let f,g;try{({dimension:f,moduleSize:g}=ra(d,c,e,a))}catch(l){return null}var h=c.x-d.x+e.x,k=c.y-d.y+e.y;c=(N(d,e)+N(d,c))/2/g;e=1-3/c;let m={x:d.x+e*(h-d.x),y:d.y+e*(k-d.y)};b=b.map(l=>{const n=(l.top.startX+l.top.endX+l.bottom.startX+l.bottom.endX)/4;l=(l.top.y+l.bottom.y+1)/2;if(a.get(Math.floor(n),Math.floor(l))){var q=S({x:Math.floor(n),y:Math.floor(l)},[1,1,1],a)+N({x:n,y:l},m);return{x:n,y:l,score:q}}}).filter(l=>!!l).sort((l,n)=>l.score-n.score);return{alignmentPattern:15<=
c&&b.length?b[0]:m,dimension:f}}
function V(a){var b=sa(a);if(!b)return null;for(let e of b){b=pa(a,e);var c=b.matrix;if(null==c)c=null;else{var d=L(c);if(d)c=d;else{for(d=0;d<c.width;d++)for(let f=d+1;f<c.height;f++)c.get(d,f)!==c.get(f,d)&&(c.set(d,f,!c.get(d,f)),c.set(f,d,!c.get(f,d)));c=L(c)}}if(c)return{binaryData:c.bytes,data:c.text,chunks:c.chunks,version:c.version,location:{topRightCorner:b.mappingFunction(e.dimension,0),topLeftCorner:b.mappingFunction(0,0),bottomRightCorner:b.mappingFunction(e.dimension,e.dimension),bottomLeftCorner:b.mappingFunction(0,
e.dimension),topRightFinderPattern:e.topRight,topLeftFinderPattern:e.topLeft,bottomLeftFinderPattern:e.bottomLeft,bottomRightAlignmentPattern:e.alignmentPattern},matrix:b.matrix}}return null}let ta={inversionAttempts:"attemptBoth",greyScaleWeights:{red:.2126,green:.7152,blue:.0722,useIntegerApproximation:!1},canOverwriteImage:!0};function W(a,b){Object.keys(b).forEach(c=>{a[c]=b[c]})}
function X(a,b,c,d={}){let e=Object.create(null);W(e,ta);W(e,d);d="onlyInvert"===e.inversionAttempts||"invertFirst"===e.inversionAttempts;var f="attemptBoth"===e.inversionAttempts||d;var g=e.greyScaleWeights,h=e.canOverwriteImage,k=b*c;if(a.length!==4*k)throw Error("Malformed data passed to binarizer.");var m=0;if(h){var l=new Uint8ClampedArray(a.buffer,m,k);m+=k}l=new A(b,c,l);if(g.useIntegerApproximation)for(var n=0;n<c;n++)for(var q=0;q<b;q++){var r=4*(n*b+q);l.set(q,n,g.red*a[r]+g.green*a[r+1]+
g.blue*a[r+2]+128>>8)}else for(n=0;n<c;n++)for(q=0;q<b;q++)r=4*(n*b+q),l.set(q,n,g.red*a[r]+g.green*a[r+1]+g.blue*a[r+2]);g=Math.ceil(b/8);n=Math.ceil(c/8);q=g*n;if(h){var u=new Uint8ClampedArray(a.buffer,m,q);m+=q}u=new A(g,n,u);for(q=0;q<n;q++)for(r=0;r<g;r++){var p=Infinity,t=0;for(var v=0;8>v;v++)for(let w=0;8>w;w++){let aa=l.get(8*r+w,8*q+v);p=Math.min(p,aa);t=Math.max(t,aa)}v=(p+t)/2;v=Math.min(255,1.11*v);24>=t-p&&(v=p/2,0<q&&0<r&&(t=(u.get(r,q-1)+2*u.get(r-1,q)+u.get(r-1,q-1))/4,p<t&&(v=t)));
u.set(r,q,v)}h?(q=new Uint8ClampedArray(a.buffer,m,k),m+=k,q=new x(q,b)):q=x.createEmpty(b,c);r=null;f&&(h?(a=new Uint8ClampedArray(a.buffer,m,k),r=new x(a,b)):r=x.createEmpty(b,c));for(b=0;b<n;b++)for(a=0;a<g;a++){c=g-3;c=2>a?2:a>c?c:a;h=n-3;h=2>b?2:b>h?h:b;k=0;for(m=-2;2>=m;m++)for(p=-2;2>=p;p++)k+=u.get(c+m,h+p);c=k/25;for(h=0;8>h;h++)for(k=0;8>k;k++)m=8*a+h,p=8*b+k,t=l.get(m,p),q.set(m,p,t<=c),f&&r.set(m,p,!(t<=c))}f=f?{binarized:q,inverted:r}:{binarized:q};let {binarized:z,inverted:y}=f;(f=V(d?
y:z))||"attemptBoth"!==e.inversionAttempts&&"invertFirst"!==e.inversionAttempts||(f=V(d?z:y));return f}X.default=X;let Y="dontInvert",Z={red:77,green:150,blue:29,useIntegerApproximation:!0};
self.onmessage=a=>{let b=a.data.id,c=a.data.data;switch(a.data.type){case "decode":(a=X(c.data,c.width,c.height,{inversionAttempts:Y,greyScaleWeights:Z}))?self.postMessage({id:b,type:"qrResult",data:a.data,cornerPoints:[a.location.topLeftCorner,a.location.topRightCorner,a.location.bottomRightCorner,a.location.bottomLeftCorner]}):self.postMessage({id:b,type:"qrResult",data:null});break;case "grayscaleWeights":Z.red=c.red;Z.green=c.green;Z.blue=c.blue;Z.useIntegerApproximation=c.useIntegerApproximation;
break;case "inversionMode":switch(c){case "original":Y="dontInvert";break;case "invert":Y="onlyInvert";break;case "both":Y="attemptBoth";break;default:throw Error("Invalid inversion mode");}break;case "close":self.close()}}
`]),{type:"application/javascript"}))//# sourceMappingURL=qr-scanner-worker.min.js.map
class e{constructor(a,b,c,d,f){this._legacyCanvasSize=e.DEFAULT_CANVAS_SIZE;this._preferredCamera="environment";this._maxScansPerSecond=25;this._lastScanTimestamp=-1;this._destroyed=this._flashOn=this._paused=this._active=!1;this.$video=a;this.$canvas=document.createElement("canvas");c&&"object"===typeof c?this._onDecode=b:(c||d||f?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),
this._legacyOnDecode=b);b="object"===typeof c?c:{};this._onDecodeError=b.onDecodeError||("function"===typeof c?c:this._onDecodeError);this._calculateScanRegion=b.calculateScanRegion||("function"===typeof d?d:this._calculateScanRegion);this._preferredCamera=b.preferredCamera||f||this._preferredCamera;this._legacyCanvasSize="number"===typeof c?c:"number"===typeof d?d:this._legacyCanvasSize;this._maxScansPerSecond=b.maxScansPerSecond||this._maxScansPerSecond;this._onPlay=this._onPlay.bind(this);this._onLoadedMetaData=
this._onLoadedMetaData.bind(this);this._onVisibilityChange=this._onVisibilityChange.bind(this);this._updateOverlay=this._updateOverlay.bind(this);a.disablePictureInPicture=!0;a.playsInline=!0;a.muted=!0;let h=!1;a.hidden&&(a.hidden=!1,h=!0);document.body.contains(a)||(document.body.appendChild(a),h=!0);c=a.parentElement;if(b.highlightScanRegion||b.highlightCodeOutline){d=!!b.overlay;this.$overlay=b.overlay||document.createElement("div");f=this.$overlay.style;f.position="absolute";f.display="none";
f.pointerEvents="none";this.$overlay.classList.add("scan-region-highlight");if(!d&&b.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)",
"scale(1.01)"]},{duration:400,iterations:Infinity,direction:"alternate",easing:"ease-in-out"})}catch(m){}c.insertBefore(this.$overlay,this.$video.nextSibling)}b.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=
this._calculateScanRegion(a);requestAnimationFrame(()=>{let m=window.getComputedStyle(a);"none"===m.display&&(a.style.setProperty("display","block","important"),h=!0);"visible"!==m.visibility&&(a.style.setProperty("visibility","visible","important"),h=!0);h&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),a.style.opacity="0",a.style.width="0",a.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),
delete this.$overlay,delete this.$codeOutlineHighlight);this.$overlay&&this._updateOverlay()});a.addEventListener("play",this._onPlay);a.addEventListener("loadedmetadata",this._onLoadedMetaData);document.addEventListener("visibilitychange",this._onVisibilityChange);window.addEventListener("resize",this._updateOverlay);this._qrEnginePromise=e.createQrEngine()}static set WORKER_PATH(a){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await e.listCameras(!1)).length}catch(a){return!1}}static async listCameras(a=
!1){if(!navigator.mediaDevices)return[];let b=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(d=>"videoinput"===d.kind),c;try{a&&(await b()).every(d=>!d.label)&&(c=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(d){}try{return(await b()).map((d,f)=>({id:d.deviceId,label:d.label||(0===f?"Default Camera":`Camera ${f+1}`)}))}finally{c&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),e._stopVideoStream(c))}}async hasFlash(){let a;
try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;a=this.$video.srcObject}else a=(await this._getCameraStream()).stream;return"torch"in a.getVideoTracks()[0].getSettings()}catch(b){return!1}finally{a&&a!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),e._stopVideoStream(a))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&
!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(a){throw this._flashOn=!1,a;}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData);this.$video.removeEventListener("play",this._onPlay);document.removeEventListener("visibilitychange",
this._onVisibilityChange);window.removeEventListener("resize",this._updateOverlay);this._destroyed=!0;this._flashOn=!1;this.stop();e._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if(!this._active||this._paused)if("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden)if(this._paused=
!1,this.$video.srcObject)await this.$video.play();else try{let {stream:a,facingMode:b}=await this._getCameraStream();!this._active||this._paused?e._stopVideoStream(a):(this._setVideoMirror(b),this.$video.srcObject=a,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(a){if(!this._paused)throw this._active=!1,a;}}stop(){this.pause();this._active=!1}async pause(a=!1){this._paused=!0;if(!this._active)return!0;this.$video.pause();this.$overlay&&(this.$overlay.style.display=
"none");let b=()=>{this.$video.srcObject instanceof MediaStream&&(e._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};if(a)return b(),!0;await new Promise(c=>setTimeout(c,300));if(!this._paused)return!1;b();return!0}async setCamera(a){a!==this._preferredCamera&&(this._preferredCamera=a,await this._restartVideoStream())}static async scanImage(a,b,c,d,f=!1,h=!1){let m,n=!1;b&&("scanRegion"in b||"qrEngine"in b||"canvas"in b||"disallowCanvasResizing"in b||"alsoTryWithoutScanRegion"in
b||"returnDetailedScanResult"in b)?(m=b.scanRegion,c=b.qrEngine,d=b.canvas,f=b.disallowCanvasResizing||!1,h=b.alsoTryWithoutScanRegion||!1,n=!0):b||c||d||f||h?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true.");b=!!c;try{let p,k;[c,p]=await Promise.all([c||e.createQrEngine(),e._loadImage(a)]);
[d,k]=e._drawToCanvas(p,m,d,f);let q;if(c instanceof Worker){let g=c;b||e._postWorkerMessageSync(g,"inversionMode","both");q=await new Promise((l,v)=>{let w,u,r,y=-1;u=t=>{t.data.id===y&&(g.removeEventListener("message",u),g.removeEventListener("error",r),clearTimeout(w),null!==t.data.data?l({data:t.data.data,cornerPoints:e._convertPoints(t.data.cornerPoints,m)}):v(e.NO_QR_CODE_FOUND))};r=t=>{g.removeEventListener("message",u);g.removeEventListener("error",r);clearTimeout(w);v("Scanner error: "+(t?
t.message||t:"Unknown Error"))};g.addEventListener("message",u);g.addEventListener("error",r);w=setTimeout(()=>r("timeout"),1E4);let x=k.getImageData(0,0,d.width,d.height);y=e._postWorkerMessageSync(g,"decode",x,[x.data.buffer])})}else q=await Promise.race([new Promise((g,l)=>window.setTimeout(()=>l("Scanner error: timeout"),1E4)),(async()=>{try{var [g]=await c.detect(d);if(!g)throw e.NO_QR_CODE_FOUND;return{data:g.rawValue,cornerPoints:e._convertPoints(g.cornerPoints,m)}}catch(l){console.log(l);g=l.message||l;
if(/not implemented|service unavailable/.test(g))return e._disableBarcodeDetector=!0,e.scanImage(a,{scanRegion:m,canvas:d,disallowCanvasResizing:f,alsoTryWithoutScanRegion:h});console.log('throw');throw`Scanner error: ${g}`;}})()]);return n?q:q.data}catch(p){if(!m||!h)throw p;let k=await e.scanImage(a,{qrEngine:c,canvas:d,disallowCanvasResizing:f});return n?k:k.data}finally{b||e._postWorkerMessage(c,"close")}}setGrayscaleWeights(a,b,c,d=!0){e._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:a,green:b,
blue:c,useIntegerApproximation:d})}setInversionMode(a){e._postWorkerMessage(this._qrEnginePromise,"inversionMode",a)}static async createQrEngine(a){a&&console.warn("Specifying a worker path is not required and not supported anymore.");
//a=()=>import("./qr-scanner-worker.min.js").then(c=>c.createWorker());
if(!(!e._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return createWorker();let b=navigator.userAgentData;
return b&&b.brands.some(({brand:c})=>/Chromium/i.test(c))&&/mac ?OS/i.test(b.platform)&&await b.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:c,platformVersion:d})=>/arm/i.test(c||"arm")&&13<=parseInt(d||"13")).catch(()=>!0)?a():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video);this._updateOverlay();this.$overlay&&(this.$overlay.style.display="");this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video);
this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(a){let b=Math.round(2/3*Math.min(a.videoWidth,a.videoHeight));return{x:Math.round((a.videoWidth-b)/2),y:Math.round((a.videoHeight-b)/2),width:b,height:b,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var a=this.$video,b=a.videoWidth,c=a.videoHeight,d=a.offsetWidth,f=a.offsetHeight,h=a.offsetLeft,
m=a.offsetTop,n=window.getComputedStyle(a),p=n.objectFit,k=b/c,q=d/f;switch(p){case "none":var g=b;var l=c;break;case "fill":g=d;l=f;break;default:("cover"===p?k>q:k<q)?(l=f,g=l*k):(g=d,l=g/k),"scale-down"===p&&(g=Math.min(g,b),l=Math.min(l,c))}var [v,w]=n.objectPosition.split(" ").map((r,y)=>{const x=parseFloat(r);return r.endsWith("%")?(y?f-l:d-g)*x/100:x});n=this._scanRegion.width||b;q=this._scanRegion.height||c;p=this._scanRegion.x||0;var u=this._scanRegion.y||0;k=this.$overlay.style;k.width=
`${n/b*g}px`;k.height=`${q/c*l}px`;k.top=`${m+w+u/c*l}px`;c=/scaleX\(-1\)/.test(a.style.transform);k.left=`${h+(c?d-v-g:v)+(c?b-p-n:p)/b*g}px`;k.transform=a.style.transform}})}static _convertPoints(a,b){if(!b)return a;let c=b.x||0,d=b.y||0,f=b.width&&b.downScaledWidth?b.width/b.downScaledWidth:1;b=b.height&&b.downScaledHeight?b.height/b.downScaledHeight:1;for(let h of a)h.x=h.x*f+c,h.y=h.y*b+d;return a}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in
this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var a=Date.now()-this._lastScanTimestamp,b=1E3/this._maxScansPerSecond;a<b&&await new Promise(d=>setTimeout(d,b-a));this._lastScanTimestamp=Date.now();try{var c=await e.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(d){if(!this._active)return;this._onDecodeError(d)}!e._disableBarcodeDetector||await this._qrEnginePromise instanceof
Worker||(this._qrEnginePromise=e.createQrEngine());c?(this._onDecode?this._onDecode(c):this._legacyOnDecode&&this._legacyOnDecode(c.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} `+`${this._scanRegion.y||0} `+`${this._scanRegion.width||this.$video.videoWidth} `+`${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",
c.cornerPoints.map(({x:d,y:f})=>`${d},${f}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(a){a!==e.NO_QR_CODE_FOUND&&console.log(a)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let a=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":
"deviceId",b=[{width:{min:1024}},{width:{min:768}},{}],c=b.map(d=>Object.assign({},d,{[a]:{exact:this._preferredCamera}}));for(let d of[...c,...b])try{let f=await navigator.mediaDevices.getUserMedia({video:d,audio:!1}),h=this._getFacingMode(f)||(d.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment");return{stream:f,facingMode:h}}catch(f){}throw"Camera not found.";}async _restartVideoStream(){let a=this._paused;await this.pause(!0)&&!a&&this._active&&await this.start()}static _stopVideoStream(a){for(let b of a.getTracks())b.stop(),
a.removeTrack(b)}_setVideoMirror(a){this.$video.style.transform="scaleX("+("user"===a?-1:1)+")"}_getFacingMode(a){return(a=a.getVideoTracks()[0])?/rear|back|environment/i.test(a.label)?"environment":/front|user|face/i.test(a.label)?"user":null:null}static _drawToCanvas(a,b,c,d=!1){c=c||document.createElement("canvas");let f=b&&b.x?b.x:0,h=b&&b.y?b.y:0,m=b&&b.width?b.width:a.videoWidth||a.width,n=b&&b.height?b.height:a.videoHeight||a.height;d||(d=b&&b.downScaledWidth?b.downScaledWidth:m,b=b&&b.downScaledHeight?
b.downScaledHeight:n,c.width!==d&&(c.width=d),c.height!==b&&(c.height=b));b=c.getContext("2d",{alpha:!1});b.imageSmoothingEnabled=!1;b.drawImage(a,f,h,m,n,0,0,c.width,c.height);return[c,b]}static async _loadImage(a){if(a instanceof Image)return await e._awaitImageLoad(a),a;if(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||a instanceof SVGImageElement||"OffscreenCanvas"in window&&a instanceof OffscreenCanvas||"ImageBitmap"in window&&a instanceof ImageBitmap)return a;if(a instanceof
File||a instanceof Blob||a instanceof URL||"string"===typeof a){let b=new Image;b.src=a instanceof File||a instanceof Blob?URL.createObjectURL(a):a.toString();try{return await e._awaitImageLoad(b),b}finally{(a instanceof File||a instanceof Blob)&&URL.revokeObjectURL(b.src)}}else throw"Unsupported image type.";}static async _awaitImageLoad(a){a.complete&&0!==a.naturalWidth||await new Promise((b,c)=>{let d=f=>{a.removeEventListener("load",d);a.removeEventListener("error",d);f instanceof ErrorEvent?
c("Image load error"):b()};a.addEventListener("load",d);a.addEventListener("error",d)})}static async _postWorkerMessage(a,b,c,d){return e._postWorkerMessageSync(await a,b,c,d)}static _postWorkerMessageSync(a,b,c,d){if(!(a instanceof Worker))return-1;let f=e._workerMessageId++;a.postMessage({id:f,type:b,data:c},d);return f}}e.DEFAULT_CANVAS_SIZE=400;e.NO_QR_CODE_FOUND="No QR code found";e._disableBarcodeDetector=!1;e._workerMessageId=0;export default e
//# sourceMappingURL=qr-scanner.min.js.map
var compareData,df=function(){function N(e,m,l){m=e.createShader(m);e.shaderSource(m,l);e.compileShader(m);return e.getShaderParameter(m,e.COMPILE_STATUS)?m:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(m)),e.deleteShader(m),null)}var h=void 0,u=void 0,f=function(){const e=[[]];e[0][1]=0;e[1]=[];e[1][1]=1;e[2]=[];e[2][1]=2;e[3]=[];e[3][1]=3;e[4]=[];e[4][1]=4;e[5]=[];e[5][1]=5;e[0][2]=6;e[1][2]=7;e[2][2]=8;e[3][2]=9;e[0][3]=10;e[1][3]=11;class m{makeInt(g,d){0>g&&(g=2**(4*d)+
g);return(Array(d+1).join("0")+g.toString(16)).substr(-d)}makeAttr(g,d,b,a){return g.toString(16)+this.makeInt(2+b,2)+this.makeInt(d,1)+this.makeInt(b,1)+this.makeInt(a,b)}makeAttrs(g,d,b,a){for(var k=~~(253/b),v=a.length,x=0,r="";0<v;){var C=v>k?k:v;v-=C;r+=g.toString(16)+this.makeInt(2+b*C,2)+this.makeInt(d,1)+this.makeInt(b,1);for(var A=0;A<C;A++)r+=this.makeInt(a[x],b),x++}return r}makeColorAttrs(g){for(var d=0,b=0,a="",k="";b<g.length;){var v=Math.min(Math.max(0,g[b].length),15);254<d+1+3*v&&
(a+=(4).toString(16)+this.makeInt(1+k.length,2)+this.makeInt(0,1)+k,k="",d=0);d+=1+3*v;k+=v.toString(16);for(var x=0;x<v;x++){var r=g[b][x];r=[(r/16777216&255)/255,(r/65536&255)/255,(r/256&255)/255,(r/1&255)/255];k+=Math.min(Math.max(0,~~(15*r[0])),15).toString(16)+Math.min(Math.max(0,~~(15*r[1])),15).toString(16)+Math.min(Math.max(0,~~(15*r[2])),15).toString(16)}b++}0<k.length&&(a+=(4).toString(16)+this.makeInt(1+k.length,2)+this.makeInt(0,1)+k);return a}makeGlyphSet(g,d,b){return(b?df.ff.CHUNK_COLORGLYPHSET:
df.ff.CHUNK_GLYPHSET).toString(16)+"0c"+this.makeInt(g,6)+this.makeInt(d,6)}makeGlyphAttr(g,d,b){return this.makeAttr(df.ff.CHUNK_GLYPHATTR,g,d,b)}makeGlyphAttrs(g,d,b){return this.makeAttrs(df.ff.CHUNK_GLYPHATTR,g,d,b)}makeEOF(){return df.ff.CHUNK_EOF.toString(16)+"00"}}class l{constructor(g){this.reset(g)}reset(g){this.data=g;this.i=0}skip(g){this.i+=g}getInt(g){var d=g+this.i<=this.data.length?parseInt(this.data.substr(this.i,g),16):parseInt((this.data+Array(this.i+g+1).join("0")).substr(this.i,
g),16);this.i+=g;return d}getChunkHeader(){var g=this.getInt(1),d=this.getInt(2);return{type:g,length:d}}getGlyphSet(){var g=this.getInt(6),d=this.getInt(6);return{first:g,last:d}}getAttrs(g){for(var d=this.getInt(1),b=this.getInt(1),a=[],k=0;k<(g-1-1)/b;k++)a[a.length]=this.getInt(b);return{attr:d,size:b,values:a}}getColorAttrs(g){var d=this.getInt(1),b=[];for(--g;0<g;){var a=this.getInt(1);--g;for(var k,v,x,r=[],C=0;C<a;C++){0<g&&(k=this.getInt(1));--g;0<g&&(v=this.getInt(1));--g;0<g&&(x=this.getInt(1));
--g;var A=[k/15,v/15,x/15,1];r[r.length]=16777216*~~(255*A[0])+65536*~~(255*A[1])+256*~~(255*A[2])+~~(255*A[3])}b[b.length]=r}return{attr:d,values:b}}applySign(g,d){for(var b=0;b<g.length;b++)g[b]>=2**(4*d-1)&&(g[b]-=2**(4*d))}}return{CHUNK_EOF:0,CHUNK_GLYPHSET:1,CHUNK_GLYPHATTR:2,CHUNK_COLORGLYPHSET:3,CHUNK_COLORGLYPHATTR:4,ZD_ENCODE:e,ZD_DECODE:[[0,1],[1,1],[2,1],[3,1],[4,1],[5,1],[0,2],[1,2],[2,2],[3,2],[0,3],[1,3]],ATTR_GLYPH_WIDTH:0,ATTR_GLYPH_HEIGHT:1,ATTR_GLYPH_X1:2,ATTR_GLYPH_Y1:3,ATTR_GLYPH_X2:4,
ATTR_GLYPH_Y2:5,ATTR_GLYPH_IMGX:6,ATTR_GLYPH_IMGY:7,ATTR_GLYPH_IMGZD:8,ATTR_COLORGLYPH_COLORS:0,Packer:m,Parser:l}}();class O{constructor(){}loadFromURL(e,m,l){var g=new Image;g.associatedGlyphSet=this;g.associatedCallback=m;g.associatedName=e;g.onload=this.imgCallback;g.src=l}loadFromImage(e,m,l){this.loadFromObject(e,m,l)}loadFromCanvas(e,m,l){this.loadFromObject(e,m,l)}initGlyphs(){this.glyphCodes=[];this.glyphWidths=[];this.glyphHeights=[];this.glyphX1=[];this.glyphY1=[];this.glyphX2=[];this.glyphY2=
[];this.glyphSourceX=[];this.glyphSourceY=[];this.glyphSourceZD=[];this.glyphHasColors=[];this.glyphColors=[]}isReady(){return this.ready?!0:!1}imgCallback(e){e=e.target;var m=e.associatedGlyphSet;m.loadFromObject.call(m,e.associatedName,e.associatedCallback,e)}loadFromObject(e,m,l){this.ready=!1;this.finalCallback=m;this.name=e;this.initGlyphs();this.pixCoords=[];this.texCoords=[];this.init2(l);0==this.glyphCodes.length&&(this.init1(l),console.log("Loaded "+this.glyphCodes.length+" glyphs in old format."))}init1(e){function m(p){function q(){for(;n<
y.length&&(0==n%4&&0<z||1==n%4&&(1<z||2>B+z)||2==n%4&&3>B+z||3==n%4);)n+=1;var H=y[n]&15;for(n+=1;n<y.length&&(0==n%4&&0<z||1==n%4&&(1<z||2>B+z)||2==n%4&&3>B+z||3==n%4);)n+=1;return H}var n=0,t=5>=p.zd?p.zd:9>=p.zd?p.zd-6:p.zd-10,B=5>=p.zd?1:9>=p.zd?2:3,z=~~(t/2),y=g.getImageData(p.x,p.y+(1==t%2?l.height:0),p.w,p.h).data;q();t=q();var E=16*q()+q();0==E&&(E=256);var F=16*q()+q();0==F&&(F=256);for(var I=4096*q()+256*q()+16*q()+q(),J=4096*q()+256*q()+16*q()+q(),G="";n<y.length;)G+=q().toString(16);p.x=
I;p.y=J;p.w=E;p.h=F;p.zd=t;return G}var l=e;e=document.createElement("canvas");e.width=l.width;e.height=2*l.height;var g=e.getContext("2d");g.drawImage(l,0,0);g.drawImage(l,0,l.height);for(var d=g.getImageData(0,0,l.width,l.height),b=d.data,a=0;a<b.length;a+=4)b[a+0]=(b[a+0]&240)+~~((b[a+0]&240)/16),b[a+1]=(b[a+1]&240)+~~((b[a+1]&240)/16),b[a+2]=(b[a+2]&240)+~~((b[a+2]&240)/16);g.putImageData(d,0,0);d=g.getImageData(0,l.height,l.width,l.height);b=d.data;for(a=0;a<b.length;a+=4)b[a+0]=(b[a+0]&15)+
16*(b[a+0]&15),b[a+1]=(b[a+1]&15)+16*(b[a+1]&15),b[a+2]=(b[a+2]&15)+16*(b[a+2]&15);g.putImageData(d,0,l.height);a=[];a.x=l.width-2;a.y=1;a.w=1;a.h=5;a.zd=10;d=m(a,!0);do d+=m(a);while(a.x);d=new f.Parser(d);b=d.getChunkHeader();for(var k=0,v=0,x=0,r=0,C=0,A=0,K=0,L=0,M=0,w=0;b.type!=f.CHUNK_EOF;){if(b.type==f.CHUNK_COLORATTR&&0==this.colorType.length)for(a=0;a<this.glyphColorIndices.length;a++)for(;this.glyphColorIndices[a]>=this.colorType.length;)this.colorType[this.colorType.length]=0;if(b.type==
f.CHUNK_SOLIDATTR&&0==this.solidRGB.length)for(a=0;a<this.colorType.length;a++)0==this.colorType[a]&&(this.solidRGB[this.solidRGB.length]=0,this.solidMode[this.solidMode.length]=0);switch(b.type){case f.CHUNK_GLYPHSET:case f.CHUNK_COLORGLYPHSET:if(12==b.length){var D=d.getGlyphSet();for(a=D.first;a<=D.last;a++){var c=this.glyphCodes.length;this.glyphCodes[c]=a;this.glyphWidths[c]=8;this.glyphHeights[c]=8;this.glyphX1[c]=0;this.glyphY1[c]=0;this.glyphX2[c]=8;this.glyphY2[c]=0;this.glyphHasColors[c]=
b.type==f.CHUNK_COLORGLYPHSET?1:0;this.glyphColors[c]=[]}}else console.log("chuck length: ",b.length),console.log("error: bad data 1:",d.data.substr(d.i,10)),d.skip(b.length);break;case f.CHUNK_GLYPHATTR:D=d.i;c=d.getAttrs(b.length);if(1==c.values.length)switch((b.type<<16)+c.attr){case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_WIDTH:for(a=0;a<this.glyphCodes.length;a++)this.glyphWidths[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_HEIGHT:for(a=0;a<this.glyphCodes.length;a++)this.glyphHeights[a]=
c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_X1:d.applySign(c.values,c.size);for(a=0;a<this.glyphCodes.length;a++)this.glyphX1[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_Y1:d.applySign(c.values,c.size);for(a=0;a<this.glyphCodes.length;a++)this.glyphY1[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_X2:d.applySign(c.values,c.size);for(a=0;a<this.glyphCodes.length;a++)this.glyphX2[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_Y2:d.applySign(c.values,
c.size);for(a=0;a<this.glyphCodes.length;a++)this.glyphY2[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_IMGX:for(a=0;a<this.glyphCodes.length;a++)this.glyphSourceX[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_IMGY:for(a=0;a<this.glyphCodes.length;a++)this.glyphSourceY[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_IMGZD:for(a=0;a<this.glyphCodes.length;a++)this.glyphSourceZD[a]=c.values[0];break;default:console.log("chuck length: ",b.length),console.log("ignoring unknown attribute: ",
b.type,c.attr),d.skip(b.length)}else switch((b.type<<16)+c.attr){case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_WIDTH:for(a=0;a<c.values.length;a++)this.glyphWidths[k++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_HEIGHT:for(a=0;a<c.values.length;a++)this.glyphHeights[v++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_X1:d.applySign(c.values,c.size);for(a=0;a<c.values.length;a++)this.glyphX1[x++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_Y1:d.applySign(c.values,
c.size);for(a=0;a<c.values.length;a++)this.glyphY1[r++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_X2:d.applySign(c.values,c.size);for(a=0;a<c.values.length;a++)this.glyphX2[C++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_Y2:d.applySign(c.values,c.size);for(a=0;a<c.values.length;a++)this.glyphY2[A++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_IMGX:for(a=0;a<c.values.length;a++)this.glyphSourceX[K++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+
f.ATTR_GLYPH_IMGY:for(a=0;a<c.values.length;a++)this.glyphSourceY[L++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_IMGZD:for(a=0;a<c.values.length;a++)this.glyphSourceZD[M++]=c.values[a];break;default:console.log("ignoring unknown attribute: ",b.type,c.attr),d.skip(b.length)}d.i-D!=b.length&&console.log("error: bad data 2");break;case f.CHUNK_COLORGLYPHATTR:c=d.getColorAttrs(b.length);switch(c.attr){case f.ATTR_COLORGLYPH_COLORS:for(a=0;a<c.values.length;a++){for(;!this.glyphHasColors[w]&&
w<this.glyphCodes.length;)w++;w<this.glyphCodes.length&&(this.glyphColors[w++]=c.values[a])}break;default:console.log("ignoring unknown color attribute: ",b.type,attr),d.skip(b.length-1)}break;default:console.log("ignoring unknown chunk type: ",b),d.skip(b.length)}b=d.getChunkHeader()}for(a=0;a<this.glyphCodes.length;a++)1==this.glyphSourceZD[a]%2&&(this.glyphSourceY[a]+=l.height);a=l.width;d=l.height;for(b=0;b<this.glyphCodes.length;b++)k=b,this.pixCoords[8*k]=0,this.pixCoords[8*k+1]=this.glyphHeights[b],
this.pixCoords[8*k+2]=0,this.pixCoords[8*k+3]=0,this.pixCoords[8*k+4]=this.glyphWidths[b],this.pixCoords[8*k+5]=0,this.pixCoords[8*k+6]=this.glyphWidths[b],this.pixCoords[8*k+7]=this.glyphHeights[b],this.texCoords[8*k]=this.glyphSourceX[k]/a,this.texCoords[8*k+1]=(this.glyphSourceY[k]+this.glyphHeights[b])/(2*d),this.texCoords[8*k+2]=this.glyphSourceX[k]/a,this.texCoords[8*k+3]=this.glyphSourceY[k]/(2*d),this.texCoords[8*k+4]=(this.glyphSourceX[k]+this.glyphWidths[b])/a,this.texCoords[8*k+5]=this.glyphSourceY[k]/
(2*d),this.texCoords[8*k+6]=(this.glyphSourceX[k]+this.glyphWidths[b])/a,this.texCoords[8*k+7]=(this.glyphSourceY[k]+this.glyphHeights[b])/(2*d);d=g.getImageData(0,0,e.width,e.height);b=d.data;for(a=0;a<~~(b.length/2);a+=4)b[a+0]=16*(b[a+0]&15),b[a+1]=16*(b[a+1]&15),b[a+2]=16*(b[a+2]&15),b[a+0]|=~~(b[a+0]/16),b[a+1]|=~~(b[a+1]/16),b[a+2]|=~~(b[a+2]/16);for(a=~~(b.length/2);a<b.length;a+=4)b[a+0]=16*~~(b[a+0]/16),b[a+1]=16*~~(b[a+1]/16),b[a+2]=16*~~(b[a+2]/16),b[a+0]|=~~(b[a+0]/16),b[a+1]|=~~(b[a+
1]/16),b[a+2]|=~~(b[a+2]/16);g.putImageData(d,0,0);this.data=e;e=g=d=b=null;this.ready=!0;this.finalCallback&&this.finalCallback.call(null)}init2(e){function m(p,q=!1){function n(){for(;t<E.length&&(0==t%4&&0<y||1==t%4&&(1<y||2>z+y)||2==t%4&&3>z+y||3==t%4);)t+=1;var H=E[t]&15;for(t+=1;t<E.length&&(0==t%4&&0<y||1==t%4&&(1<y||2>z+y)||2==t%4&&3>z+y||3==t%4);)t+=1;return H}var t=0,B=5>=p.zd?p.zd:9>=p.zd?p.zd-6:p.zd-10,z=5>=p.zd?1:9>=p.zd?2:3,y=~~(B/2),E=g.getImageData(p.x,p.y+(1==B%2?l.height:0),p.w,
p.h).data;q&&(q=""+n().toString(16),q+=n().toString(16),q+=n().toString(16),q+=n().toString(16),p.ver=q);n();q=n();B=16*n()+n();0==B&&(B=256);var F=16*n()+n();0==F&&(F=256);for(var I=4096*n()+256*n()+16*n()+n(),J=4096*n()+256*n()+16*n()+n(),G="";t<E.length;)G+=n().toString(16);p.x=I;p.y=J;p.w=B;p.h=F;p.zd=q;return G}var l=e;e=document.createElement("canvas");e.width=l.width;e.height=2*l.height;var g=e.getContext("2d");g.drawImage(l,0,0);g.drawImage(l,0,l.height);for(var d=g.getImageData(0,l.height,
l.width,l.height),b=d.data,a=0;a<b.length;a+=4)b[a+0]=(b[a+0]&240)+~~((b[a+0]&240)/16),b[a+1]=(b[a+1]&240)+~~((b[a+1]&240)/16),b[a+2]=(b[a+2]&240)+~~((b[a+2]&240)/16);g.putImageData(d,0,l.height);d=g.getImageData(0,0,l.width,l.height);b=d.data;for(a=0;a<b.length;a+=4)b[a+0]=(b[a+0]&15)+16*(b[a+0]&15),b[a+1]=(b[a+1]&15)+16*(b[a+1]&15),b[a+2]=(b[a+2]&15)+16*(b[a+2]&15);g.putImageData(d,0,0);a=[];a.x=l.width-2;a.y=1;a.w=1;a.h=6;a.zd=10;d=m(a,!0);if("fed1"!=a.ver)console.log("Unrecognized file format.");
else{do d+=m(a);while(a.x);d=new f.Parser(d);b=d.getChunkHeader();for(var k=0,v=0,x=0,r=0,C=0,A=0,K=0,L=0,M=0,w=0;b.type!=f.CHUNK_EOF;){if(b.type==f.CHUNK_COLORATTR&&0==this.colorType.length)for(a=0;a<this.glyphColorIndices.length;a++)for(;this.glyphColorIndices[a]>=this.colorType.length;)this.colorType[this.colorType.length]=0;if(b.type==f.CHUNK_SOLIDATTR&&0==this.solidRGB.length)for(a=0;a<this.colorType.length;a++)0==this.colorType[a]&&(this.solidRGB[this.solidRGB.length]=0,this.solidMode[this.solidMode.length]=
0);switch(b.type){case f.CHUNK_GLYPHSET:case f.CHUNK_COLORGLYPHSET:if(12==b.length){var D=d.getGlyphSet();for(a=D.first;a<=D.last;a++){var c=this.glyphCodes.length;this.glyphCodes[c]=a;this.glyphWidths[c]=8;this.glyphHeights[c]=8;this.glyphX1[c]=0;this.glyphY1[c]=0;this.glyphX2[c]=8;this.glyphY2[c]=0;this.glyphHasColors[c]=b.type==f.CHUNK_COLORGLYPHSET?1:0;this.glyphColors[c]=[]}}else{console.log("chuck length: ",b.length);console.log("error: bad data 1:",d.data.substr(d.i,10));return}break;case f.CHUNK_GLYPHATTR:D=
d.i;c=d.getAttrs(b.length);if(1==c.values.length)switch((b.type<<16)+c.attr){case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_WIDTH:for(a=0;a<this.glyphCodes.length;a++)this.glyphWidths[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_HEIGHT:for(a=0;a<this.glyphCodes.length;a++)this.glyphHeights[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_X1:d.applySign(c.values,c.size);for(a=0;a<this.glyphCodes.length;a++)this.glyphX1[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_Y1:d.applySign(c.values,
c.size);for(a=0;a<this.glyphCodes.length;a++)this.glyphY1[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_X2:d.applySign(c.values,c.size);for(a=0;a<this.glyphCodes.length;a++)this.glyphX2[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_Y2:d.applySign(c.values,c.size);for(a=0;a<this.glyphCodes.length;a++)this.glyphY2[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_IMGX:for(a=0;a<this.glyphCodes.length;a++)this.glyphSourceX[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<
16)+f.ATTR_GLYPH_IMGY:for(a=0;a<this.glyphCodes.length;a++)this.glyphSourceY[a]=c.values[0];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_IMGZD:for(a=0;a<this.glyphCodes.length;a++)this.glyphSourceZD[a]=c.values[0];break;default:console.log("ignoring unknown attribute: ",b.type,c.attr),d.skip(b.length)}else switch((b.type<<16)+c.attr){case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_WIDTH:for(a=0;a<c.values.length;a++)this.glyphWidths[k++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_HEIGHT:for(a=
0;a<c.values.length;a++)this.glyphHeights[v++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_X1:d.applySign(c.values,c.size);for(a=0;a<c.values.length;a++)this.glyphX1[x++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_Y1:d.applySign(c.values,c.size);for(a=0;a<c.values.length;a++)this.glyphY1[r++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_X2:d.applySign(c.values,c.size);for(a=0;a<c.values.length;a++)this.glyphX2[C++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<
16)+f.ATTR_GLYPH_Y2:d.applySign(c.values,c.size);for(a=0;a<c.values.length;a++)this.glyphY2[A++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_IMGX:for(a=0;a<c.values.length;a++)this.glyphSourceX[K++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_IMGY:for(a=0;a<c.values.length;a++)this.glyphSourceY[L++]=c.values[a];break;case (f.CHUNK_GLYPHATTR<<16)+f.ATTR_GLYPH_IMGZD:for(a=0;a<c.values.length;a++)this.glyphSourceZD[M++]=c.values[a];break;default:console.log("ignoring unknown attribute: ",
b.type,c.attr),d.skip(b.length)}d.i-D!=b.length&&console.log("error: bad data 2");break;case f.CHUNK_COLORGLYPHATTR:c=d.getColorAttrs(b.length);switch(c.attr){case f.ATTR_COLORGLYPH_COLORS:for(a=0;a<c.values.length;a++){for(;!this.glyphHasColors[w]&&w<this.glyphCodes.length;)this.glyphColors[w++]=null;w<this.glyphCodes.length&&(this.glyphColors[w++]=c.values[a])}for(;!this.glyphHasColors[w]&&w<this.glyphCodes.length;)this.glyphColors[w++]=null;break;default:console.log("ignoring unknown color attribute: ",
b.type,attr),d.skip(b.length-1)}break;default:console.log("ignoring unknown chunk type: ",b),d.skip(b.length)}b=d.getChunkHeader()}for(a=0;a<this.glyphCodes.length;a++)1==this.glyphSourceZD[a]%2&&(this.glyphSourceY[a]+=l.height);a=l.width;d=l.height;for(b=0;b<this.glyphCodes.length;b++)k=b,this.pixCoords[8*k]=0,this.pixCoords[8*k+1]=this.glyphHeights[b],this.pixCoords[8*k+2]=0,this.pixCoords[8*k+3]=0,this.pixCoords[8*k+4]=this.glyphWidths[b],this.pixCoords[8*k+5]=0,this.pixCoords[8*k+6]=this.glyphWidths[b],
this.pixCoords[8*k+7]=this.glyphHeights[b],this.texCoords[8*k]=this.glyphSourceX[k]/a,this.texCoords[8*k+1]=(this.glyphSourceY[k]+this.glyphHeights[b])/(2*d),this.texCoords[8*k+2]=this.glyphSourceX[k]/a,this.texCoords[8*k+3]=this.glyphSourceY[k]/(2*d),this.texCoords[8*k+4]=(this.glyphSourceX[k]+this.glyphWidths[b])/a,this.texCoords[8*k+5]=this.glyphSourceY[k]/(2*d),this.texCoords[8*k+6]=(this.glyphSourceX[k]+this.glyphWidths[b])/a,this.texCoords[8*k+7]=(this.glyphSourceY[k]+this.glyphHeights[b])/
(2*d);d=g.getImageData(0,0,e.width,e.height);b=d.data;for(a=0;a<~~(b.length/2);a+=4)b[a+0]=16*(b[a+0]&15),b[a+1]=16*(b[a+1]&15),b[a+2]=16*(b[a+2]&15),b[a+0]|=~~(b[a+0]/16),b[a+1]|=~~(b[a+1]/16),b[a+2]|=~~(b[a+2]/16);for(a=~~(b.length/2);a<b.length;a+=4)b[a+0]=16*~~(b[a+0]/16),b[a+1]=16*~~(b[a+1]/16),b[a+2]=16*~~(b[a+2]/16),b[a+0]|=~~(b[a+0]/16),b[a+1]|=~~(b[a+1]/16),b[a+2]|=~~(b[a+2]/16);g.putImageData(d,0,0);this.data=e;e=g=d=b=null;this.ready=!0;this.finalCallback&&this.finalCallback.call(null)}}init(){if(!u){{var e=
h;const m=N(e,e.VERTEX_SHADER,"\n    attribute vec2 aVertex;\n    attribute vec2 aUV;\n    varying vec2 vTex;\n    uniform vec2 pos;\n    uniform mat4 uProjectionMatrix;\n    uniform mat4 uModelViewMatrix;\n    void main(void) {\n      gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aVertex + pos, 0.0, 1.0);\n      vTex = aUV;\n    }\n    "),l=N(e,e.FRAGMENT_SHADER,"\n    precision highp float;\n    varying vec2 vTex;\n    uniform sampler2D sampler0;\n    uniform lowp vec4 color1;\n    uniform lowp vec4 color2;\n    uniform lowp vec4 color3;\n    uniform int layer;\n    uniform int depth;\n    uniform float scaleFactor;\n    void main(void){\n      float v1=0.0, v2=0.0, v3=0.0;\n      const int ss = 4;//sampleBase;\n      float tx =1.0/64.0;\n      float ty =1.0/128.0;\n      float o = float(ss-1)/2.0;\n      int i=0, j=0;\n      for(int i=0; i<ss; i++) {\n        for(int j=0; j<ss; j++) {\n          vec4 c = texture2D(sampler0, vTex+vec2((float(i)-o)/float(ss)*tx/scaleFactor,(float(j)-o)/float(ss)*ty/scaleFactor));//texture(tex, texCoordOut+vec2((i-o)/float(ss)*tx/scaleFactor,(j-o)/float(ss)*ty/scaleFactor));\n          if (layer == 0) {\n            v1 += c.r>=.5 ? 1.0 : 0.0;\n            if (depth >= 2) v2 += c.g>=.5 ? 1.0 : 0.0;\n            if (depth >= 3) v3 += c.b>=.5 ? 1.0 : 0.0;\n          } else if (layer == 1) {\n            v1 += c.g>=.5 ? 1.0 : 0.0;\n            if (depth >= 2) v2 += c.b>=.5 ? 1.0 : 0.0;\n          } else if (layer == 2) {\n            v1 += c.b>=.5 ? 1.0 : 0.0;\n          }\n        }\n      }\n      //vec4 o1 = vec4(color1.rgb * (v1/float(ss*ss)), v1/float(ss*ss));\n      //vec4 o2 = vec4(color2.rgb * (v2/float(ss*ss)), v2/float(ss*ss));\n      //vec4 o3 = vec4(color3.rgb * (v3/float(ss*ss)), v3/float(ss*ss));\n      vec4 o1 = vec4(color1.rgb, v1/float(ss*ss)*color1.a);\n      vec4 o2 = vec4(color2.rgb, v2/float(ss*ss)*color2.a);\n      vec4 o3 = vec4(color3.rgb, v3/float(ss*ss)*color3.a);\n      o1.rgb += o2.rgb * (1.0 - o1.a); o1.a += o2.a * (1.0 - o1.a);\n      o1.rgb += o3.rgb * (1.0 - o1.a); o1.a += o3.a * (1.0 - o1.a);\n      gl_FragColor = o1;\n    }\n    "),
g=e.createProgram();e.attachShader(g,m);e.attachShader(g,l);e.linkProgram(g);e.getProgramParameter(g,e.LINK_STATUS)?u=g:(alert("Unable to initialize the shader program: "+e.getProgramInfoLog(g)),u=null)}}h.useProgram(u);this.tex=h.createTexture();h.bindTexture(h.TEXTURE_2D,this.tex);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,this.data);this.vertexBuff=h.createBuffer();
h.bindBuffer(h.ARRAY_BUFFER,this.vertexBuff);h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.pixCoords),h.STATIC_DRAW);this.texBuff=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,this.texBuff);h.bufferData(h.ARRAY_BUFFER,new Float32Array(this.texCoords),h.STATIC_DRAW);this.vloc=h.getAttribLocation(u,"aVertex");this.tloc=h.getAttribLocation(u,"aUV");this.scaleFactorLoc=h.getUniformLocation(u,"scaleFactor");this.layerLoc=h.getUniformLocation(u,"layer");this.depthLoc=h.getUniformLocation(u,"depth");
this.projMatLoc=h.getUniformLocation(u,"uProjectionMatrix");this.viewMatLoc=h.getUniformLocation(u,"uModelViewMatrix");this.color1Loc=h.getUniformLocation(u,"color1");this.color2Loc=h.getUniformLocation(u,"color2");this.color3Loc=h.getUniformLocation(u,"color3")}update(){h.useProgram(u);h.bindTexture(h.TEXTURE_2D,this.tex);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,this.data)}calcWidth(e){var m=0;for(let g of e){e=g.codePointAt(0);var l;for(l=0;l<this.glyphCodes.length&&this.glyphCodes[l]!=
e;l++);m+=this.glyphX2[l]-this.glyphX1[l]}return m}findGlyph(e){var m=-1;"number"===typeof e&&(m=e);"string"===typeof e&&(m=e.codePointAt(0));for(e=0;e<this.glyphCodes.length&&this.glyphCodes[e]!=m;e++);return e<this.glyphCodes.length?e:-1}draw(e,m,l,g,d,b){function a(k){return[(k/16777216&255)/255,(k/65536&255)/255,(k/256&255)/255,(k/1&255)/255]}h.useProgram(u);h.blendFunc(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA);h.enable(h.BLEND);h.bindTexture(h.TEXTURE_2D,this.tex);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,
h.LINEAR);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR);h.enableVertexAttribArray(this.vloc);h.bindBuffer(h.ARRAY_BUFFER,this.vertexBuff);h.vertexAttribPointer(this.vloc,2,h.FLOAT,!1,0,0);h.enableVertexAttribArray(this.tloc);h.bindBuffer(h.ARRAY_BUFFER,this.texBuff);h.vertexAttribPointer(this.tloc,2,h.FLOAT,!1,0,0);h.uniformMatrix4fv(this.projMatLoc,!1,d);mat4.translate(b,b,[e,m,0]);e=vec3.create();mat4.getScaling(e,d);d=vec3.create();mat4.getScaling(d,b);h.uniform1f(this.scaleFactorLoc,
d[0]*e[0]*h.drawingBufferWidth);for(let k of l){d=k.codePointAt(0);for(l=0;l<this.glyphCodes.length&&this.glyphCodes[l]!=d;l++);mat4.translate(b,b,[-this.glyphX1[l],-this.glyphHeights[l]+this.glyphY1[l],0]);l>=this.glyphCodes.length||(d=l,h.uniformMatrix4fv(this.viewMatLoc,!1,b),h.uniform1i(this.layerLoc,~~(f.ZD_DECODE[~~this.glyphSourceZD[l]][0]/2)),h.uniform1i(this.depthLoc,~~f.ZD_DECODE[~~this.glyphSourceZD[l]][1]),e=this.glyphHasColors[l]&&this.glyphColors[l]?this.glyphColors[l].length:0,0==e&&
h.uniform4fv(this.color1Loc,g),0<e&&h.uniform4fv(this.color1Loc,a(this.glyphColors[l][0])),1<e&&h.uniform4fv(this.color2Loc,a(this.glyphColors[l][1])),2<e&&h.uniform4fv(this.color3Loc,a(this.glyphColors[l][2])),h.drawArrays(h.TRIANGLE_FAN,4*d,4));mat4.translate(b,b,[this.glyphX2[l],this.glyphHeights[l]-this.glyphY2[l],0])}}}return{glSet:function(e){h=e},getProg:function(){return u},GlyphSet:O,ff:f}}();
var vp = (function() {

  // set by initialize()
  var canvas, kbalpha, kbnum, kbnext, kbprev, gl;

  // set by start()
  const beg2 = {}, len2 = {};
  var ac, clickSound, beepSound, windSound;
  var buf2;

  // set by canvasResize()
  var diagonal, wi2px, px2wi;
  var layoutSignal; // recalculate all layouts on next frame
  const layoutViews = []; // specific views to recalculate next frame

  var rootViewport, animViews = [];
  const pixelPM = mat4.create();
  var mouseEnabled = 0;

  // for debug purposes
  var plainProgram;
	var debug1 = false; // layout and rendering console messages

  const touchRadius = 85, clickRadius = 5;
  function getPointerRadius() { return (navigator.maxTouchPoints>0 ? touchRadius : clickRadius); }
  function isMouseEnabled() { return mouseEnabled; }
  function getContext() { return gl; }
	const clamp = (num, min, max) => Math.min(Math.max(num, min), max);

	var inputGad, inputGadPrev; function getInputGad() { return inputGad; }

	var progObj;
	function drawImage(img, x,y,w,h) {
		var img, tex, vloc, tloc, vertexBuff, texBuff;

    var uLoc;

		if (!progObj) {
		  // create shaders
		  var vertexShaderSrc = 
		  "attribute vec2 aVertex;" +
		  "attribute vec2 aUV;" + 
		  "varying vec2 vTex;" +
		  "uniform vec2 pos;" +
		  "void main(void) {" +
		  "  gl_Position = vec4(aVertex + pos, 0.0, 1.0);" +
		  "  vTex = aUV;" +
		  "}";

		  var fragmentShaderSrc =
		  "precision highp float;" +
		  "varying vec2 vTex;" +
		  "uniform sampler2D sampler0;" +
		  "void main(void){" +
		  "  gl_FragColor = texture2D(sampler0, vTex);"+
		  "}";

		  var vertShaderObj = gl.createShader(gl.VERTEX_SHADER);
		  var fragShaderObj = gl.createShader(gl.FRAGMENT_SHADER);
		  gl.shaderSource(vertShaderObj, vertexShaderSrc);
		  gl.shaderSource(fragShaderObj, fragmentShaderSrc);
		  gl.compileShader(vertShaderObj);
		  gl.compileShader(fragShaderObj);

		  var progObj = gl.createProgram();
		  gl.attachShader(progObj, vertShaderObj);
		  gl.attachShader(progObj, fragShaderObj);

		  gl.linkProgram(progObj);
		}
    gl.useProgram(progObj);

    gl.viewport(x,y,w,h);

    vertexBuff = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuff);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]), gl.STATIC_DRAW);

    texBuff = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, texBuff);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 1, 0, 0, 1, 0, 1, 1]), gl.STATIC_DRAW);

    vloc = gl.getAttribLocation(progObj, "aVertex"); 
    tloc = gl.getAttribLocation(progObj, "aUV");
    uLoc = gl.getUniformLocation(progObj, "pos");

//    img = new Image();
//    img.src = "image.jpg";

//    img.onload = function(){
        tex = gl.createTexture();
        gl.bindTexture(gl.TEXTURE_2D, tex);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
        gl.texImage2D(gl.TEXTURE_2D, 0,  gl.RGBA,  gl.RGBA, gl.UNSIGNED_BYTE, img);

        gl.enableVertexAttribArray(vloc);
        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuff);
        gl.vertexAttribPointer(vloc, 2, gl.FLOAT, false, 0, 0);

        gl.enableVertexAttribArray(tloc);
        gl.bindBuffer(gl.ARRAY_BUFFER, texBuff);
        gl.bindTexture(gl.TEXTURE_2D, tex);
        gl.vertexAttribPointer(tloc, 2, gl.FLOAT, false, 0, 0);

        gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);
//    };
	}class HitList {
  constructor(x,y) {
    this.x = x; this.y = y;
    this.hits = []; // { gad: Gadget, dist: number }
  }
  sortHits() {
    var hits = [];
    while (this.hits.length > 0) {
      var best = 0, d = this.hits[0].dist, i, bz = this.hits[0].gad.z? this.hits[0].gad.z: 0, z;
      for (i = 0; i < this.hits.length && (z = this.hits[i].gad.z? this.hits[i].gad.z: 0, 1); i++)
        if (z > bz || (z == bz && this.hits[i].dist < d)) { best = i; d = this.hits[i].dist; bz = z; }
      hits.push(this.hits[best]); this.hits.splice(best, 1);
    }
    this.hits = hits;
  }
  containsAny(actionFlags) {
    for (var i=0; i<this.hits.length; i++) {
      if ((this.hits[i].gad.actionFlags & actionFlags) != 0) return true;
    }
    return false;
  }
  getActionableGads(actionFlags) {
    var gads = [];
    for (var i=0; i<this.hits.length; i++) {
      if ((this.hits[i].gad.actionFlags & actionFlags) != 0) gads.splice(gads.length, 0, this.hits[i].gad);
    }
    return gads;
  }
  click() {
    for (var i=0; i<this.hits.length; i++) {
      if ((this.hits[i].gad.actionFlags & vp.GAF_CLICKABLE) != 0 && this.hits[i].gad.click)
        this.hits[i].gad.click.call(this.hits[i].gad);
    }
  }
  menu() {
    for (var i=0; i<this.hits.length; i++) {
      if ((this.hits[i].gad.actionFlags & vp.GAF_CONTEXTMENU) != 0 && this.hits[i].gad.menu)
        this.hits[i].gad.menu.call(this.hits[i].gad);
    }
  }
}
class LayoutState {
  constructor(width, height) {
    this.totalWidth = width; this.totalHeight = height;
    this.remainingX = 0; this.remainingY = 0;
    this.remainingWidth = width; this.remainingHeight = height;
  }
	hasArea() {
		return this.remainingWidth > 0 && this.remainingHeight > 0;
	}
	clear() {
    this.remainingX = 0; this.remainingY = 0;
    this.remainingWidth = 0; this.remainingHeight = 0;
	}
}
class View {
  constructor(parent) {
		this.name = "unnamed";
    this.parent = parent;
    this.designFit = undefined; this.designSize = 0; this.designScale = 0; this.designWidth = 0; this.designHeight = 0;
    this.x = 0; this.y = 0; this.w = 0; this.h = 0; this.W = 0; this.H = 0;
		this.sw = 0; this.sh = 0;
    this.userMat = mat4.create(); mat4.identity(this.userMat);
    this.ox = 0; this.oy = 0; // origin
    this.userX = 0; this.userY = 0;
    this.gadgets = [];
    this.mat = mat4.create();
    this.needsRender = true; this.childRender = true;
  }
	requeueLayout() {
		if (layoutViews.indexOf(this) === -1) layoutViews.push(this);
	}
  insideFit(w,h) { this.viewScale = (this.w/w < this.h/h)? this.w/w: this.h/h; }
  layoutAll(s) {
		if (debug1 && !continuous) console.log(this.name+'::'+this.layoutAll.name);
    this.x = s.remainingX; this.y = s.remainingY;
    this.w = s.remainingWidth; this.h = s.remainingHeight;
    this.W = s.totalWidth; this.H = s.totalHeight;
    this.viewScale =
      this.designFit?
				(this.h==0?1:this.designFit[0]/this.designFit[1]>this.w/this.h?
				 this.w==0?1:this.w/this.designFit[0]:this.h==0?1:this.h/this.designFit[1]):
      this.designSize? this.w!=0&&this.h!=0?Math.sqrt(this.w*this.h/this.designSize):1:
      this.designScale? this.designScale:// * window.devicePixelRatio:
      this.designWidth? this.w==0?1:this.w/this.designWidth:
      this.designHeight? this.h==0?1:this.h/this.designHeight:
      this.parent? this.parent.viewScale: 1;
if (this.viewScale == 0) {
console.log('ZERO SCALE', this.name);
this.viewScale = 1;
}
		this.sw = this.w/this.viewScale;
		this.sh = this.h/this.viewScale;
    this.rematrix();
    if (this.layoutFunc) { this.layoutFunc.call(this); this.rematrix(); }
    this.setRenderFlag(true);
  }
  rematrix() {
		mat4.copy(this.mat, pixelPM);
    mat4.scale(this.mat, pixelPM, [canvas.width/this.w, canvas.height/this.h, 1]);
    mat4.multiply(this.mat, this.mat, this.userMat);
    mat4.translate(this.mat, this.mat, [this.ox, this.oy, 0]);
    mat4.scale(this.mat, this.mat, [this.viewScale, this.viewScale, 1]);
    mat4.translate(this.mat, this.mat, [-this.userX, -this.userY, 0]);
  }
  relayout() {
    var s = new LayoutState();
    s.totalWidth = this.W; s.totalHeight = this.H;
    s.remainingX = this.x; s.remainingY = this.y;
		s.remainingWidth = this.w; s.remainingHeight = this.h;
    this.layoutAll(s);
  }
  getScale() { return this.viewScale; }
  setRenderFlag(value) {
    if (this.needsRender) return;
    this.needsRender = this.needsender || value;
    this.childRender = true;
    if (this.parent) this.parent.setRenderFlag(false);
    if (value && this.a) this.a.setRenderFlag(true);
    if (value && this.b) this.b.setRenderFlag(true);
    if (value && this.c) this.c.setRenderFlag(true);
  }
  renderAll(clearBackground = true) {
    this.childRender = false;
    if (this.needsRender) {
      this.needsRender = false;
			if (this.w > 0 && this.h > 0) {
				if (debug1 && !continuous)
					console.log(this.name+'::'+this.renderAll.name, this.w, this.h);
				this.clip();
		    if (clearBackground) { gl.clearColor(0,0,0,1); gl.clear(gl.COLOR_BUFFER_BIT); }
		    if (this.renderFunc) { this.renderFunc.call(this); }
			}
    }
  }
  clip() {
    gl.viewport(this.x, this.H-this.y-this.h, this.w, this.h);
    gl.scissor(this.x, this.H-this.y-this.h, this.w, this.h);
    gl.enable(gl.SCISSOR_TEST);
  }
  prepMatrix() {
    if (vp.projMat && vp.viewMat) {
      mat4.identity(vp.projMat);
      mat4.translate(vp.projMat, vp.projMat, [-1, 1, 0]);
      mat4.scale(vp.projMat, vp.projMat, [2/this.w, -2/this.h, 1]);
      mat4.identity(vp.viewMat);
      mat4.scale(vp.viewMat, vp.viewMat, [this.getScale(), this.getScale(), 1]);
      mat4.translate(vp.viewMat, vp.viewMat, [-this.panX, -this.panY, 0]);
    }
  }
  getHits(hitList, radius) {
		if (this.w <= 0 || this.h <= 0) return;
    if (hitList.x < this.x-radius || hitList.y < this.y-radius || hitList.x >= this.x+this.w+radius || hitList.y >= this.y+this.h+radius) return;
    for (const g of this.gadgets) if (g) g.getHits(hitList, radius); else console.log("Bad gadget", this);
  }
}
class DividerView extends View {
	constructor(parent, type, ratio, dividerSize) {
		super(parent);
		this.type = type; this.state = ''; this.stateNew = ''; this.stateProg = 0;
		this.size = dividerSize;
		this.ratio = ratio; this.threshold = 1/1;
		this.ratioMin = {h: 0, v: 0}; this.ratioMax = {h: 1, v: 1};
		this.a = undefined; this.b = undefined; this.c = undefined;
		this.prevTime = 0;
	}
	layoutAll(s) {
		super.layoutAll(s);
		var s1 = new LayoutState(s.totalWidth, s.totalHeight);
		var s2 = new LayoutState(s.totalWidth, s.totalHeight);
		var s3 = new LayoutState(s.totalWidth, s.totalHeight);
		if (s.hasArea()) {
			var size = ~~(this.size * this.getScale());

			// Horizontal/vertical state init/transitions
			var oldState = this.stateNew;
			if (this.stateNew == '') {
				var wide = (s.remainingWidth / this.threshold > s.remainingHeight)
					? true : false;
				if (this.type == 'a') {
					this.stateNew = wide ? 'v' : 'h';
				} else {
					this.stateNew = this.type;
				}
				this.state = this.stateNew;
			}
			var targetratio = this.ratio;
			if (this.type == 'a') {

				var delta = 0, thisTime = Date.now();
				if (this.prevTime != 0) delta = thisTime - this.prevTime;
				this.prevTime = thisTime;
				if (delta > 17) delta = 17;

				if (s.remainingWidth / this.threshold > s.remainingHeight + 2)
					this.stateNew = 'v';
				if (s.remainingWidth / this.threshold < s.remainingHeight + 2)
					this.stateNew = 'h';
				if (this.stateNew != this.state || this.stateProg > 0) {
					if (this.stateNew != this.state) {
						this.stateProg += 0.008 * delta;
						if (this.stateProg >= 1) {
							this.stateProg = 1;
							this.state = this.stateNew;
							if (this.setPoint && this.stateNew in this.setPoint)
								this.ratio = this.setPoint[this.stateNew];
						}
						if (layoutViews.indexOf(this) === -1) layoutViews.push(this);
					} else {
						this.stateProg -= 0.008 * delta;
						if (this.stateProg < 0) this.stateProg = 0;
						if (this.stateProg > 0) {
							if (layoutViews.indexOf(this) === -1) layoutViews.push(this);
						}
					}
				}
				var stateOther = this.state == 'v'? 'h':'v';
				if (this.setPoint && stateOther in this.setPoint)
					targetratio = this.setPoint[stateOther];
			}

			// View calculations
			if (this.layoutFunc && this.state != oldState) this.layoutFunc.call(this);
			var ratio = clamp(this.ratio, this.ratioMin[this.state], this.ratioMax[this.state]);
			if (ratio != this.ratio) {
				this.ratio = ratio;
				if (layoutViews.indexOf(this) === -1) layoutViews.push(this);
			}
			var f1 = 1 - this.stateProg * (1 - targetratio);
			var f2 = 1 - this.stateProg * (0 + targetratio);
			if (this.state == 'v') {
				var size1 = ~~((s.remainingWidth - size) * this.ratio);
				s1.remainingWidth = size1;
				 s1.remainingHeight = ~~(s.remainingHeight * f1);
					s1.remainingX = s.remainingX; s1.remainingY = s.remainingY;
				s2.remainingWidth = s.remainingWidth - size - size1;
				 s2.remainingHeight = ~~(s.remainingHeight * f2);
					s2.remainingX = s.remainingX + size1 + size;
					 s2.remainingY = s.remainingY + s.remainingHeight - s2.remainingHeight;
				s3.remainingX = s.remainingX + size1; s3.remainingY = s.remainingY;
				 s3.remainingWidth = size; s3.remainingHeight = s.remainingHeight;
			} else if (this.state == 'h') {
				var size1 = ~~((s.remainingHeight - size) * this.ratio);
				s1.remainingWidth = ~~(s.remainingWidth * f1);
				 s1.remainingHeight = size1;
					s1.remainingX = s.remainingX; s1.remainingY = s.remainingY;
				s2.remainingWidth = ~~(s.remainingWidth * f2);
				 s2.remainingHeight = s.remainingHeight - size - size1;
					s2.remainingX = s.remainingX + s.remainingWidth - s2.remainingWidth;
					 s2.remainingY = s.remainingY + size1 + size;
				s3.remainingX = s.remainingX; s3.remainingY = s.remainingY + size1;
				 s3.remainingWidth = s.remainingWidth; s3.remainingHeight = size;
			}
		} else {
			s1.clear();
			s2.clear();
			s3.clear();
		}
		if (this.a) { this.a.layoutAll(s1); }
		if (this.b) { this.b.layoutAll(s2); }
		if (this.c) { this.c.layoutAll(s3); }
		if (this.layoutEndFunc) this.layoutEndFunc.call(this);
		var ratio = clamp(this.ratio, this.ratioMin[this.state], this.ratioMax[this.state]);
		if (ratio != this.ratio) {
			this.ratio = ratio;
			if (layoutViews.indexOf(this) === -1) layoutViews.push(this);
		}
	}
	renderAll() {
		super.renderAll();
		if (this.a && (this.a.needsRender || this.a.childRender)) { this.a.renderAll(); }
		if (this.b && (this.b.needsRender || this.b.childRender)) { this.b.renderAll(); }
		if (this.c && (this.c.needsRender || this.c.childRender)) { this.c.renderAll(); }
	}
	getHits(hitList, radius) {
		if (this.a) { this.a.getHits(hitList, radius); }
		if (this.b) { this.b.getHits(hitList, radius); }
		if (this.c) { this.c.getHits(hitList, radius); }
	}
}
class SliceView extends View {
	constructor(parent, type, size1, size2) {
		super(parent);
		this.type = type; this.state = ''; this.stateNew = ''; this.stateProg = 0;
		this.sizeH = size1; this.sizeV = size2 ? size2 : size1;
		this.prop = false;
		this.threshold = 0.5;
		this.a = undefined; this.b = undefined;
		this.prevTime = 0;
		this.wideState = ''; this.tallState = '';
	}
	layoutAll(s) {
		super.layoutAll(s);
		var s1 = new LayoutState(s.totalWidth, s.totalHeight);
		var s2 = new LayoutState(s.totalWidth, s.totalHeight);
		if (s.hasArea()) {
			var sizeH = ~~(this.sizeH * (this.prop? this.w : this.getScale()));
			var sizeV = ~~(this.sizeV * (this.prop? this.h : this.getScale()));

			// Horizontal/vertical state init/transitions
			var oldState = this.stateNew;
			if (this.stateNew == '') {
				var wide = (s.remainingWidth * this.threshold
									> s.remainingHeight * (1 - this.threshold))
					? true : false;
				if (this.type == 'tl') {
					this.wideState = 'l'; this.tallState = 't';
					this.stateNew = wide ? this.wideState : this.tallState;
				} else if (this.type == 'tr') {
					this.wideState = 'r'; this.tallState = 't';
					this.stateNew = wide ? this.wideState : this.tallState;
				} else if (this.type == 'bl') {
					this.wideState = 'l'; this.tallState = 'b';
					this.stateNew = wide ? this.wideState : this.tallState;
				} else if (this.type == 'br') {
					this.wideState = 'r'; this.tallState = 't';
					this.stateNew = wide ? this.wideState : this.tallState;
				} else {
					this.stateNew = this.type;
				}
				this.state = this.stateNew;
			}
			if (this.type.length > 1) {

				var delta = 0, thisTime = Date.now();
				if (this.prevTime != 0) delta = thisTime - this.prevTime;
				this.prevTime = thisTime;
				if (delta > 17) delta = 17;

				if (s.remainingWidth * this.threshold > s.remainingHeight * (1 - this.threshold) + 2)
					this.stateNew = this.wideState;
				if (s.remainingHeight * this.threshold > s.remainingWidth * (1 - this.threshold) + 2)
					this.stateNew = this.tallState;
				if (this.stateNew != this.state || this.stateProg > 0) {
					if (this.stateNew != this.state) {
						this.stateProg += 0.008 * delta;
						if (this.stateProg >= 1) {
							this.stateProg = 1;
							this.state = this.stateNew;
						}
						if (layoutViews.indexOf(this) === -1) layoutViews.push(this);
					} else {
						this.stateProg -= 0.008 * delta;
						if (this.stateProg < 0) this.stateProg = 0;
						if (this.stateProg > 0) {
							if (layoutViews.indexOf(this) === -1) layoutViews.push(this);
						}
					}
				}
			}

			// View calculations
			if (this.layoutFunc && this.state != oldState && this.w > 0 && this.h > 0)
				this.layoutFunc.call(this);
			var ratio = (this.state == 't' || this.state == 'b')
								? sizeV / s.remainingWidth
								: sizeH / s.remainingHeight;
			var f1 = 1 - this.stateProg * (1 - ratio);
			var f2 = 1 - this.stateProg * (0 + ratio);
			if (this.state == 'l') {
				s1.remainingWidth = sizeV;
				s1.remainingHeight = ~~(s.remainingHeight * f1);
				s1.remainingX = s.remainingX;
				s2.remainingWidth = s.remainingWidth - sizeV;
				s2.remainingHeight = ~~(s.remainingHeight * f2);
				s2.remainingX = s.remainingX + sizeV;
				if (this.tallState == 't') {
					s1.remainingY = s.remainingY;
					s2.remainingY = s.remainingY + s.remainingHeight - s2.remainingHeight;
				} else {
					s1.remainingY = s.remainingY + s.remainingHeight - s1.remainingHeight;
					s2.remainingY = s.remainingY;
				}
			} else if (this.state == 'r') {
				s1.remainingWidth = sizeV;
				s1.remainingHeight = ~~(s.remainingHeight * f1);
				s1.remainingX = s.remainingX + s.remainingWidth - sizeV;
				s2.remainingWidth = s.remainingWidth - sizeV;
				s2.remainingHeight = ~~(s.remainingHeight * f2);
				s2.remainingX = s.remainingX;
				if (this.tallState == 't') {
					s1.remainingY = s.remainingY;
					s2.remainingY = s.remainingY + s.remainingHeight - s2.remainingHeight;
				} else {
					s1.remainingY = s.remainingY + s.remainingHeight - s1.remainingHeight;
					s2.remainingY = s.remainingY;
				}
			} else if (this.state == 't') {
				s1.remainingWidth = ~~(s.remainingWidth * f1);
				s1.remainingHeight = sizeH;
				s1.remainingY = s.remainingY;
				s2.remainingWidth = ~~(s.remainingWidth * f2);
				s2.remainingHeight = s.remainingHeight - sizeH;
				s2.remainingY = s.remainingY + sizeH;
				if (this.wideState == 'l') {
					s1.remainingX = s.remainingX;
					s2.remainingX = s.remainingX + s.remainingWidth - s2.remainingWidth;
				} else {
					s1.remainingX = s.remainingX + s.remainingWidth - s1.remainingWidth;
					s2.remainingX = s.remainingX;
				}
			} else if (this.state == 'b') {
				s1.remainingWidth = ~~(s.remainingWidth * f1);
				s1.remainingHeight = sizeH;
				s1.remainingY = s.remainingY + s.remainingHeight - sizeH;
				s2.remainingWidth = ~~(s.remainingWidth * f2);
				s2.remainingHeight = s.remainingHeight - sizeH;
				s2.remainingY = s.remainingY;
				if (this.wideState == 'l') {
					s1.remainingX = s.remainingX;
					s2.remainingX = s.remainingX + s.remainingWidth - s2.remainingWidth;
				} else {
					s1.remainingX = s.remainingX + s.remainingWidth - s1.remainingWidth;
					s2.remainingX = s.remainingX;
				}
		  }
		} else {
			s1.clear();
			s2.clear();
		}
		if (this.a) { this.a.layoutAll(s1); }
		if (this.b) { this.b.layoutAll(s2); }
	}
	renderAll() {
		super.renderAll();
		if (this.a && (this.a.needsRender || this.a.childRender)) { this.a.renderAll(); }
		if (this.b && (this.b.needsRender || this.b.childRender)) { this.b.renderAll(); }
	}
	getHits(hitList, radius) {
		if (this.a) { this.a.getHits(hitList, radius); }
		if (this.b) { this.b.getHits(hitList, radius); }
  }
/*
      findGad(s, r) {
        if (this.a) this.a.findGad(s, r);
        if (this.b) this.b.findGad(s, r);
      }
      findViewport(p) {
        return (this.a && this.a.findViewport(p)) || (this.b && this.b.findViewport(p));
      }
*/
}
class PagesView extends View {
	constructor(parent, type) {
		super(parent);
		this.type = type; this.index = 0; this.indexNew = 0; this.indexProg = 0;
		this.a = undefined; this.b = undefined;
		this.pages = [];
		this.snaps = [];
		this.prevTime = 0;

		this.gadgets.push(this.swipeGad = new vp.SwipeGadget(this));
		switch (this.type) {
		case 'h':
			this.swipeGad.actionFlags =
				vp.GAF_SWIPEABLE_LEFTRIGHT |
				vp.GAF_SCROLLABLE_LEFTRIGHT;
			break;
		case 'v':
			this.swipeGad.actionFlags =
				vp.GAF_SWIPEABLE_UPDOWN |
				vp.GAF_SCROLLABLE_UPDOWN;
			break;
		default: this.swipeGad.actionFlags = 0;
		}
		this.layoutFunc = function() {
			var v = this;
			v.minX = 0; v.maxX = v.sw * v.pages.length;
			v.minY = 0; v.maxY = v.sh * v.pages.length;
			v.swipeGad.layout.call(v.swipeGad);
		}
		this.toPage = function(pageIndex) {
			var v = this, g = v.swipeGad;
			var index = clamp(pageIndex, 0, v.pages.length);
			if (index > this.index) {
				g.doSwipe(true, index);
			} else if (index < this.index) {
				g.doSwipe(false, index);
			}
		}
	}
	layoutAll(s) {
		super.layoutAll(s);
		var s1 = new LayoutState(s.totalWidth, s.totalHeight);
		var s2 = new LayoutState(s.totalWidth, s.totalHeight);
		if (s.hasArea()) {

			var delta = 0, thisTime = Date.now();
			if (this.prevTime != 0) delta = thisTime - this.prevTime;
			this.prevTime = thisTime;
			if (delta > 17) delta = 17;

			var h = (this.type == 'h');
			var v = (this.type == 'v');

			this.snaps = [];
			for (var i = 0; i < this.pages.length; i++) {
				this.snaps.push([
					this.sw * i * (h?1:0),
					this.sh * i * (v?1:0)]);
			}

			// Get the index of the page that should be mostly visible.
			var oldIndex = this.index;
			if (h) this.index = clamp(Math.round(this.userX / this.sw), 0, this.pages.length-1);
			if (v) this.index = clamp(Math.round(this.userY / this.sh), 0, this.pages.length-1);
			if (this.index != oldIndex && this.pageChangeFunc) this.pageChangeFunc.call(this);

			// Determine which pages are visible and what their offsets are.
			var curPage = this.pages[this.index];
			var curX = this.userX + (h?-this.index*this.sw:0);
			var curY = this.userY + (v?-this.index*this.sh:0);
			var otherPage = undefined, otherX, otherY;
			if (h && this.index * this.sw > this.userX
			||  v && this.index * this.sh > this.userY) {
				curPage.userX = 0;
				curPage.userY = 0;
				var otherI = this.index - 1;
				if (otherI >= 0 && otherI < this.pages.length) {
					otherPage = this.pages[otherI];
					otherX = this.userX + (h?-this.index*this.sw+this.sw:0);
					otherY = this.userY + (v?-this.index*this.sh+this.sh:0);
					otherPage.userX = h?otherX*this.viewScale/otherPage.viewScale:0;
					otherPage.userY = v?otherY*this.viewScale/otherPage.viewScale:0;
				}
			} else if (h && this.index * this.sw < this.userX
							|| v && this.index * this.sh < this.userY) {
				curPage.userX = h?curX*this.viewScale/curPage.viewScale:0;
				curPage.userY = v?curY*this.viewScale/curPage.viewScale:0;
				var otherI = this.index + 1;
				if (otherI >= 0 && otherI < this.pages.length) {
					otherPage = this.pages[otherI];
					otherX = this.userX + (h?-this.index*this.sw-this.sw:0);
					otherY = this.userY + (v?-this.index*this.sh-this.sh:0);
					otherPage.userX = 0;
					otherPage.userY = 0;
				}
			} else {
				curPage.userX = 0;
				curPage.userY = 0;
			}
			this.a = curPage; curPage.parent = this;
			this.b = otherPage; if (otherPage) otherPage.parent = this;

			// View calculations
			curX *= this.viewScale;
			curY *= this.viewScale;
			s1.remainingWidth = clamp(s.remainingWidth - Math.abs(curX),
				0, s.remainingWidth);
			s1.remainingHeight = clamp(s.remainingHeight - Math.abs(curY),
				0, s.remainingHeight);
			s1.remainingX = clamp(s.remainingX - (curX < 0 ? curX : 0),
				s.remainingX, s.remainingX + s.remainingWidth);
			s1.remainingY = clamp(s.remainingY - (curY < 0 ? curY : 0),
				s.remainingY, s.remainingY + s.remainingHeight);
			if (otherPage) {
				otherX *= this.viewScale;
				otherY *= this.viewScale;
				s2.remainingWidth = clamp(s.remainingWidth - Math.abs(otherX),
					0, s.remainingWidth);
				s2.remainingHeight = clamp(s.remainingHeight - Math.abs(otherY),
					0, s.remainingHeight);
				s2.remainingX = clamp(s.remainingX - (otherX < 0 ? otherX : 0),
					s.remainingX, s.remainingX + s.remainingWidth);
				s2.remainingY = clamp(s.remainingY - (otherY < 0 ? otherY : 0),
					s.remainingY, s.remainingY + s.remainingHeight);
			} else {
				s2.clear();
			}
		} else {
			s1.clear();
			s2.clear();
		}
		if (this.a) { this.a.layoutAll(s1); }
		if (this.b) { this.b.layoutAll(s2); }
	}
	renderAll() {
		super.renderAll();
		if (this.a && (this.a.needsRender || this.a.childRender)) { this.a.renderAll(); }
		if (this.b && (this.b.needsRender || this.b.childRender)) { this.b.renderAll(); }
	}
	getHits(hitList, radius) {
		super.getHits(hitList, radius);
		if (this.a) { this.a.getHits(hitList, radius); }
		if (this.b) { this.b.getHits(hitList, radius); }
  }
}
class PopupView extends View {
	constructor(parent, type, size1, size2) {
		super(parent);
		this.type = type; this.state = ''; this.stateNew = ''; this.stateProg = 0;
		this.sizeH = size1; this.sizeV = size2 ? size2 : size1;
		this.prop = false;
		this.threshold = 0.5;
		this.a = undefined; this.b = undefined;
		this.prevTime = 0;
		this.wideState = ''; this.tallState = '';
	}
	layoutAll(s) {
		super.layoutAll(s);
		var s1 = new LayoutState(s.totalWidth, s.totalHeight);
		var s2 = new LayoutState(s.totalWidth, s.totalHeight);
		if (s.hasArea()) {
			var sizeH = ~~(this.sizeH * (this.prop? this.w : this.getScale()));
			var sizeV = ~~(this.sizeV * (this.prop? this.h : this.getScale()));

			// Horizontal/vertical state init/transitions
			var oldState = this.stateNew;
			if (this.stateNew == '') {
				var wide = (s.remainingWidth * this.threshold
									> s.remainingHeight * (1 - this.threshold))
					? true : false;
				if (this.type == 'tl') {
					this.wideState = 'l'; this.tallState = 't';
					this.stateNew = wide ? this.wideState : this.tallState;
				} else if (this.type == 'tr') {
					this.wideState = 'r'; this.tallState = 't';
					this.stateNew = wide ? this.wideState : this.tallState;
				} else if (this.type == 'bl') {
					this.wideState = 'l'; this.tallState = 'b';
					this.stateNew = wide ? this.wideState : this.tallState;
				} else if (this.type == 'br') {
					this.wideState = 'r'; this.tallState = 't';
					this.stateNew = wide ? this.wideState : this.tallState;
				} else {
					this.stateNew = this.type;
				}
				this.state = this.stateNew;
			}
			if (this.type.length > 1) {

				var delta = 0, thisTime = Date.now();
				if (this.prevTime != 0) delta = thisTime - this.prevTime;
				this.prevTime = thisTime;
				if (delta > 17) delta = 17;

				if (s.remainingWidth * this.threshold > s.remainingHeight * (1 - this.threshold) + 2)
					this.stateNew = this.wideState;
				if (s.remainingHeight * this.threshold > s.remainingWidth * (1 - this.threshold) + 2)
					this.stateNew = this.tallState;
				if (this.stateNew != this.state || this.stateProg > 0) {
					if (this.stateNew != this.state) {
						this.stateProg += 0.008 * delta;
						if (this.stateProg >= 1) {
							this.stateProg = 1;
							this.state = this.stateNew;
						}
						if (layoutViews.indexOf(this) === -1) layoutViews.push(this);
					} else {
						this.stateProg -= 0.008 * delta;
						if (this.stateProg < 0) this.stateProg = 0;
						if (this.stateProg > 0) {
							if (layoutViews.indexOf(this) === -1) layoutViews.push(this);
						}
					}
				}
			}

			// View calculations
			if (this.layoutFunc && this.state != oldState && this.w > 0 && this.h > 0)
				this.layoutFunc.call(this);
			var ratio = (this.state == 't' || this.state == 'b')
								? sizeV / s.remainingWidth
								: sizeH / s.remainingHeight;
			var f1 = 1 - this.stateProg * (1 - ratio);
			var f2 = 1 - this.stateProg * (0 + ratio);
			if (this.state == 'l') {
				s1.remainingWidth = sizeV;
				s1.remainingHeight = ~~(s.remainingHeight * f1);
				s1.remainingX = s.remainingX;
				s2.remainingWidth = s.remainingWidth - sizeV;
				s2.remainingHeight = ~~(s.remainingHeight * f2);
				s2.remainingX = s.remainingX + sizeV;
				if (this.tallState == 't') {
					s1.remainingY = s.remainingY;
					s2.remainingY = s.remainingY + s.remainingHeight - s2.remainingHeight;
				} else {
					s1.remainingY = s.remainingY + s.remainingHeight - s1.remainingHeight;
					s2.remainingY = s.remainingY;
				}
			} else if (this.state == 'r') {
				s1.remainingWidth = sizeV;
				s1.remainingHeight = ~~(s.remainingHeight * f1);
				s1.remainingX = s.remainingX + s.remainingWidth - sizeV;
				s2.remainingWidth = s.remainingWidth - sizeV;
				s2.remainingHeight = ~~(s.remainingHeight * f2);
				s2.remainingX = s.remainingX;
				if (this.tallState == 't') {
					s1.remainingY = s.remainingY;
					s2.remainingY = s.remainingY + s.remainingHeight - s2.remainingHeight;
				} else {
					s1.remainingY = s.remainingY + s.remainingHeight - s1.remainingHeight;
					s2.remainingY = s.remainingY;
				}
			} else if (this.state == 't') {
				s1.remainingWidth = ~~(s.remainingWidth * f1);
				s1.remainingHeight = sizeH;
				s1.remainingY = s.remainingY;
				s2.remainingWidth = ~~(s.remainingWidth * f2);
				s2.remainingHeight = s.remainingHeight - sizeH;
				s2.remainingY = s.remainingY + sizeH;
				if (this.wideState == 'l') {
					s1.remainingX = s.remainingX;
					s2.remainingX = s.remainingX + s.remainingWidth - s2.remainingWidth;
				} else {
					s1.remainingX = s.remainingX + s.remainingWidth - s1.remainingWidth;
					s2.remainingX = s.remainingX;
				}
			} else if (this.state == 'b') {
				s1.remainingWidth = ~~(s.remainingWidth * f1);
				s1.remainingHeight = sizeH;
				s1.remainingY = s.remainingY + s.remainingHeight - sizeH;
				s2.remainingWidth = ~~(s.remainingWidth * f2);
				s2.remainingHeight = s.remainingHeight - sizeH;
				s2.remainingY = s.remainingY;
				if (this.wideState == 'l') {
					s1.remainingX = s.remainingX;
					s2.remainingX = s.remainingX + s.remainingWidth - s2.remainingWidth;
				} else {
					s1.remainingX = s.remainingX + s.remainingWidth - s1.remainingWidth;
					s2.remainingX = s.remainingX;
				}
		  }
		} else {
			s1.clear();
			s2.clear();
		}
		if (this.a) { this.a.layoutAll(s1); }
		if (this.b) { this.b.layoutAll(s2); }
	}
	renderAll() {
		super.renderAll();
		if (this.a && (this.a.needsRender || this.a.childRender)) { this.a.renderAll(); }
		if (this.b && (this.b.needsRender || this.b.childRender)) { this.b.renderAll(); }
	}
	getHits(hitList, radius) {
		if (this.a) { this.a.getHits(hitList, radius); }
		if (this.b) { this.b.getHits(hitList, radius); }
  }
/*
      findGad(s, r) {
        if (this.a) this.a.findGad(s, r);
        if (this.b) this.b.findGad(s, r);
      }
      findViewport(p) {
        return (this.a && this.a.findViewport(p)) || (this.b && this.b.findViewport(p));
      }
*/
}
class ViewOverlay extends View {
  constructor(parent) {
    super(parent);
    this.a = undefined; this.b = undefined;
  }
  layoutAll(s) {
    super.layoutAll(s);
    if (this.layoutFunc) this.layoutFunc.call(this);
    var s1 = new LayoutState(s.totalWidth, s.totalHeight);
    var s2 = new LayoutState(s.totalWidth, s.totalHeight);
    s1.remainingX = s.remainingX; s1.remainingY = s.remainingY;
    s1.remainingWidth = s.remainingWidth; s1.remainingHeight = s.remainingHeight;
    s2.remainingX = s.remainingX; s2.remainingY = s.remainingY;
    s2.remainingWidth = s.remainingWidth; s2.remainingHeight = s.remainingHeight;
    if (this.a) { this.a.layoutAll(s1); }
    if (this.b) { this.b.layoutAll(s2); }
  }
  setRenderFlag(value) {
    super.setRenderFlag(true);
  }
  renderAll() {
    super.renderAll();
    if ((this.a && (this.a.needsRender || this.a.childRender)) || (this.b && (this.b.needsRender || this.b.childRender))) {
      this.b.renderAll(); this.a.renderAll(false);
    }
  }
  getHits(hitList, radius) {
    if (this.a) { this.a.getHits(hitList, radius); }
    if (this.b) { this.b.getHits(hitList, radius); }
  }
}
    class ViewMultiverse extends View {
      constructor(parent) {
        super(parent);
/*
        var g = this.gadgets = new Gadget(this);
        g.w = 10; g.h = 1000; //g.f = GF_RELH;
       // g.convexHull = g.computeHull([0,0, 0,1000, 10,1000, 10,0]);
        g.click = function() {
//console.log('click', this);
        }
        this.layoutFunc = function() {
          g.convexHull = g.computeHull([0,0, 0,this.h, 0,this.h, 0,0]);
        }
*/
        var g; this.gadgets.push(g = new Gadget(this));
        g.w = 10; g.h = 1000; //g.f = GF_RELH;
        g.convexHull = g.computeHull([50,50, 100,200, 200,200, 200,100]);
        g.click = function() {
//console.log('click', this);
        }

      }
     // layoutFunc() {
     // }
    }
class ViewPicker extends View {
  constructor(parent) {
    super(parent);
    var g; this.gadgets.push(g = new Gadget(this));
    g.w = 1000; g.h = 1000;
    g.convexHull = g.computeHull([0,0, 0,1000, 1000,1000, 1000,0]);
    g.click = function() {
//console.log('click', this);
    }
  }
}
    // Gadget Flags
    const GF_RELX = 1; // left edge of gadget is relative to right edge of viewport
    const GF_RELY = 2; // top edge of gadget is relative to bottom edge of viewport
    const GF_RELW = 4; // width is relative to viewport width
    const GF_RELH = 8; // height is relative to viewport height

    // Gadget Action Flags
    var GAF_CLICKABLE = 1; // whether this gadget can be clicked or tapped
    var GAF_HOLDABLE = 2; // whether it can be held down (invalid with GAF_CONTEXT_MENU)
    var GAF_CONTEXTMENU = 4; // whether this gadget can show a context menu
    var GAF_STRETCHABLE = 8; // whether this gadget can be stretched
    var GAF_DRAGGABLE_UPDOWN = 16; // whether this gadget can be dragged up or down
    var GAF_DRAGGABLE_LEFTRIGHT = 32; // whether this gadget can be dragged left or right
    var GAF_SWIPEABLE_UPDOWN = 64;
    var GAF_SWIPEABLE_LEFTRIGHT = 128;
    var GAF_SCROLLABLE_UPDOWN = 256;
    var GAF_SCROLLABLE_LEFTRIGHT = 512;
    var GAF_SCALABLE = 1024;
    var GAF_ROTATABLE = 2048;
    var GAF_DRAGGABLE = GAF_DRAGGABLE_UPDOWN | GAF_DRAGGABLE_LEFTRIGHT;
    var GAF_SWIPEABLE = GAF_SWIPEABLE_UPDOWN | GAF_SWIPEABLE_LEFTRIGHT;
    var GAF_SCROLLABLE = GAF_SCROLLABLE_UPDOWN | GAF_SCROLLABLE_LEFTRIGHT;
    var GAF_PINCHABLE = GAF_SCALABLE | GAF_ROTATABLE;
    var GAF_ALL = GAF_CLICKABLE | GAF_CONTEXTMENU | GAF_STRETCHABLE | GAF_DRAGGABLE | GAF_SCROLLABLE | GAF_PINCHABLE;
    var GAF_NUMINPUT = 4096;
    var GAF_TEXTINPUT = 8192;
    var GAF_GONEXT = 16384;
    class Gadget {
      constructor(viewport) {
        this.viewport = viewport;
        this.mat = mat4.create(); mat4.identity(this.mat);
        this.x = 0; this.y = 0; this.w = 0; this.h = 0; this.H = 0;
        this.convexHull = []; this.extendedHulls = {}; this.boundingBoxes = {};
        this.xo = 0; this.yo = 0;
        this.enabled = true;
        this.selected = false;
        this.actionFlags = 0;
      }
      getHits(hitList, radius) {
        if (!this.enabled || this.convexHull.length == 0) return;
        var v = this.viewport, matS = vec3.create(); mat4.getScaling(matS, v.userMat);
        var r = radius/v.getScale()/matS[0], key = ''+r;
        if (!(key in this.extendedHulls)) { this.computeExtendedHull(r); this.computeBoundingBox(r); }
        var h = this.extendedHulls[key], bb = this.boundingBoxes[key];

        // bounding box check
        var ss = 1/v.getScale();
        var rxy = vec3.create();
        rxy[0] = (hitList.x - v.x - this.x / ss);
        rxy[1] = (hitList.y - v.y - this.y / ss);
        var inv = mat4.create(); mat4.invert(inv, v.userMat);
        vec3.transformMat4(rxy, rxy, inv);
        var rx = rxy[0] * ss, ry = rxy[1] * ss;
        //var rx = (hitList.x - v.x - v.ox) * ss + v.userX - this.x - this.xo, ry = (hitList.y - v.y - v.oy) * ss + v.userY - this.y - this.yo;
        if (rx < bb.x1 || rx >= bb.x2 || ry < bb.y1 || ry >= bb.y2) return;

        // extended hull check
        function orient(ax,ay, bx,by, px,py) { return (bx-ax)*(py-ay) - (by-ay)*(px-ax); }
        var n = h.length;
        var flag = true;
        for (var i=0; i<n; i+=2) {
          var o = orient(h[i+0],h[i+1], h[(i+2)%n],h[(i+3)%n], rx,ry);
          if (o<0) flag = false;
        }
        if (!flag) return;

        // convex hull check
        var n = this.convexHull.length;
        var flag = true;
        for (var i=0; i<n; i+=2) {
          var o = orient(this.convexHull[i+0],this.convexHull[i+1], this.convexHull[(i+2)%n],this.convexHull[(i+3)%n], rx,ry);
          if (o<0) flag = false;
        }
        var d = 0; if (!flag) d = this.distToHull(rx, ry);
        hitList.hits.push({ gad: this, dist: d });
      }
			autoHull() {
				var g = this;
				g.convexHull = g.computeHull([0,0, g.w,0, g.w,g.h, 0,g.h]);
				g.extendedHulls = {}; g.boundingBoxes = {};
			}
      computeHull(points) {
        var S = [...points];
        var T = [];
        var a = 0, b = 0, ax = S[0], bx = S[0];
        for (var i = 0; i < ~~(S.length / 2); i++) {
          if (S[i*2] < ax) { ax = S[i*2]; a = i; }
          if (S[i*2] > bx) { bx = S[i*2]; b = i; }
        }
        T[T.length] = S[a*2+0]; T[T.length] = S[a*2+1];
        T[T.length] = S[b*2+0]; T[T.length] = S[b*2+1];
        S.splice(a*2, 2); if (b < a) S.splice(b*2, 2); else S.splice(b*2-2, 2);
        var S1 = [], S2 = [];
        function orient(ax,ay, bx,by, px,py) { return (bx-ax)*(py-ay) - (by-ay)*(px-ax); }
        for (var i = 0; i < ~~(S.length / 2); i++) {
          if (orient(points[a*2+0],points[a*2+1], points[b*2+0],points[b*2+1], S[i*2+0],S[i*2+1]) < 0) {
            S1[S1.length] = S[i*2+0]; S1[S1.length] = S[i*2+1]; } else { S2[S2.length] = S[i*2+0]; S2[S2.length] = S[i*2+1];
          }
        }
        function sqr(x) { return x * x }
        function dist2(vx,vy, wx,wy) { return sqr(vx - wx) + sqr(vy - wy) }
        function distToSegmentSquared(px,py, vx,vy, wx,wy) {
          var l2 = dist2(vx,vy, wx,wy);
          if (l2 == 0) return dist2(px,py, vx,vy);
          var t = ((px - vx) * (wx - vx) + (py - vy) * (wy - vy)) / l2;
          t = Math.max(0, Math.min(1, t));
          return dist2(px,py, vx + t * (wx - vx), vy + t * (wy - vy));
        }
        function distToSegment(px,py, vx,vy, wx,wy, ddd) { return Math.sqrt(distToSegmentSquared(px,py, vx,vy, wx,wy)); }
        function recurse(T, Sk, Px,Py, Qx,Qy) {
          if (Sk.length < 2) return;
          var p = 0, pd = 0;
          for (var i = 0; i < ~~(Sk.length/2); i++) {
            var d = distToSegment(Sk[i*2+0],Sk[i*2+1], Px,Py, Qx,Qy);
            if (d > pd) { pd = d; p = i; }
          }
          var Cx = Sk[p*2+0], Cy = Sk[p*2+1];
          Sk.splice(p*2, 2);
          for (i = 0; i < ~~(T.length/2); i++) {
            if ((T[i*2+0] == Px && T[i*2+1] == Py && T[(i*2+2)%T.length] == Qx && T[(i*2+3)%T.length] == Qy)
            ||  (T[i*2+0] == Qx && T[i*2+1] == Qy && T[(i*2+2)%T.length] == Px && T[(i*2+3)%T.length] == Py)) {
              T.splice(i*2+2, 0, Cx,Cy); break;
            }
          }
          var S1 = [], S2 = [];
          for (var i = 0; i < ~~(Sk.length / 2); i++) {
            if (orient(Px,Py, Cx,Cy, Sk[i*2+0],Sk[i*2+1]) < 0) {
              S1[S1.length] = Sk[i*2+0]; S1[S1.length] = Sk[i*2+1];
            } // else { S2[S2.length] = Sk[i*2+0]; S2[S2.length] = Sk[i*2+1]; }
            if (orient(Cx,Cy, Qx,Qy, Sk[i*2+0],Sk[i*2+1]) < 0) {
              S2[S2.length] = Sk[i*2+0]; S2[S2.length] = Sk[i*2+1];
            } // else { S2[S2.length] = Sk[i*2+0]; S2[S2.length] = Sk[i*2+1]; }
          }
          recurse(T, S1, Px,Py, Cx,Cy);
          recurse(T, S2, Cx,Cy, Qx,Qy);
        }
        recurse(T, S1, points[a*2+0],points[a*2+1], points[b*2+0],points[b*2+1]);
        recurse(T, S2, points[b*2+0],points[b*2+1], points[a*2+0],points[a*2+1]);
        var flag = 1;
        while(flag) {
          flag = 0;
          for (var i = 0; i < ~~(T.length/2); i++) {
            if (distToSegment(T[(i*2+2)%T.length],T[(i*2+3)%T.length], T[i*2+0],T[i*2+1], T[(i*2+4)%T.length],T[(i*2+5)%T.length]) < 0.01) {
              T.splice(i*2+2, 2); flag = 1; break;
            }
          }
        }
        var newPoints = this.sortHull(T);
        return newPoints;
      }
      sortHull(points) {
        var r = [];
        var cx = 0,cy = 0, l = points.length; for (var i = 0; i < l; i+=2) { cx += points[i+0]; cy += points[i+1]; } cx /= l/2; cy /= l/2;
        var ax = cx+102, ay = cy + 1;
        function angle(i) {
          var bx = points[i+0], by = points[i+1];
          var a = Math.atan2(by - cy, bx - cx) - Math.atan2(ay - cy, ax - cx);
          while (a >  Math.PI) a -= 2*Math.PI;
          while (a < -Math.PI) a += 2*Math.PI;
          return a;
        }
        while (points.length > 0) {
          var best = 0, a = angle(0);
          for (var i = 0; i < points.length; i+=2) {
            if (angle(i) < a) { best = i; a = angle(i); }
          }
          r.push(points[best+0]); r.push(points[best+1]); points.splice(best, 2);
        }
        return r;
      }
      computeExtendedHull(radius) {
        var hull = [];
        var j=0, n=this.convexHull.length;
        for (var i=0; i<n; i+=2) {
          var ex = (this.convexHull[(i+3)%n]-this.convexHull[i+1]); // perpendicular extension vector
          var ey =-(this.convexHull[(i+2)%n]-this.convexHull[i+0]);
          var s = radius / Math.sqrt(ex*ex + ey*ey); // amount of side extension
          hull[j+0] = this.convexHull[i+0] + ex*s;
          hull[j+1] = this.convexHull[i+1] + ey*s;
          j+=2;
          hull[j+0] = this.convexHull[(i+2)%n] + ex*s;
          hull[j+1] = this.convexHull[(i+3)%n] + ey*s;
          j+=2;
        }
        for (var i=0; i<n; i+=2) {
          var v1x = this.convexHull[(i+2)%n] - this.convexHull[i+0], v1y = this.convexHull[(i+3)%n] - this.convexHull[i+1]; // corner edge vectors
          var v2x = this.convexHull[(i-2+n)%n] - this.convexHull[i+0], v2y = this.convexHull[(i-1+n)%n] - this.convexHull[i+1];
          var d = v1x * v2x + v1y * v2y;
          var m1 = Math.sqrt(v1x*v1x + v1y*v1y);
          var m2 = Math.sqrt(v2x*v2x + v2y*v2y);
          var a = Math.acos(d / (m1 * m2)); // corner angle
          var b = (Math.PI - a) / 4;
          var o = Math.tan(b) * radius // amount of corner extension

          j = i*2;
          v1x = hull[j+0] - hull[j+2];
          v1y = hull[j+1] - hull[j+3];
          m1 = Math.sqrt(v1x*v1x + v1y*v1y);
          v1x = v1x * (m1 + o) / m1;
          v1y = v1y * (m1 + o) / m1;
          hull[j+0] = v1x + hull[j+2];
          hull[j+1] = v1y + hull[j+3];

          j = ((i-2+n)%n)*2;
          v1x = hull[j+2] - hull[j+0];
          v1y = hull[j+3] - hull[j+1];
          m1 = Math.sqrt(v1x*v1x + v1y*v1y);
          v1x = v1x * (m1 + o) / m1;
          v1y = v1y * (m1 + o) / m1;
          hull[j+2] = v1x + hull[j+0];
          hull[j+3] = v1y + hull[j+1];
        }
        this.extendedHulls[''+radius] = hull;
      }
      computeBoundingBox(radius) {
        this.boundingBoxes[''+radius] = { };
        var h = this.extendedHulls[''+radius], bb = this.boundingBoxes[''+radius];
        if (h.length < 2) return;
        bb.x1 = h[0]; bb.x2 = h[0];
        bb.y1 = h[1]; bb.y2 = h[1];
        for (var i=2; i<h.length; i+=2) {
          if (h[i+0] < bb.x1) bb.x1 = h[i+0];
          if (h[i+0] > bb.x2) bb.x2 = h[i+0];
          if (h[i+1] < bb.y1) bb.y1 = h[i+1];
          if (h[i+1] > bb.y2) bb.y2 = h[i+1];
        }
      }
      distToHull(x,y) {
        function sqr(x) { return x * x }
        function dist2(vx,vy, wx,wy) { return sqr(vx - wx) + sqr(vy - wy) }
        function distToSegmentSquared(px,py, vx,vy, wx,wy) {
          var l2 = dist2(vx,vy, wx,wy);
          if (l2 == 0) return dist2(px,py, vx,vy);
          var t = ((px - vx) * (wx - vx) + (py - vy) * (wy - vy)) / l2;
          t = Math.max(0, Math.min(1, t));
          return dist2(px,py, vx + t * (wx - vx), vy + t * (wy - vy));
        }
        function distToSegment(px,py, vx,vy, wx,wy) { return Math.sqrt(distToSegmentSquared(px,py, vx,vy, wx,wy)); }
        var h = this.convexHull;
        var d = distToSegment(x,y, h[0],h[1], h[2],h[3]);
        for (var i=2; i<h.length; i+=2) {
          var t = distToSegment(x,y, h[i+0],h[i+1], h[(i+2)%h.length],h[(i+3)%h.length]);
          if (t<d) d=t;
        }
        return d;
      }
    }
class MiddleDividerGadget extends Gadget {
	constructor(viewport) {
		super(viewport);
		this.dragBeginFunc = function(p) {
			this.tempX = p.ox - this.viewport.x;
			this.tempY = p.oy - this.viewport.y;
		}
		this.dragMoveFunc = function(p) {
			var v = this.viewport.parent, h=(v.state == 'h');
			var a = h?
				p.y - this.tempY - v.a.y:
				p.x - this.tempX - v.a.x;
			var b = h?
				v.y + v.h - (p.y - this.tempY + this.viewport.h):
				v.x + v.w - (p.x - this.tempX + this.viewport.w);
			v.ratio = Math.max(0, Math.min(1, a/(a+b)));
			if (!v.setPoint) v.setPoint = {};
			v.setPoint[v.state] = v.ratio;
			if (layoutViews.indexOf(this.viewport.parent) === -1)
				layoutViews.push(this.viewport.parent);
		}
		this.dragEndFunc = function(p) { delete this.tempX; delete this.tempY; }
	}
	layout() {
		var g = this, v=this.viewport, x,y, s=v.getScale(), t=v.parent.size;
		var h=(v.parent.state == 'h');
		x = h?Math.max(1,v.w)/s:t;
		y = h?t:Math.max(1,v.h)/s;
		g.actionFlags = h?vp.GAF_DRAGGABLE_UPDOWN:vp.GAF_DRAGGABLE_LEFTRIGHT;
		g.convexHull = g.computeHull([0,0, 0,y, x,y, x,0]); g.extendedHulls = {}; g.boundingBoxes = {};
	}
}
    class MatrixGadget extends Gadget {
      getTargetMat() {
        return this.targetGad? this.targetGad.mat: this.targetView.userMat;
      }
      constructor(viewport) {
        super(viewport);
        this.targetView = viewport;
        this.targetGad = undefined;

        /** DRAG **/
        this.dragBeginFunc = function(p) {
          var g = this, v = g.targetView;
          g.grab1b = vec3.create(); g.grab1b[0] = p.x-v.x; g.grab1b[1] = p.y-v.y;
          g.viewMat = mat4.create(); mat4.copy(g.viewMat, v.userMat);
          g.grabMat = mat4.create(); mat4.copy(g.grabMat, g.getTargetMat());
          if (1) {
            const vi = mat4.create(); mat4.invert(vi, g.viewMat);
            vec3.transformMat4(g.grab1b, g.grab1b, vi);
          }
          if (this.targetGad) {
            const gi = mat4.create(); mat4.invert(gi, g.grabMat);
            vec3.transformMat4(g.grab1b, g.grab1b, gi);
          }
        }
        this.dragMoveFunc = function(p) {
          var g = this, v = g.targetView;
          var g1b = vec3.create(); g1b[0] = p.x-v.x; g1b[1] = p.y-v.y;
          if (1) {
            const vi = mat4.create(); mat4.invert(vi, g.viewMat);
            vec3.transformMat4(g1b, g1b, vi);
          }
          if (this.targetGad) {
            const gi = mat4.create(); mat4.invert(gi, g.grabMat);
            vec3.transformMat4(g1b, g1b, gi);
          }
          var delta = vec3.create(); vec3.subtract(delta, g1b, g.grab1b);
          if (this.targetGad) vec3.scale(delta, delta, 1/v.getScale());
          mat4.translate(g.getTargetMat(), g.grabMat, delta);
          v.rematrix(); v.setRenderFlag(true);
        }
        this.dragEndFunc = function(p) {
          var g = this, v = g.targetView;
          delete g.grab1b;
          delete g.viewMat; delete g.grabMat;
          v.setRenderFlag(true);
        }

        /** PINCH **/
        this.pinchBeginFunc = function(p1, p2) {
          var g = this, v = g.targetView;
          g.grab1 = vec3.create(); g.grab1[0] = p1.x-v.x; g.grab1[1] = p1.y-v.y;
          g.grab2 = vec3.create(); g.grab2[0] = p2.x-v.x; g.grab2[1] = p2.y-v.y;
          g.viewMat = mat4.create(); mat4.copy(g.viewMat, v.userMat);
          g.grabMat = mat4.create(); mat4.copy(g.grabMat, g.getTargetMat());
          //vec3.scale(g.grab1, g.grab1, 1/v.getScale());
          //vec3.scale(g.grab2, g.grab2, 1/v.getScale());
          g.grabC = vec3.create();
          g.grab1b = vec3.create(); vec3.copy(g.grab1b, g.grab1);
          g.grab2b = vec3.create(); vec3.copy(g.grab2b, g.grab2);
          g.grabCb = vec3.create();
          if (1) {
            const vi = mat4.create(); mat4.invert(vi, g.viewMat);
            vec3.transformMat4(g.grab1b, g.grab1b, vi);
            vec3.transformMat4(g.grab2b, g.grab2b, vi);
          }
          if (this.targetGad) {
            const gi = mat4.create(); mat4.copy(gi, g.grabMat); //mat4.invert(gi, g.grabMat);
            vec3.transformMat4(g.grab1b, g.grab1b, gi);
            vec3.transformMat4(g.grab2b, g.grab2b, gi);
          }
          for (var i=0; i<3; i++) { g.grabC[i] = (g.grab1[i] + g.grab2[i]) / 2; g.grabCb[i] = (g.grab1b[i] + g.grab2b[i]) / 2; }
          var x = g.grab2[0]-g.grab1[0], y = g.grab2[1]-g.grab1[1];
          g.grabA = Math.atan2(y, x);
          g.grabM = Math.sqrt(x*x + y*y);
        }
        this.pinchMoveFunc = function(p1, p2) {
          var g = this, v = g.targetView;
          var g1 = vec3.create(); g1[0] = p1.x-v.x; g1[1] = p1.y-v.y;
          var g2 = vec3.create(); g2[0] = p2.x-v.x; g2[1] = p2.y-v.y;
          //vec3.scale(g1, g1, 1/v.getScale());
          //vec3.scale(g2, g2, 1/v.getScale());
          var gC = vec3.create();
          var g1b = vec3.create(), g2b = vec3.create(), gCb = vec3.create();
          vec3.copy(g1b, g1); vec3.copy(g2b, g2);
          if (1) {
            const vi = mat4.create(); mat4.invert(vi, g.viewMat);
            vec3.transformMat4(g1b, g1b, vi);
            vec3.transformMat4(g2b, g2b, vi);
          }
          if (this.targetGad) {
            const gi = mat4.create(); mat4.copy(gi, g.grabMat); //mat4.invert(gi, g.grabMat);
            vec3.transformMat4(g1b, g1b, gi);
            vec3.transformMat4(g2b, g2b, gi);
          }
          for (var i=0; i<3; i++) { gC[i] = (g1[i] + g2[i]) / 2; gCb[i] = (g1b[i] + g2b[i]) / 2; }
          var x = g2[0]-g1[0], y = g2[1]-g1[1];
          var gA = Math.atan2(y, x);
          var gM = Math.sqrt(x*x + y*y);

          //const vi = mat4.create(); mat4.invert(vi, v.userMat);

          const m = mat4.create(); mat4.copy(m, g.grabMat);
          if (!this.targetGad) {
            if (g.actionFlags & vp.GAF_DRAGGABLE) mat4.translate(m, m, [gCb[0], gCb[1], 0]);
            else mat4.translate(m, m, [g.grabCb[0], g.grabCb[1], 0]);
            if (g.actionFlags & vp.GAF_SCALABLE) mat4.scale(m, m, [gM/g.grabM,gM/g.grabM,1]);
            if (g.actionFlags & vp.GAF_ROTATABLE) mat4.rotate(m, m, gA-g.grabA, [0,0,1]);
            mat4.translate(m, m, [-g.grabCb[0], -g.grabCb[1], 0]);
            v.rematrix(); v.setRenderFlag(true);
          } else {
            if (g.actionFlags & vp.GAF_DRAGGABLE) mat4.translate(m, m, [gCb[0]/v.getScale(), gCb[1]/v.getScale(), 0]);
            else mat4.translate(m, m, [g.grabCb[0]/v.getScale(), g.grabCb[1]/v.getScale(), 0]);
            if (g.actionFlags & vp.GAF_SCALABLE) mat4.scale(m, m, [gM/g.grabM,gM/g.grabM,1]);
            if (g.actionFlags & vp.GAF_ROTATABLE) mat4.rotate(m, m, gA-g.grabA, [0,0,1]);
            mat4.translate(m, m, [-g.grabCb[0]/v.getScale(), -g.grabCb[1]/v.getScale(), 0]);
            v.rematrix(); v.setRenderFlag(true);
          }
          mat4.copy(g.getTargetMat(), m);
        }
        this.pinchEndFunc = function(p1, p2) {
          var g = this, v = g.targetView;
          delete g.grab1; delete g.grab1b;
          delete g.grab2; delete g.grab2b;
          delete g.grabC; delete g.grabCb;
          delete g.grabA; delete g.grabM; delete g.grabMat;
        }
        this.zoomFunc = function(p, z) {
          const g = this, v = g.targetView, m = this.getTargetMat();
          const q = vec3.create(); if (!!(g.actionFlags & vp.GAF_DRAGGABLE)) { q[0] = p.x-v.x; q[1] = p.y-v.y; }
          else { mat4.getTranslation(q, m); }
          const ui = mat4.create(); mat4.invert(ui, m);
          vec3.transformMat4(q, q, ui);
          mat4.translate(m, m, [q[0], q[1], 0]);
          mat4.scale(m, m, [Math.exp(z/10), Math.exp(z/10), 1]);
          mat4.translate(m, m, [-q[0], -q[1], 0]);
          v.rematrix(); v.setRenderFlag(true);
        }
        this.rotateFunc = function(p, z) {
          const g = this, v = g.targetView, m = this.getTargetMat();
          const q = vec3.create(); if (!!(g.actionFlags & vp.GAF_DRAGGABLE)) { q[0] = p.x-v.x; q[1] = p.y-v.y; }
          else { mat4.getTranslation(q, m); }
          const ui = mat4.create(); mat4.invert(ui, m);
          vec3.transformMat4(q, q, ui);
          mat4.translate(m, m, [q[0], q[1], 0]);
          mat4.rotate(m, m, -Math.PI/18*z, [0, 0, 1]);
          mat4.translate(m, m, [-q[0], -q[1], 0]);
          v.rematrix(); v.setRenderFlag(true);
        }
      }
      getHits(hitList, radius) {
        if (!this.enabled) return;
        if (this.convexHull.length == 0)
          hitList.hits.push({ gad: this, dist: 0 });
        else super.getHits(hitList, radius);
      }
      layout() {
        var g = this; v = g.viewport;
        console.log('MatrixGadget::layout()');
      }
    }
class SwipeGadget extends Gadget {
	constructor(viewport) {
		super(viewport);
		this.actionFlags = vp.GAF_SWIPEABLE_UPDOWN | vp.GAF_SCROLLABLE_UPDOWN;
		this.flingFar = false;
		this.followUp = false; this.animState = '';
		this.doSwipe = function(next, snapIndex = undefined) {
			var g = this, v = g.viewport;
			var index; if (snapIndex !== undefined) index = clamp(snapIndex, 0, v.snaps.length);
			if (g.actionFlags & vp.GAF_SWIPEABLE_UPDOWN | vp.GAF_SCROLLABLE_UPDOWN) {
				v.tempVX = next? -0.001: 0.001;
				v.tempVY = 0;
				v.userX = v.userX - v.tempVX;
			} else {
				v.tempVX = 0;
				v.tempVY = next? -0.001: 0.001;
				v.userY = v.userY - v.tempVY;
			}
			g.followUp = false;
			v.relayout();
			v.setRenderFlag(true);
			g.swipeEndFunc(undefined, snapIndex !== undefined? v.snaps[index] : undefined);
		}
		this.swipeBeginFunc = function(p) {
			var v = this.viewport, s = v.getScale();
			this.tempX = (p.ox - v.x - v.ox)/s + v.userX;
			this.tempY = (p.oy - v.y - v.oy)/s + v.userY;
			this.followUp = false;
		}
		this.swipeMoveFunc = function(p) {
			const clamp = (num, min, max) => Math.min(Math.max(num, min), max);
			var v = this.viewport, s = v.getScale(), dx=0, dy=0, k=1, m=1;
			var minX = v.minX, maxX = Math.max(v.maxX - v.sw, minX);
			var minY = v.minY, maxY = Math.max(v.maxY - v.sh, minY);
			switch (this.actionFlags & vp.GAF_SWIPEABLE) {
			case vp.GAF_SWIPEABLE_UPDOWN:
				dy = (p.y - v.y - v.oy)/s + v.userY - this.tempY;
				//v.userY = clamp(clamp(v.userY - dy - v.oy/s, minY, maxY) + v.oy/s, minY, maxY);
				v.userY = clamp(v.userY - dy, minY, maxY);
				v.rematrix(); this.layout();
				v.tempVX = 0; v.tempVY = p.dy;
				break;
			case vp.GAF_SWIPEABLE_LEFTRIGHT:
				dx = (p.x - v.x - v.ox)/s + v.userX - this.tempX;
				//v.userX = clamp(clamp(v.userX - dx - v.ox/s, minX, maxX) + v.ox/s, minX, maxX);
				v.userX = clamp(v.userX - dx, minX, maxX);
				v.rematrix(); this.layout();
				v.tempVX = p.dx; v.tempVY = 0;
				break;
			case vp.GAF_SWIPEABLE_UPDOWN | vp.GAF_SWIPEABLE_LEFTRIGHT:
				dx = (p.x - v.x - v.ox)/s + v.userX - this.tempX;
				dy = (p.y - v.y - v.oy)/s + v.userY - this.tempY;
				//v.userX = clamp(clamp(v.userX - dx - v.ox/s, minX, maxX) + v.ox/s, minX, maxX);
				//v.userY = clamp(clamp(v.userY - dy - v.oy/s, minY, maxY) + v.oy/s, minY, maxY);
				v.userX = clamp(v.userX - dx, minX, maxX);
				v.userY = clamp(v.userY - dy, minY, maxY);
				v.rematrix(); this.layout();
				v.tempVX = p.dx; v.tempVY = p.dy;
				break;
			}
			this.followUp = false;
			v.relayout();
			v.setRenderFlag(true);
		}
		this.swipeEndFunc = function(p, restingPoint) {
			var g = this, v = g.viewport;
			function calcRestingPoint(o, r) {
				var s = v.getScale(), x = o[0], y = o[1], dx = r[0], dy = r[1], m, n;
				m = Math.sqrt(dx*dx + dy*dy);
				n = Math.floor(m * 10);
				var rem = (m * 10 - n) / 10;
				var sum = (n+1)*n / 2;
				if (m > 0) {
					x -= dx / m * (sum/10 + rem*n) * 1000/30 / s;
					y -= dy / m * (sum/10 + rem*n) * 1000/30 / s;
				}
				return [x, y];
			}
			function calcNextPoint(o, r, snaps) {
				var a = vec2.fromValues(o[0], o[1]), b = vec2.fromValues(-r[0], -r[1]);
				vec2.normalize(b, b);
				var a1 = vec2.dot(a, b);
				var bestd = 'unset', best, snap;
				if (snaps) for (snap of snaps) {
					var c = vec2.fromValues(snap[0], snap[1])
					var c1 = vec2.dot(c, b);
					var d = c1 - a1;
					if (d >= 0 && (bestd == 'unset' || d < bestd)) { bestd = d; best = snap; }
				}
				if (bestd != 'unset') return best;
				if (snaps) for (snap of snaps) {
					var c = vec2.fromValues(snap[0], snap[1])
					var c1 = vec2.dot(c, b);
					var d = Math.abs(c1 - a1);
					if (bestd == 'unset' || (d < bestd)) { bestd = d; best = snap; }
				}
				return best;
			}
			function calcNeededVelocity(d) {
				var s = v.getScale(), x, y;
				var f = d[0]<0? 1: -1;
				x = (-0.5 + f * Math.sqrt(0.25 - f * 4*5*d[0] * s * 30/1000) / 2/5);
				y = 0;//(-0.5 + Math.sqrt(0.25 - 4*5*d[0] * s * 30/1000) / 2/5);
				return [x, y];
			}
			function findNearest(s, t) {
				var b = 'unset', best, snap;
				if (t) for (snap of t) {
					var d = Math.sqrt((s[0]-snap[0])**2 + (s[1]-snap[1])**2);
					if (b == 'unset' || d < b) { b = d; best = snap; }
				}
				return best;
			}
			function outOfBounds(p, a) {
				var s = a.getScale();
				//var minX = Math.max(a.minX + a.w/s, a.maxX) - a.w/s, maxX = Math.min(a.maxX - a.w/s, a.minX);
				//var minY = Math.max(a.minY + a.h/s, a.maxY) - a.h/s, maxY = Math.min(a.maxY - a.h/s, a.minY);
				var minX = a.minX;
				var minY = a.minY;
				var maxX = a.maxX;
				var maxY = a.maxY;
				//if (maxX < minX) { var t=minX; minX=maxX; maxX=t; }
				//if (maxY < minY) { var t=minY; minY=maxY; maxY=t; }
				return p[0] - a.ox/s < minX || p[0] - a.ox/s > maxX || p[1] - a.oy/s < minY || p[1] - a.oy/s > maxY;
			}

			// This avoids the edge case of a motionless release.
			if (Math.abs(v.tempVX) < 0.001 && (g.actionFlags & vp.GAF_SWIPEABLE_LEFTRIGHT))
				v.tempVX = 0.001;
			if (Math.abs(v.tempVY) < 0.001 && (g.actionFlags & vp.GAF_SWIPEABLE_UPDOWN))
				v.tempVY = 0.001;

			delete this.tempX; delete this.tempY;
			this.targetRest = undefined;
			this.inflect = false;
			this.animState = 'decel';
			if (v.snaps && v.snaps.length > 0) {
				var xy;
				if (g.flingFar)
					xy = calcRestingPoint([v.userX, v.userY], [v.tempVX, v.tempVY]);
				else
					xy = calcNextPoint([v.userX, v.userY], [v.tempVX, v.tempVY], v.snaps);
				var nxy = findNearest(xy, v.snaps);
				this.targetRest = restingPoint? restingPoint : nxy;
				//if (nxy[0] < v.userX) v.whenLessX = true; else v.whenLessX = false;
				//if (nxy[1] < v.userY) v.whenLessY = true; else v.whenLessY = false;
				if (nxy[0] < v.userX && v.tempVX > 0) this.animState = 'accel';
				if (nxy[0] > v.userX && v.tempVX < 0) this.animState = 'accel';
				if (nxy[1] < v.userY && v.tempVY > 0) this.animState = 'accel';
				if (nxy[1] > v.userY && v.tempVY < 0) this.animState = 'accel';
			}
			v.origVX = v.tempVX;
			v.origVY = v.tempVY;
			v.newX = v.userX;
			v.newY = v.userY;
      v.magOrig = Math.sqrt(v.tempVX * v.tempVX + v.tempVY * v.tempVY);
      v.magCur = v.magOrig;
			this.followUp = true;
			this.viewport.requeueLayout();
		}
		this.followUpFunc = function() {
			if (!this.followUp) return;
			var g = this, v = g.viewport;
			switch (g.animState) {
			case 'decel':
				if (g.coast(false)) g.animState = 'done';
				break;
			case 'accel':
				if (g.coast(true)) g.animState = 'done';
				break;
			default:
				g.followUp = false;
			}
			v.requeueLayout();
		}
		this.coast = function(accel) {
			var g = this, v = g.viewport;
			var a = v;
      var s = a.getScale();
			var minX = v.minX, maxX = Math.max(v.maxX - v.sw, minX);
			var minY = v.minY, maxY = Math.max(v.maxY - v.sh, minY);
      var newX = v.newX - (v.tempVX * 1000/30 / s /*- fx*/);
      var newY = v.newY - (v.tempVY * 1000/30 / s /*- fy*/);
			if (g.targetRest && (accel || g.inflect)) {
				if (Math.sign(newX - g.targetRest[0]) != Math.sign(v.newX - g.targetRest[0])
				||  Math.sign(newY - g.targetRest[1]) != Math.sign(v.newY - g.targetRest[1])) {
					delete v.newX; delete v.newY;
					delete v.tempVX; delete v.tempVY;
					delete v.origVX; delete v.origVY;
					delete v.magOrig; delete v.magCur;
					v.userX = g.targetRest[0];
					v.userY = g.targetRest[1];
					return true;
				}
			}
			v.newX = newX;
			v.newY = newY;
			v.userX = clamp(newX, minX, maxX);
			v.userY = clamp(newY, minY, maxY);
			var magCur = accel ? v.magCur + 0.1 : v.magCur - 0.1;
			if (g.animState == 'decel' && Math.sign(magCur) != Math.sign(v.magCur)) {
				if (g.targetRest) {
					g.inflect = true;
				} else {
					delete v.newX; delete v.newY;
					delete v.tempVX; delete v.tempVY;
					delete v.origVX; delete v.origVY;
					delete v.magOrig; delete v.magCur;
					return true;
				}
			}
			v.magCur = magCur;
      v.tempVX = v.origVX / v.magOrig * v.magCur;
      v.tempVY = v.origVY / v.magOrig * v.magCur;
			return false;
		}
	}
	layout() {
		var g=this, v=g.viewport;
		g.convexHull = g.computeHull([
			Math.min(v.minX, 0), Math.min(v.minY, 0),
			Math.min(v.minX, 0), Math.max(v.maxY, v.sh),
			Math.max(v.maxX, v.sw), Math.max(v.maxY, v.sh),
			Math.max(v.maxX, v.sw), Math.min(v.minY, 0)]);
		g.extendedHulls = {}; g.boundingBoxes = {};
		v.userX = clamp(v.userX, v.minX, Math.max(v.maxX - v.sw, v.minX));
		v.userY = clamp(v.userY, v.minY, Math.max(v.maxY - v.sh, v.minY));
		if (g.followUp && g.followUpFunc) g.followUpFunc.call(g);
	}
}
var inputSelected;

function endInput() {
	inputSelected = false;
	if (!inputGad) return;
	var g = inputGad;
	if (g.actionFlags & vp.GAF_NUMINPUT) el = kbnum;
	if (g.actionFlags & vp.GAF_TEXTINPUT) el = kbalpha;
	el.blur();
	el.style.display = 'none';
	inputGad = undefined;
}

function beginInput(g) {
	endInput();
	inputGad = g;
	if (g.textBeginFunc) g.textBeginFunc.call(g);
	if (g.actionFlags & vp.GAF_GONEXT) {
		kbnext.style.display = 'inline';
		kbprev.style.display = 'inline';
	}
	if (g.actionFlags & vp.GAF_NUMINPUT) el = kbnum;
	if (g.actionFlags & vp.GAF_TEXTINPUT) el = kbalpha;
	el.value = g.text;
	el.style.display = 'inline';
	el.focus();
	el.select();
	inputSelected = true;
}

  function useProg() {
    gl.useProgram(plainProgram);
    gl.bindBuffer(gl.ARRAY_BUFFER, buf2);
    var a = gl.getAttribLocation(plainProgram, 'aVertexPosition')
    gl.vertexAttribPointer(
	a,
	2, // numComponents
	gl.FLOAT, // type
	false, // normalize
	0, // stride
	0); // offset
    gl.enableVertexAttribArray(a);
  }


rootViewport = new ViewPicker();
var refresherTimeStamp = -1, refresherFrame = 0;
var v=0, continuous=0, nframes=0, showdebug=0;
function refresher(timeStamp) {
	if (timeStamp != refresherTimeStamp) {
		var delta=0;
		if (refresherTimeStamp > 0) delta = timeStamp - refresherTimeStamp;
		refresherTimeStamp = timeStamp;

//if (delta < 10) console.log(delta);

		const todoViews = []; var lv;
		while (lv = layoutViews.pop()) todoViews.push(lv);
		if (layoutSignal) {
			layoutSignal = false;
			gl.viewport(0, 0, canvas.width, canvas.height);
			mat4.identity(pixelPM);
			mat4.translate(pixelPM, pixelPM, [-1, 1, 0]);
			mat4.scale(pixelPM, pixelPM, [2/canvas.width, -2/canvas.height, 1]);
			if (rootViewport) {
				var s = new vp.LayoutState(canvas.width, canvas.height);
				rootViewport.layoutAll(s);
			}
		} else while (lv = todoViews.pop()) lv.relayout();

      if (nframes) {
				nframes -= 1;
				if (!nframes) rootViewport.setRenderFlag(true);
			}
      if (continuous) rootViewport.setRenderFlag(true);
      if (rootViewport && (rootViewport.needsRender || rootViewport.childRender)) {
        //gl.viewport(0, 0, canvas.width, canvas.height);
        //gl.disable(gl.SCISSOR_TEST);
        //gl.clearColor(v,0,0,1); v+=delta*0.001; if(v>1) v=0;
        //gl.clear(gl.COLOR_BUFFER_BIT);


        var windspeed = 0;
        for (const [key, pointer] of Object.entries(pointers)) {
          pointer.dx = (pointer.x - pointer.px)/delta; pointer.px = pointer.x;
          pointer.dy = (pointer.y - pointer.py)/delta; pointer.py = pointer.y;
          windspeed += Math.sqrt(pointer.dx*pointer.dx + pointer.dy*pointer.dy)/diagonal;
        }
        if (windSound) windSound.setValueAtTime(windspeed, ac.currentTime);

				if (debug1 && !continuous) {
					if (nframes)
						console.log('rootViewport.renderAll()', nframes? 'n = '+nframes:'');
					else
						console.log('rootViewport.renderAll()');
				}
        rootViewport.renderAll();

if (showdebug) {
        gl.viewport(0, 0, canvas.width, canvas.height);
        gl.disable(gl.SCISSOR_TEST);
        useProg();
        gl.enable(gl.BLEND);

        gl.uniform4fv(gl.getUniformLocation(plainProgram, 'uVertexColor'), new Float32Array([1, 1, 1, 1]));
        gl.uniformMatrix4fv(gl.getUniformLocation(plainProgram, 'uProjectionMatrix'), false, pixelPM);

        const mat = mat4.create();

        if (continuous) {

        // Get a list of active gadgets.
        var gads = [];
        for (const [key, pointer] of Object.entries(pointers)) if (pointer.hitList) {
          var gs = pointer.hitList.getActionableGads(vp.GAF_ALL);
          for (const g of gs) {
            if (!gads.includes(g)) gads.push(g);
          }
        }

        // Show active gadgets.
        for (const g of gads) {
          /*
          mat4.identity(mat);
          mat4.translate(mat, mat, [g.x, g.y, 0]);
          mat4.scale(mat, mat, [g.w, g.h, 0]);
          gl.uniformMatrix4fv(
            gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
            false, mat);
          gl.drawArrays(gl.LINE_LOOP, beg2.unitSquare, len2.unitSquare);
          */
          if (g.ownedBy) switch (g.gestureState) {
          //case 'begin-tap':
          //case 'begin-click':
          //case 'recover-click':
          //case 'drag':
          default:
            var h = g.convexHull;
            for (p = 0; p < h.length; p += 2) {
              mat4.fromTranslation(mat, [g.viewport.x, g.viewport.y, 0]);
              mat4.mul(mat, mat, g.viewport.userMat);
             // mat4.translate(mat, mat, [g.viewport.x + g.viewport.ox, g.viewport.y + g.viewport.oy, 0]);
              mat4.scale(mat, mat, [g.viewport.getScale(), g.viewport.getScale(), 1]);
              mat4.translate(mat, mat, [g.x+h[p+0] - g.viewport.userX, g.y+h[p+1] - g.viewport.userY, 0]);
              mat4.scale(mat, mat, [h[(p+2)%h.length]-h[p+0], h[(p+3)%h.length]-h[p+1], 1]);
              gl.uniformMatrix4fv(
                gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
                false, mat);
              gl.drawArrays(gl.LINE_LOOP, beg2.unitLine, len2.unitLine);
            }
            var matS = vec3.create(); mat4.getScaling(matS, g.viewport.userMat);
/*
            for (const k in g.extendedHulls) if (k == ''+(getPointerRadius()/g.viewport.getScale()/matS[0])) {
              var h=g.extendedHulls[k];
              for (p = 0; p < h.length; p += 2) {
                mat4.fromTranslation(mat, [g.viewport.x, g.viewport.y, 0]);
                mat4.mul(mat, mat, g.viewport.userMat);
              //  mat4.translate(mat, mat, [g.viewport.x + g.viewport.ox, g.viewport.y + g.viewport.oy, 0]);
                mat4.scale(mat, mat, [g.viewport.getScale(), g.viewport.getScale(), 1]);
                mat4.translate(mat, mat, [g.x+h[p+0] - g.viewport.userX, g.y+h[p+1] - g.viewport.userY, 0]);
                mat4.scale(mat, mat, [h[(p+2)%h.length]-h[p+0], h[(p+3)%h.length]-h[p+1], 0]);
                gl.uniformMatrix4fv(
                  gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
                  false, mat);
                gl.drawArrays(gl.LINE_LOOP, beg2.unitLine, len2.unitLine);
              }
            }
*/
            break;
          }

        }

        for (const [key, pointer] of Object.entries(pointers)) {
          // pointer circle
          mat4.identity(mat);
          mat4.translate(mat, mat, [pointer.x, pointer.y, 0]);
          gl.uniformMatrix4fv(
            gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
            false, mat);
          if (pointer.e.pointerType == 'mouse') {
            gl.drawArrays(gl.LINE_LOOP, beg2.roundMouse, len2.roundMouse);
          } else {
            gl.drawArrays(gl.LINE_LOOP, beg2.roundTouch, len2.roundTouch);
          }
        }


        } // continuous

          refresherFrame = (refresherFrame + 1) % 16;
          mat4.identity(mat);
          mat4.translate(mat, mat, [160, 45, 0]);
          mat4.rotate(mat, mat, Math.PI/8 * refresherFrame, [0, 0, 1]);
          mat4.scale(mat, mat, [40, 10, 0]);
          gl.uniformMatrix4fv(
            gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
            false, mat);
          gl.drawArrays(gl.LINE_LOOP, beg2.unitSquare, len2.unitSquare);

          mat4.identity(mat);
          mat4.translate(mat, mat, [10, 10, 0]);
          mat4.scale(mat, mat, [50, 10, 0]);
          gl.uniformMatrix4fv(
            gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
            false, mat);
          gl.drawArrays(gl.LINE_LOOP, beg2.unitSquare, len2.unitSquare);

          mat4.identity(mat);
          mat4.translate(mat, mat, [10, 25, 0]);
          mat4.scale(mat, mat, [50 * window.visualViewport.scale, 10, 0]);
          gl.uniformMatrix4fv(
            gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
            false, mat);
          gl.drawArrays(gl.LINE_LOOP, beg2.unitSquare, len2.unitSquare);

          mat4.identity(mat);
          mat4.translate(mat, mat, [10, 40, 0]);
          mat4.scale(mat, mat, [50 * window.devicePixelRatio, 10, 0]);
          gl.uniformMatrix4fv(
            gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
            false, mat);
          gl.drawArrays(gl.LINE_LOOP, beg2.unitSquare, len2.unitSquare);

          mat4.identity(mat);
          mat4.translate(mat, mat, [10, 55, 0]);
          mat4.scale(mat, mat, [50 * window.innerWidth/1000, 10, 0]);
          gl.uniformMatrix4fv(
            gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
            false, mat);
          gl.drawArrays(gl.LINE_LOOP, beg2.unitSquare, len2.unitSquare);
        for (const [key, p] of Object.entries(pointers)) {
          mat4.identity(mat);
          mat4.translate(mat, mat, [12, 57, 0]);
          mat4.scale(mat, mat, [46 * p.x/wi2px/1000, 6, 0]);
          gl.uniformMatrix4fv(
            gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
            false, mat);
          gl.drawArrays(gl.LINE_LOOP, beg2.unitSquare, len2.unitSquare);
        }

          mat4.identity(mat);
          mat4.translate(mat, mat, [10, 70, 0]);
          mat4.scale(mat, mat, [50 * window.innerHeight/1000, 10, 0]);
          gl.uniformMatrix4fv(
            gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
            false, mat);
          gl.drawArrays(gl.LINE_LOOP, beg2.unitSquare, len2.unitSquare);
        for (const [key, p] of Object.entries(pointers)) {
          mat4.identity(mat);
          mat4.translate(mat, mat, [12, 72, 0]);
          mat4.scale(mat, mat, [46 * p.y/wi2px/1000, 6, 0]);
          gl.uniformMatrix4fv(
            gl.getUniformLocation(plainProgram, 'uModelViewMatrix'),
            false, mat);
          gl.drawArrays(gl.LINE_LOOP, beg2.unitSquare, len2.unitSquare);
        }

}



      }
	} // refresher time stamp changed
	window.requestAnimationFrame(refresher);
};

function resizeCanvas() {
	if (debug1) console.log('resizeCanvas()');
	nframes = 10;
	var w = window.innerWidth, h = window.innerHeight/2;
	if (1) {
		canvas.width = w * window.visualViewport.scale * window.devicePixelRatio;
		canvas.height = h * window.visualViewport.scale * window.devicePixelRatio;
		canvas.style.width = w * window.visualViewport.scale;
		canvas.style.height = h * window.visualViewport.scale;
	}
	diagonal = Math.sqrt(canvas.width*canvas.width + canvas.height*canvas.height);
	wi2px = window.visualViewport.scale * window.devicePixelRatio;
	px2wi = 1/wi2px;
	layoutSignal = true;
	if (rootViewport.resizeFunc) rootViewport.resizeFunc.call(rootViewport);
}

  var pointers = {};
  const TAP_WINDOW = 250; // ms
  const TAP_WIGGLE = 15 * window.devicePixelRatio;
  function eventHandler(e, action) {

    var index;

		// Helper: On commitment to drag, disown ambiguously selected click gadgets.
		function DisownAllOtherGads(p, g) {
      for (const o of p.hitList.hits) if (o.gad !== g) {
				if (o.gad.ownedBy == index) {
					o.gad.gestureState = o.gad.gestureState + '-disowned';
					o.gad.viewport.setRenderFlag(true);
          delete o.gad.ownedBy;
				}
			}
    }

    if (action == 'touches' && e.touches && e.touches.length == 0) {
   //   window.speechSynthesis.speak(new SpeechSynthesisUtterance(' '+e.touches.length));
      var toDel = [];
      for (const [key, p] of Object.entries(pointers)) p.tempIsActive = !!(p.e.pointerType == 'mouse');
   //   for (var i = 0; i < e.touches.length; i++) if (pointers['p-'+e.touches[i].identifier]) pointers['p-'+e.touches[i].identifier].tempIsActive = 1;
      for (const [key, p] of Object.entries(pointers)) if (!p.tempIsActive) toDel.push(key);
      while (toDel.length) delete pointers[toDel.pop()];
      for (const [key, p] of Object.entries(pointers)) delete p.tempIsActive;
      return;
    }
    if (wi2px != window.visualViewport.scale * window.devicePixelRatio) resizeCanvas();
var speak = 0;
    index = 'p-'+e.pointerId;
/*
    var numTouches;
    var touches = [];
    function recalc() {
      var n = 0, t = [];
      for (const [key, pointer] of Object.entries(pointers)) {
        if (pointer.touching && pointer.e.pointerType!='mouse') { t[n] = pointer; n += 1; }
      }
      numTouches = n;
      touches = t;
    }
*/
    var dir;
    function calcSwipeDir(p) {
      xdiff = p.x - p.ox;
      ydiff = p.y - p.oy;
      if (xdiff*xdiff > ydiff*ydiff) {
        if (xdiff > 0) return 'right'; else return 'left';
      } else {
        if (ydiff > 0) return 'down'; else return 'up';
      }
    }
    var p, hl;
    switch (action) {
    case 'down':
			endInput();
      if (!pointers.hasOwnProperty(index)) pointers[index] = { gestureState: '', touching: false, px: e.layerX * wi2px, py: e.layerY * wi2px };
      p = pointers[index]; p.e = e; p.touching = true;
      p.x = e.layerX * wi2px;
      p.y = e.layerY * wi2px;
      p.ox = p.x;
      p.oy = p.y;
    //  recalc();
      p.hitList = new vp.HitList(p.x, p.y);
      rootViewport.getHits(p.hitList, getPointerRadius());
      p.hitList.sortHits();
      if (e.pointerType=='mouse') {
        if (e.button == 0) {
          for (const h of p.hitList.hits) {
            const g = h.gad;
            if (!g.ownedBy && !!(g.actionFlags & vp.GAF_CLICKABLE)) {
              g.gestureState = 'begin-click'; g.ownedBy = index;
              g.viewport.setRenderFlag(true);
            }
            if (!g.ownedBy && !!(g.actionFlags & vp.GAF_DRAGGABLE)) {
              g.gestureState = 'begin-drag'; g.ownedBy = index;
              g.viewport.setRenderFlag(true);
            }
            if (!g.ownedBy && !!(g.actionFlags & (vp.GAF_NUMINPUT | vp.GAF_TEXTINPUT))) {
              g.gestureState = 'begin-input'; g.ownedBy = index;
              g.viewport.setRenderFlag(true);
            }
            g.gestureTimerId = setTimeout(eventHandler, TAP_WINDOW, e, 'drag time reached');
          }
        }
        if (e.button == 2) {
          for (const h of p.hitList.hits) {
            const g = h.gad;
            if (!g.ownedBy && !!(g.actionFlags & vp.GAF_CONTEXTMENU)) {
              g.gestureState = 'begin-menu'; g.ownedBy = index;
              g.viewport.setRenderFlag(true);
              if (clickSound) clickSound.setValueAtTime(0.1, ac.currentTime);
              if (clickSound) clickSound.setValueAtTime(0, ac.currentTime+0.001);
console.log('menu down', g.gestureState, g.ownedBy);
            }
          }
        }
      } else { // not mouse (down)
        for (const h of p.hitList.hits) {
          const g = h.gad;
          if (!g.ownedBy) {
            if (!!(g.actionFlags & vp.GAF_CLICKABLE)) {
              g.gestureState = 'begin-tap'; g.ownedBy = index;
              g.viewport.setRenderFlag(true);
              g.gestureBeginTime = e.timeStamp;
              if (!!(g.actionFlags & (
								vp.GAF_CONTEXTMENU | vp.GAF_HOLDABLE | vp.GAF_DRAGGABLE))) {
                g.gestureTimerId = setTimeout(eventHandler, TAP_WINDOW, e, 'tap-and-hold time reached');
     if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('begin tap hold'));
              } else
if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('begin tap '+g.actionFlags));
            } else if (!!(g.actionFlags & (vp.GAF_NUMINPUT | vp.GAF_TEXTINPUT))) {
              g.gestureState = 'begin-input'; g.ownedBy = index;
              g.viewport.setRenderFlag(true);
              g.gestureBeginTime = e.timeStamp;
              if (!!(g.actionFlags & vp.GAF_CONTEXTMENU)) {
                g.gestureTimerId = setTimeout(eventHandler, TAP_WINDOW, e,
									'tap-and-hold time reached');
              }
            } else if (!!(g.actionFlags & vp.GAF_CONTEXTMENU)) {
              g.gestureState = 'begin-menu'; g.ownedBy = index;
              g.viewport.setRenderFlag(true);
              g.gestureTimerId = setTimeout(eventHandler, TAP_WINDOW, e, 'tap-and-hold time reached');
            } else if (!!(g.actionFlags & vp.GAF_HOLDABLE)) {
              g.gestureState = 'begin-hold'; g.ownedBy = index;
              g.viewport.setRenderFlag(true);
              g.gestureTimerId = setTimeout(eventHandler, TAP_WINDOW, e, 'tap-and-hold time reached');
            } else if (!!(g.actionFlags & vp.GAF_DRAGGABLE)) {
              g.gestureState = 'begin-drag'; g.ownedBy = index;
              g.viewport.setRenderFlag(true);
              g.gestureTimerId = setTimeout(eventHandler, TAP_WINDOW, e, 'drag time reached');
            } else if (!!(g.actionFlags & vp.GAF_SWIPEABLE)) {
              g.gestureState = 'begin-swipe'; g.ownedBy = index;
              g.viewport.setRenderFlag(true);
 // if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('begin swipe'));
            } else if (!!(g.actionFlags & vp.GAF_PINCHABLE)) {
              g.gestureState = 'await-pinch'; g.ownedBy = index;
              g.viewport.setRenderFlag(true);
            }
          } else if (g.ownedBy != index) {
            if (g.gestureState == 'await-pinch' || (!!(g.actionFlags & vp.GAF_PINCHABLE) && (g.gestureState == 'begin-drag' || g.gestureState == 'begin-tap'))) {
              g.gestureState = 'pinch'; g.secondTouch = index;
              g.viewport.setRenderFlag(true);
              if (g.pinchBeginFunc) g.pinchBeginFunc.call(g, pointers[g.ownedBy], pointers[g.secondTouch]);
            } else if (g.gestureState == 'drag' && !!(g.actionFlags & vp.GAF_PINCHABLE)) {
              g.gestureState = 'pinch'; g.secondTouch = index;
              g.viewport.setRenderFlag(true);
              if (g.dragEndFunc) g.dragEndFunc.call(g, pointers[g.ownedBy]);
              if (g.pinchBeginFunc) g.pinchBeginFunc.call(g, pointers[g.ownedBy], pointers[g.secondTouch]);
            }
          }
        }
      }
      break;
    case 'move':
      if (!mouseEnabled && e.pointerType=='mouse') { mouseEnabled = 1; if (rootViewport.enableMouse) rootViewport.enableMouse.call(rootViewport); }
      if (!pointers.hasOwnProperty(index)) pointers[index] = { gestureState: e.pointerType=='mouse'?'hover':'', touching: e.pointerType=='mouse'?false:true };
      p = pointers[index]; p.e = e;
      p.px = p.x; p.x = e.layerX * wi2px;
      p.py = p.y; p.y = e.layerY * wi2px;
      if (e.pointerType=='mouse') {
        if (p.hitList) for (const h of p.hitList.hits) {
          const g = h.gad;
          if (g.ownedBy == index) {
            switch (g.gestureState) {
            case 'begin-click':
            case 'recover-click':
              var tempHit = new vp.HitList(p.x, p.y);
              g.getHits(tempHit, getPointerRadius());
              if (tempHit.hits.length == 0) {
                g.gestureState = 'abandon-click';
                g.viewport.setRenderFlag(true);
              }
              break;
            case 'begin-input':
              var tempHit = new vp.HitList(p.x, p.y);
              g.getHits(tempHit, getPointerRadius());
              if (tempHit.hits.length == 0) {
                g.gestureState = 'abandon-input';
                g.viewport.setRenderFlag(true);
              }
              break;
            case 'hold':
              var tempHit = new vp.HitList(p.x, p.y);
              g.getHits(tempHit, getPointerRadius());
              if (tempHit.hits.length == 0) {
                g.gestureState = 'abandon-hold';
                g.viewport.setRenderFlag(true);
								if (g.holdEndFunc) g.holdEndFunc.call(g, p);
              }
              break;
            case 'abandon-click':
              var tempHit = new vp.HitList(p.x, p.y);
              g.getHits(tempHit, getPointerRadius());
              if (tempHit.hits.length != 0) {
                g.gestureState = 'recover-click';
                g.viewport.setRenderFlag(true);
              }
              break;
            case 'abandon-hold':
              var tempHit = new vp.HitList(p.x, p.y);
              g.getHits(tempHit, getPointerRadius());
              if (tempHit.hits.length != 0) {
                g.gestureState = 'hold';
                g.viewport.setRenderFlag(true);
								if (g.holdBeginFunc) g.holdBeginFunc.call(g, p);
              }
              break;
            case 'begin-drag':
              dir = calcSwipeDir(p);
              if (Math.sqrt((p.ox - p.x)**2 + (p.oy - p.y)**2) > TAP_WIGGLE) {
                if (g.hasOwnProperty('gestureTimerId')) { clearTimeout(g.gestureTimerId); delete g.gestureTimerId; }
                if ( ((dir == 'up' || dir == 'down') && !!(g.actionFlags & vp.GAF_DRAGGABLE_UPDOWN))
                  || ((dir == 'left' || dir == 'right') && !!(g.actionFlags & vp.GAF_DRAGGABLE_LEFTRIGHT)) ) {
                  g.gestureState = 'drag';
                  g.viewport.setRenderFlag(true);
									DisownAllOtherGads(p, g);
                  if (g.dragBeginFunc) g.dragBeginFunc.call(g, p);
                  if (g.dragMoveFunc) g.dragMoveFunc.call(g, p);
                }
              }
              break;
            case 'drag':
              if (g.dragMoveFunc) g.dragMoveFunc.call(g, p);
              break;
            }
          }
        }
      } else { // not mouse (move)
        for (const h of p.hitList.hits) {
          const g = h.gad;
          if (g.ownedBy == index) {
            switch (g.gestureState) {
            case 'begin-tap':
              if (Math.sqrt((p.ox - p.x)**2 + (p.oy - p.y)**2) > TAP_WIGGLE) {
                g.gestureState = 'invalid-tap';
                g.viewport.setRenderFlag(true);
     if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('invalid'));
                if (!p.swiping) {
                  dir = calcSwipeDir(p);
                  if ( ((dir == 'up' || dir == 'down') && !!(g.actionFlags & vp.GAF_SWIPEABLE_UPDOWN))
                    || ((dir == 'left' || dir == 'right') && !!(g.actionFlags & vp.GAF_SWIPEABLE_LEFTRIGHT)) ) {
                    g.gestureState = 'swipe'; p.swiping = true;
                    g.viewport.setRenderFlag(true);
                    for (const o of p.hitList.hits) if (o.gad !== g && o.gad.ownedBy == index) delete o.gad.ownedBy;
                    if (g.swipeBeginFunc) g.swipeBeginFunc.call(g, p);
                    if (g.swipeMoveFunc) g.swipeMoveFunc.call(g, p);
  console.log('swipe '+dir);
  if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('swipe '+dir));
                  } else
                  if ( ((dir == 'up' || dir == 'down') && !!(g.actionFlags & vp.GAF_DRAGGABLE_UPDOWN))
                    || ((dir == 'left' || dir == 'right') && !!(g.actionFlags & vp.GAF_DRAGGABLE_LEFTRIGHT)) ) {
                    g.gestureState = 'drag'; p.swiping = true;
                    g.viewport.setRenderFlag(true);
										DisownAllOtherGags(p, g);
                    if (g.dragBeginFunc) g.dragBeginFunc.call(g, p);
                    if (g.dragMoveFunc) g.dragMoveFunc.call(g, p);
  console.log('drag '+dir);
  if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('drag '+dir));
                  }
                }
              }
              break;
            case 'begin-input':
              if (Math.sqrt((p.ox - p.x)**2 + (p.oy - p.y)**2) > TAP_WIGGLE) {
                if (g.hasOwnProperty('gestureTimerId')) { clearTimeout(g.gestureTimerId); delete g.gestureTimerId; }
                g.gestureState = 'invalid-input';
                g.viewport.setRenderFlag(true);
              }
              break;
            case 'begin-menu':
              if (Math.sqrt((p.ox - p.x)**2 + (p.oy - p.y)**2) > TAP_WIGGLE) {
                if (g.hasOwnProperty('gestureTimerId')) { clearTimeout(g.gestureTimerId); delete g.gestureTimerId; }
                g.gestureState = 'invalid-menu';
                g.viewport.setRenderFlag(true);
              }
              break;
            case 'begin-hold':
              if (Math.sqrt((p.ox - p.x)**2 + (p.oy - p.y)**2) > TAP_WIGGLE) {
                if (g.hasOwnProperty('gestureTimerId')) { clearTimeout(g.gestureTimerId); delete g.gestureTimerId; }
                g.gestureState = 'invalid-hold';
                g.viewport.setRenderFlag(true);
              }
              break;
            case 'begin-swipe':
              dir = calcSwipeDir(p);
              if (Math.sqrt((p.ox - p.x)**2 + (p.oy - p.y)**2) > TAP_WIGGLE) {
                if (g.hasOwnProperty('gestureTimerId')) { clearTimeout(g.gestureTimerId); delete g.gestureTimerId; }
                if (!p.swiping) {
                  if ( ((dir == 'up' || dir == 'down') && !!(g.actionFlags & vp.GAF_SWIPEABLE_UPDOWN))
                    || ((dir == 'left' || dir == 'right') && !!(g.actionFlags & vp.GAF_SWIPEABLE_LEFTRIGHT)) ) {
                    g.gestureState = 'swipe'; p.swiping = true;
                    g.viewport.setRenderFlag(true);
										DisownAllOtherGads(p, g);
                    if (g.swipeBeginFunc) g.swipeBeginFunc.call(g, p);
                    if (g.swipeMoveFunc) g.swipeMoveFunc.call(g, p);
     if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('swipe '+dir));
                  }
                }
              }
              break;
            case 'hold':
              var tempHit = new vp.HitList(p.x, p.y);
              g.getHits(tempHit, getPointerRadius());
              if (tempHit.hits.length == 0) {
                g.gestureState = 'abandon-hold';
                g.viewport.setRenderFlag(true);
								if (g.holdEndFunc) g.holdEndFunc.call(g, p);
              }
              break;
            case 'swipe':
              if (g.swipeMoveFunc) g.swipeMoveFunc.call(g, p);
              break;
            case 'begin-drag':
              dir = calcSwipeDir(p);
              if (Math.sqrt((p.ox - p.x)**2 + (p.oy - p.y)**2) > TAP_WIGGLE) {
                if (g.hasOwnProperty('gestureTimerId')) { clearTimeout(g.gestureTimerId); delete g.gestureTimerId; }
                if (!p.swiping) {
                  if ( ((dir == 'up' || dir == 'down') && !!(g.actionFlags & vp.GAF_DRAGGABLE_UPDOWN))
                    || ((dir == 'left' || dir == 'right') && !!(g.actionFlags & vp.GAF_DRAGGABLE_LEFTRIGHT)) ) {
                    g.gestureState = 'drag'; p.swiping = true;
                    g.viewport.setRenderFlag(true);
										DisownAllOtherGads(p, g);
                    for (const o of p.hitList.hits) if (o.gad !== g) {
                      if (o.gad.secondTouch == index) {
                        switch (o.gad.gestureState) {
                        case 'pinch':
                          o.gad.gestureState = 'drag'; delete o.gad.secondTouch;
                          o.gad.viewport.setRenderFlag(true);
                          if (o.gad.pinchEndFunc) o.gad.pinchEndFunc.call(o.gad);
                          if (o.gad.dragBeginFunc) o.gad.dragBeginFunc.call(o.gad, pointers[o.gad.ownedBy]);
                          break;
                        }
                      }
                    }
                    if (g.dragBeginFunc) g.dragBeginFunc.call(g, p);
                    if (g.dragMoveFunc) g.dragMoveFunc.call(g, p);
                  }
                }
              }
              break;
            case 'drag':
              if (g.dragMoveFunc) g.dragMoveFunc.call(g, p);
              break;
            case 'pinch':
              if (g.pinchMoveFunc) g.pinchMoveFunc.call(g, pointers[g.ownedBy], pointers[g.secondTouch]);
              break; 
            }
          } else if (g.secondTouch == index) {
            switch (g.gestureState) {
            case 'pinch':
              if (g.pinchMoveFunc) g.pinchMoveFunc.call(g, pointers[g.ownedBy], pointers[g.secondTouch]);
              break;
            } 
          }
        }
      }
      break;
    case 'up':
      if (!pointers.hasOwnProperty(index)) pointers[index] = { gestureState: '', touching: false, x: 0, y: 0, px: 0, py: 0 };
      p = pointers[index]; p.e = e; p.touching = false;
     // recalc();
      if (e.pointerType=='mouse') {
        if (e.button == 0) {
          var skipflag = 0;
          for (const h of p.hitList.hits) {
            const g = h.gad;
            if (g.ownedBy == index) {
              if (!skipflag) switch (g.gestureState) {
              case 'begin-click':
              case 'recover-click':
                if (clickSound) clickSound.setValueAtTime(0.1, ac.currentTime);
                if (clickSound) clickSound.setValueAtTime(0, ac.currentTime+0.001);
                if (g.clickFunc) g.clickFunc.call(g);
                skipflag=1;
                break;
              case 'begin-input':
                if (clickSound) clickSound.setValueAtTime(0.1, ac.currentTime);
                if (clickSound) clickSound.setValueAtTime(0, ac.currentTime+0.001);
								beginInput(g);
                skipflag=1;
                break;
							case 'hold':
                if (g.holdEndFunc) g.holdEndFunc.call(g, p);
								break;
              case 'abandon-click':
                break;
              case 'begin-drag':
                if (g.hasOwnProperty('gestureTimerId')) { clearTimeout(g.gestureTimerId); delete g.gestureTimerId; }
                break;
              case 'drag':
                if (g.dragMoveFunc) g.dragMoveFunc.call(g, p);
                if (g.dragEndFunc) g.dragEndFunc.call(g, p);
                break;
              }
              delete g.gestureState; delete g.ownedBy;
              g.viewport.setRenderFlag(true);
            }
          }
        }
        if (e.button == 2) {
          for (const h of p.hitList.hits) {
            const g = h.gad;
            if (g.ownedBy == index) {
              switch (g.gestureState) {
              case 'begin-menu':
								if (g.contextMenuFunc) g.contextMenuFunc.call(g, p);
                break;
              }
              delete g.gestureState; delete g.ownedBy;
              g.viewport.setRenderFlag(true);
            }
          }
        }
        delete p.hitList;
      } else { // not mouse (up)
        var skipflag = 0;
        for (const h of p.hitList.hits) {
          const g = h.gad;
          var skipDel = 0;
          if (g.ownedBy == index) {
            if (g.hasOwnProperty('gestureTimerId')) { clearTimeout(g.gestureTimerId); delete g.gestureTimerId; }
            if (!skipflag) switch (g.gestureState) {
            case 'begin-tap':
              if (clickSound) clickSound.setValueAtTime(0.1, ac.currentTime);
              if (clickSound) clickSound.setValueAtTime(0, ac.currentTime+0.001);
              if (g.clickFunc) g.clickFunc.call(g);
              skipflag=1;
              break;
            case 'begin-input':
              if (clickSound) clickSound.setValueAtTime(0.1, ac.currentTime);
              if (clickSound) clickSound.setValueAtTime(0, ac.currentTime+0.001);
							beginInput(g);
              skipflag=1;
              break;
						case 'hold':
     if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('end hold'));
              if (g.holdEndFunc) g.holdEndFunc.call(g, p);
							break;
            case 'tap-and-hold':
console.log('tap-and-hold release');
if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('release'));
              break;
            case 'swipe':
              if (g.swipeMoveFunc) g.swipeMoveFunc.call(g, p);
              if (g.swipeEndFunc) g.swipeEndFunc.call(g, p);
              break;
            case 'drag':
              if (g.dragMoveFunc) g.dragMoveFunc.call(g, p);
              if (g.dragEndFunc) g.dragEndFunc.call(g, p);
              break;
            case 'pinch':
if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('releasing'));
              g.gestureState = 'drag'; g.ownedBy = g.secondTouch; delete g.secondTouch;
              g.viewport.setRenderFlag(true);
              if (g.pinchEndFunc) g.pinchEndFunc.call(g);
              if (g.dragBeginFunc) g.dragBeginFunc.call(g, pointers[g.ownedBy]);
              skipDel = 1;
              break;
            }
            if (!skipDel) {
              delete g.gestureState; delete g.ownedBy;
              g.viewport.setRenderFlag(true);
            }
          } else if (g.secondTouch == index) {
            switch (g.gestureState) {
            case 'pinch':
if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('releasing'));
              g.gestureState = 'drag'; delete g.secondTouch;
              g.viewport.setRenderFlag(true);
              if (g.pinchEndFunc) g.pinchEndFunc.call(g);
              if (g.dragBeginFunc) g.dragBeginFunc.call(g, pointers[g.ownedBy]);
              break;
            } 
          }
        }
      }
      if (e.pointerType == 'touch') delete pointers[index];
      delete p.swiping;
      break;
    case 'wheel':
      if (!pointers.hasOwnProperty(index)) pointers[index] = { gestureState: '', touching: false, px: e.layerX * wi2px, py: e.layerY * wi2px };
      p = pointers[index]; p.e = e; p.touching = true;
      p.x = e.layerX * wi2px;
      p.y = e.layerY * wi2px;
      //p.ox = p.x;
      //p.oy = p.y;
     // recalc();
      p.hitList = new vp.HitList(p.x, p.y);
      rootViewport.getHits(p.hitList, getPointerRadius());
      p.hitList.sortHits();
      if (e.type=='wheel') {
        var skipflag = 0;
        for (const h of p.hitList.hits) {
          const g = h.gad;
          if (!skipflag && !g.ownedBy) {
            if (!!(g.actionFlags & vp.GAF_SCROLLABLE_UPDOWN)) {
              p = pointers[index]; p.e = e;
              p.x = e.layerX * wi2px; p.ox = p.x; p.px = p.x;
              p.y = e.layerY * wi2px; p.oy = p.y; p.py = p.y;
              if (g.swipeBeginFunc) g.swipeBeginFunc.call(g, p);
              p.dx = 0; p.x = p.x;
              p.dy = Math.sign(e.wheelDelta) * 0.8 * window.devicePixelRatio; p.y = p.y + p.dy;
              if (g.swipeMoveFunc) g.swipeMoveFunc.call(g, p);
              if (g.swipeEndFunc) g.swipeEndFunc.call(g, p);
              skipflag=1;
            } else if (!!(g.actionFlags & vp.GAF_SCROLLABLE_LEFTRIGHT)) {
              p = pointers[index]; p.e = e;
              p.x = e.layerX * wi2px; p.ox = p.x; p.px = p.x;
              p.y = e.layerY * wi2px; p.oy = p.y; p.py = p.y;
              if (g.swipeBeginFunc) g.swipeBeginFunc.call(g, p);
              p.dx = Math.sign(e.wheelDelta) * 0.8 * window.devicePixelRatio; p.x = p.x + p.dx;
              p.dy = 0; p.y = p.y;
              if (g.swipeMoveFunc) g.swipeMoveFunc.call(g, p);
              if (g.swipeEndFunc) g.swipeEndFunc.call(g, p);
              skipflag=1;
            } else if (!!(g.actionFlags & vp.GAF_PINCHABLE)) {
              p = pointers[index]; p.e = e;
              p.x = e.layerX * wi2px; p.ox = p.x; p.px = p.x;
              p.y = e.layerY * wi2px; p.oy = p.y; p.py = p.y;
              if (!!(g.actionFlags & vp.GAF_ROTATABLE) && e.altKey && g.rotateFunc)
                g.rotateFunc.call(g, p, Math.sign(e.wheelDelta));
              else if (!!(g.actionFlags & vp.GAF_SCALABLE) && g.zoomFunc)
                g.zoomFunc.call(g, p, Math.sign(e.wheelDelta));
              skipflag=1;
            }
          }
	       }
      }
      break;
    case 'drag time reached':
      if (!pointers.hasOwnProperty(index)) pointers[index] = { gestureState: '', touching: true };
      p = pointers[index]; p.e = e;
      if (p.hitList) for (const h of p.hitList.hits) {
        const g = h.gad;
        if (g.ownedBy == index) {
          if (g.gestureState == 'begin-click' && (g.actionFlags & vp.GAF_HOLDABLE)) {
            g.gestureState = 'hold';
            g.viewport.setRenderFlag(true);
						DisownAllOtherGads(p, g);
            if (g.holdBeginFunc) g.holdBeginFunc.call(g, p);
					}
          if (g.gestureState == 'begin-drag' && !p.swiping) {
            g.gestureState = 'drag'; p.swiping = true;
            g.viewport.setRenderFlag(true);
						DisownAllOtherGads(p, g);
            if (g.dragBeginFunc) g.dragBeginFunc.call(g, p);
          }
          if (g.hasOwnProperty('gestureTimerId')) { delete g.gestureTimerId; }
        }
      }
      break;
    case 'tap-and-hold time reached':
console.log('tap-and-hold time reached');
      if (!pointers.hasOwnProperty(index)) pointers[index] = { gestureState: '', touching: true };
      p = pointers[index]; p.e = e;
      for (const h of p.hitList.hits) {
        const g = h.gad;
        if (g.ownedBy == index) {
          if (Math.sqrt((p.ox - p.x)**2 + (p.oy - p.y)**2) <= TAP_WIGGLE)
          switch (g.gestureState) {
          case 'begin-tap':
          case 'begin-menu':
          case 'begin-input':
          case 'begin-swipe':
          case 'begin-drag':
          case 'begin-hold':
            if (!!(g.actionFlags & vp.GAF_CONTEXTMENU) && !p.swiping) {
              g.gestureState = 'menu-hold';
              g.viewport.setRenderFlag(true);
							DisownAllOtherGads(p, g);
		          if (g.contextMenuFunc) g.contextMenuFunc.call(g, p);
            } else if (!!(g.actionFlags & vp.GAF_HOLDABLE) && !p.swiping) {
              g.gestureState = 'hold';
console.log('hold');
              g.viewport.setRenderFlag(true);
							DisownAllOtherGads(p, g);
		          if (g.holdBeginFunc) g.holdBeginFunc.call(g, p);
if(speak) window.speechSynthesis.speak(new SpeechSynthesisUtterance('hold'));
            } else if (!!(g.actionFlags & vp.GAF_DRAGGABLE) && !p.swiping) {
              g.gestureState = 'drag'; p.swiping = true;
              g.viewport.setRenderFlag(true);
							DisownAllOtherGads(p, g);
              if (g.dragBeginFunc) g.dragBeginFunc.call(g, p);
            } else if (!!(g.actionFlags & vp.GAF_SWIPEABLE) && !p.swiping) {
              g.gestureState = 'swipe'; p.swiping = true;
              g.viewport.setRenderFlag(true);
              for (const o of p.hitList.hits) if (o.gad !== g && o.gad.ownedBy == index) delete o.gad.ownedBy;
              if (g.swipeBeginFunc) g.swipeBeginFunc.call(g, p);
            } else {
              g.gestureState = 'invalid-tap-and-hold';
              g.viewport.setRenderFlag(true);
            }
            break;
          }
          if (g.hasOwnProperty('gestureTimerId')) { delete g.gestureTimerId; }
        }
      }
      break;
    }
  }

function initialize(c, inputalpha, inputnum, inputnext, inputprev) {
	canvas = c;
	kbalpha = inputalpha;
	kbnum = inputnum;
	kbnext = inputnext;
	kbprev = inputprev;
	gl = canvas.getContext('webgl2', {
		antialias: true,
		alpha: false,
		desynchronized: true,
		preserveDrawingBuffer: true,
	});
	var viewportOrigFunc = gl.viewport.bind(gl), curDims;
	gl.viewport = function(x,y,w,h) {
		curDims = [x,y,w,h];
		viewportOrigFunc(x,y,w,h);
	}
	var getParameterOrigFunc = gl.getParameter.bind(gl);
	gl.getParameter = function(pname) {
		return (pname == gl.VIEWPORT && !!curDims)?
			curDims:
			getParameterOrigFunc(pname);
	}
}

function start(root) {

	// WEBGL INITIALIZATION

	if (!gl) return;

	const plainVertexShader = gl.createShader(gl.VERTEX_SHADER);
	gl.shaderSource(plainVertexShader, `
        attribute vec4 aVertexPosition;
        uniform vec4 uVertexColor;
        uniform mat4 uModelViewMatrix;
        uniform mat4 uProjectionMatrix;
        varying vec4 v_Color;
        void main() {
          gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;
          v_Color = uVertexColor;
        }
	`);
	gl.compileShader(plainVertexShader);
	if (!gl.getShaderParameter(plainVertexShader, gl.COMPILE_STATUS)) return;

	const plainFragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
	gl.shaderSource(plainFragmentShader, `
        varying lowp vec4 v_Color;
        void main() {
          gl_FragColor = v_Color;
        }
	`);
	gl.compileShader(plainFragmentShader);
	if (!gl.getShaderParameter(plainFragmentShader, gl.COMPILE_STATUS)) return;

	plainProgram = gl.createProgram();
	gl.attachShader(plainProgram, plainVertexShader);
	gl.attachShader(plainProgram, plainFragmentShader);
	gl.linkProgram(plainProgram);
	if (!gl.getProgramParameter(plainProgram, gl.LINK_STATUS)) return;

	buf2 = gl.createBuffer(); // buffer for 2-value vertices
	gl.bindBuffer(gl.ARRAY_BUFFER, buf2);
	gl.vertexAttribPointer(
		gl.getAttribLocation(plainProgram, 'aVertexPosition'),
		2, // numComponents
		gl.FLOAT, // type
		false, // normalize
		0, // stride
		0); // offset
	gl.enableVertexAttribArray(
		gl.getAttribLocation(plainProgram, 'aVertexPosition'));

	const cum2 = []; // accumulator to build data for buffer

	beg2.unitLine = cum2.length/2; cum2.splice(cum2.length, 0,
		0,0, 1,1,
	); len2.unitLine = cum2.length/2 - beg2.unitLine;

	beg2.unitSquare = cum2.length/2; cum2.splice(cum2.length, 0,
		1,1, 0,1, 0,0, 1,0,
	); len2.unitSquare = cum2.length/2 - beg2.unitSquare;

	beg2.roundTouch = cum2.length/2;
	for (var i = 0; i < 36; i++) {
		cum2.splice(cum2.length, 0,
			touchRadius*Math.sin(i/18*Math.PI),
			touchRadius*Math.cos(i/18*Math.PI));
	}
	len2.roundTouch = cum2.length/2 - beg2.roundTouch;

	beg2.squareTouch = cum2.length/2; cum2.splice(cum2.length, 0,
		 touchRadius-.5,  touchRadius-.5,
		-touchRadius+.5,  touchRadius-.5,
		-touchRadius+.5, -touchRadius+.5,
		 touchRadius-.5, -touchRadius+.5,
	); len2.squareTouch = cum2.length/2 - beg2.squareTouch;

	beg2.roundMouse = cum2.length/2;
	for (var i = 0; i < 36; i++) {
		cum2.splice(cum2.length, 0,
			clickRadius*Math.sin(i/18*Math.PI),
			clickRadius*Math.cos(i/18*Math.PI));
	}
	len2.roundMouse = cum2.length/2 - beg2.roundMouse;

	beg2.squareMouse = cum2.length/2; cum2.splice(cum2.length, 0,
		 clickRadius-.5,  clickRadius-.5,
		-clickRadius+.5,  clickRadius-.5,
		-clickRadius+.5, -clickRadius+.5,
		 clickRadius-.5, -clickRadius+.5,
	); len2.squareMouse = cum2.length/2 - beg2.squareMouse;

	gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(cum2), gl.STATIC_DRAW);


	// AUDIO INITIALIZATION

	var audioInit = false;
	var initState = 0;
	async function initAudio() {
		if (initState == 0) {
			ac = new AudioContext();
			initState = 1;
		} else if (initState == 1) {
			await ac.audioWorklet.addModule(
				"data:application/javascript;base64," +
				btoa(`
            class AudioProcessor extends AudioWorkletProcessor {
              constructor() {
                super();
                this.lastClick = 0;
                this.wave = 0;
              }
              process (inputs, outputs, parameters) {
                const output = outputs[0];
                output.forEach(channel => {
                  for (var i = 0; i < channel.length; i++) {
                    channel[i] =
                      (Math.random() * 2 - 1)*(0.000+(parameters['windspeed'][0])) +
                      0.5 * (parameters['click'].length > 1 ? parameters['click'][i] : parameters['click'][0]) +
                      (this.wave >= 0? 1 : -1) * (parameters['beep'].length > 1 ? parameters['beep'][i] : parameters['beep'][0]);
                    this.wave += 1; if (this.wave > 100) { this.wave = -100; };
                  }
                });
                return true;
              }
              static get parameterDescriptors() {
                return [
                  {
                    name: "windspeed",
                    automationRate: "a-rate",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 1,
                  },
                  {
                    name: "click",
                    automationRate: "a-rate",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 1,
                  },
                  {
                    name: "beep",
                    automationRate: "a-rate",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 1,
                  },
                ];
              }
            }
            registerProcessor('audio-processor', AudioProcessor);
				`));

			var source = ac.createBufferSource();
			var processor = ac.createScriptProcessor(2048);
			source.start();
			initState = 2;
		} else if (initState == 2) {
			const audioNode = new AudioWorkletNode(ac, 'audio-processor');
			audioNode.connect(ac.destination);
			clickSound = audioNode.parameters.get('click');
			beepSound = audioNode.parameters.get('beep');
			windSound = audioNode.parameters.get('windspeed');
			initState = 3;
			audioInit = true;
		}
	}

	// START PROCESSING EVENTS
	if (root) rootViewport = root;

function hideAllTextInputs() {
	kbalpha.style.display = 'none';
	kbnum.style.display = 'none';
	kbnext.style.display = 'none';
	kbprev.style.display = 'none';
}

	// Add event listeners.
	// NOTE: Some events are used to trigger audio initialization.
	window.addEventListener("resize",
		function(e) { resizeCanvas(); }, false); resizeCanvas();
	window.requestAnimationFrame(refresher);
	kbalpha.addEventListener("keydown",
		function(e) {
			var g = inputGad;
			if (g && e.key.length == 1 && g.limitChars && !g.limitChars.includes(e.key)) {
				e.preventDefault();
				beep();
			} else if (!inputSelected && g && e.key.length == 1
			&& g.limitLenFunc && g.limitLenFunc()) {
				e.preventDefault();
				beep();
			}
		  inputSelected = false;
		}, false);
	kbalpha.addEventListener("input",
		function(e) {
//console.log('kbalpha.input');
			var g = inputGad;
			g.text = kbalpha.value;
			if (g.textFunc) g.textFunc.call(g);
		  inputSelected = false;
		}, false);
	kbalpha.addEventListener("blur",
		function(e) {
//console.log('kbalpha.blur');
			var g = inputGad;
			kbalpha.style.display = 'none';
			if (g && g.textEndFunc) g.textEndFunc.call(g);
			inputGadPrev = g;
			inputGad = undefined;
		  inputSelected = false;
		}, false);
	kbnum.addEventListener("keydown",
		function(e) {
			var g = inputGad;
			if (kbnum.value == '00') kbnum.value = '0';
			if (g && g.specialKeys && g.specialKeys.includes(e.key)) {
				e.preventDefault();
				if (g.specialFunc) g.specialFunc.call(g, e);
			} else if (g && g.specialCodes && g.specialCodes.includes(e.code)) {
				e.preventDefault();
				if (g.specialFunc) g.specialFunc.call(g, e);
			} else if (g && e.key.length == 1 && g.limitChars && !g.limitChars.includes(e.key)) {
				e.preventDefault();
				beep();
			} else if (!inputSelected && g && e.key.length == 1
			&& g.limitLenFunc && g.limitLenFunc()) {
				e.preventDefault();
				beep();
			}
		  inputSelected = false;
		}, false);
	kbnum.addEventListener("input",
		function(e) {
//console.log('kbnum.input', e);
			var g = inputGad;
			g.text = kbnum.value;
			if (g.textFunc) g.textFunc.call(g);
		  inputSelected = false;
		}, false);
	kbnum.addEventListener("blur",
		function(e) {
//console.log('kbnum.blur', inputGad, e);
			var g = inputGad;
			kbnum.style.display = 'none';
			if (g && g.textEndFunc) g.textEndFunc.call(g);
			inputGadPrev = g;
			inputGad = undefined;
		  inputSelected = false;
		}, false);
	kbnext.addEventListener("focus",
		function(e) {
//console.log('kbnext.focus');
			var g = inputGadPrev;
			hideAllTextInputs();
			inputGad = undefined;
			if (g && g.textNextFunc) g.textNextFunc.call(g);
		}, false);
	kbprev.addEventListener("focus",
		function(e) {
//console.log('kbprev.focus');
			var g = inputGadPrev;
			hideAllTextInputs();
			inputGad = undefined;
			if (g && g.textPrevFunc) g.textPrevFunc.call(g);
		}, false);
	canvas.addEventListener("touchend",
		function(e) { eventHandler(e, 'touches'); }, false);
	canvas.addEventListener("pointerdown",
		function(e) {
			if (!audioInit) initAudio();
			e.preventDefault();
			eventHandler(e, 'down');
		}, false);
	canvas.addEventListener("pointermove",
		function(e) { e.preventDefault(); eventHandler(e, 'move'); }, false);
	canvas.addEventListener("pointerup",
		function(e) {
			if (!audioInit) initAudio();
			e.preventDefault();
			eventHandler(e, 'up');
		}, false);
	canvas.addEventListener("contextmenu",
		function(e) { e.preventDefault(); }, false);
	canvas.addEventListener("wheel",
		function(e) { e.preventDefault(); eventHandler(e, 'wheel'); }, false);
	document.addEventListener('keydown', function(e) {
		var g = inputGad;
		if (e.key == 'Enter' && g && g.textNextFunc) {
			e.preventDefault();
			g.textNextFunc.call(g);
		}
	});
}

  function setDebugFlags(debug, cont) { showdebug=!!debug; continuous=!!cont; }
  function beep() {
		if (beepSound) beepSound.setValueAtTime(1, ac.currentTime);
		if (beepSound) beepSound.setValueAtTime(0, ac.currentTime+0.1);
	};

  return {
    initialize: initialize,
    start: start,
    setDebugFlags: setDebugFlags,
    getContext: getContext,
    getPointerRadius: getPointerRadius,
    isMouseEnabled: isMouseEnabled,
		getInputGad: getInputGad,
		beginInput: beginInput,
		endInput: endInput,
		drawImage: drawImage,
		beep: beep,
    View: View,
    DividerView: DividerView,
    SliceView: SliceView,
    PagesView: PagesView,
		PopupView: PopupView,
    ViewOverlay: ViewOverlay,
    ViewMultiverse: ViewMultiverse,
    ViewPicker: ViewPicker,
    Gadget: Gadget,
    MatrixGadget: MatrixGadget,
    SwipeGadget: SwipeGadget,
    MiddleDividerGadget: MiddleDividerGadget,
    GAF_CLICKABLE: GAF_CLICKABLE,
    GAF_HOLDABLE: GAF_HOLDABLE,
    GAF_CONTEXTMENU: GAF_CONTEXTMENU,
    GAF_STRETCHABLE: GAF_STRETCHABLE,
    GAF_DRAGGABLE_UPDOWN: GAF_DRAGGABLE_UPDOWN,
    GAF_DRAGGABLE_LEFTRIGHT: GAF_DRAGGABLE_LEFTRIGHT,
    GAF_DRAGGABLE: GAF_DRAGGABLE,
    GAF_SWIPEABLE_UPDOWN: GAF_SWIPEABLE_UPDOWN,
    GAF_SWIPEABLE_LEFTRIGHT: GAF_SWIPEABLE_LEFTRIGHT,
    GAF_SWIPEABLE: GAF_SWIPEABLE,
    GAF_SCROLLABLE_UPDOWN: GAF_SCROLLABLE_UPDOWN,
    GAF_SCROLLABLE_LEFTRIGHT: GAF_SCROLLABLE_LEFTRIGHT,
    GAF_SCROLLABLE: GAF_SCROLLABLE,
    GAF_SCALABLE: GAF_SCALABLE,
    GAF_ROTATABLE: GAF_ROTATABLE,
    GAF_PINCHABLE: GAF_PINCHABLE,
    GAF_NUMINPUT: GAF_NUMINPUT,
    GAF_TEXTINPUT: GAF_TEXTINPUT,
		GAF_GONEXT: GAF_GONEXT,
    GAF_ALL: GAF_ALL,
    HitList: HitList,
    LayoutState: LayoutState,
  };
})();

var defaultFont, iconFont;
var clickTapActive = ['begin-click','recover-click','begin-tap'];
var lang_db = {};

function main() {
	const canvas = document.querySelector('#app1');
	vp.initialize(canvas,
		document.getElementById('kb'),
		document.getElementById('numpad'),
		document.getElementById('next'),
		document.getElementById('prev'),
	);
	const gl = vp.getContext();

	df.glSet(gl);
	defaultFont.init();
	iconFont.init();


	var v, g;
class ColorTheme {
	constructor() {

		// Colors that are generally theme-independent.
		this.uiPillOrange = [1, 0.55, 0.1, 1];
		this.uiLightningPurple = [0.5, 0, 1, 1];
		this.uiLightningYellow = [1, 0.9, 0, 1];
		this.uiFiatGreen = [112/255, 130/255, 56/255, 1];

		// Colors that generally should be set for each theme.
		this.uiBackground			= [0,0,0, 1];
		this.uiForeground			= [1,1,1, 1];
		this.uiButton					= [0.6,0.6,0.6, 1];
		this.uiButtonSel			= [1.0,0.2,0.2, 1];
		this.uiButtonGhost		= [0.2,0.2,0.2, 1];
		this.uiLedger1				= [0.00,0.00,0.00, 1];
		this.uiLedger2				= [0.05,0.05,0.05, 1];
		this.uiSpeechCloud		= [0.05,0.05,0.05, 1];
		this.uiSilverLining		= [0.10,0.10,0.10, 1];

		// Derived colors (can be overridden).
		// If this list is changed, the set function (below) must be updated to correspond.
		this.uiTextLabelArea	= this.uiButtonGhost;
		this.uiTextField			= this.uiBackground;
		this.uiTextFocus			= this.uiButtonSel;
		this.uiText						= this.uiForeground;
		this.uiTextLabel			= this.uiForeground;
		this.uiGhostText			= this.uiButton;
	}
	set(variable, value) {

		// Helper.
		const me = this;
		function subset(variable, sub, value) {
			if (me[sub] == me[variable]) me[sub] = value;
		}

		// This switch block must correspond to derived colors list.
		switch (variable) {
		case 'uiButtonGhost': subset(variable, 'uiTextLabelArea', value); break;
		case 'uiBackground': subset(variable, 'uiTextField', value); break;
		case 'uiButtonSel': subset(variable, 'uiTextFocus', value); break;
		case 'uiForeground':
			subset(variable, 'uiText', value);
			subset(variable, 'uiTextLabel', value);
			break;
		case 'uiButton': subset(variable, 'uiGhostText', value); break;
		}

		// Finally, do what we came for.
		this[variable] = value;
	}
}
class DefaultDarkTheme extends ColorTheme {
	constructor() {
		super();
		this.set('uiBackground'			, [0,0,0, 1]);
		this.set('uiForeground'			, [1,1,1, 1]);
		this.set('uiButton'					, [0.6,0.6,0.6, 1]);
		this.set('uiButtonSel'			, [1.0,0.2,0.2, 1]);
		this.set('uiButtonGhost'		, [0.2,0.2,0.2, 1]);
		this.set('uiLedger1'				, [0.00,0.00,0.00, 1]);
		this.set('uiLedger2'				, [0.05,0.05,0.05, 1]);
		this.set('uiSpeechCloud'		, [0.05,0.05,0.05, 1]);
		this.set('uiSilverLining'		, [0.10,0.10,0.10, 1]);
	}
}
class DefaultLightTheme extends ColorTheme {
	constructor() {
		super();
		this.set('uiBackground'			, [1,1,1, 1]);
		this.set('uiForeground'			, [0,0,0, 1]);
		this.set('uiButton'					, [0.2,0.2,0.2, 1]);
		this.set('uiButtonSel'			, [0.8,0.0,0.0, 1]);
		this.set('uiButtonGhost'		, [0.8,0.8,0.8, 1]);
		this.set('uiLedger1'				, [1.00,1.00,1.00, 1]);
		this.set('uiLedger2'				, [0.95,0.95,0.95, 1]);
		this.set('uiSpeechCloud'		, [1.00,1.00,1.00, 1]);
		this.set('uiSilverLining'		, [0.90,0.90,0.90, 1]);
	}
}
lang_db['de-DE'] = {
"about @":	"etwa @",
"bill":	"RECHNUNG",
"pay":	"ZAHLUNG",
"item":	"ARTIKEL",
"tax":	"STEUER",
"currency":	"WÄHRUNG",
"cash":	"BARGELD",
"₿":	"BTC/LN",
"₲":	"GUARANÍ",
"$":	"DOLLAR",
"€":	"EURO",
"price":	"PREIS",
"qty":	"QUANT.",
"subtotal":	"ZWISCHENSUMME",
"payment method":	"ZAHLUNGSART",
"cash back amount":	"BETRÄGE",
"language":	"SPRACHE",
"en-US":	"ENGLISCH",
"es-PY":	"SPANISCH",
"gn-PY":	"GUARANÍ",
"de-DE":	"DEUTSCH",
"Customer Bill":	"KUNDENRECHNUNG",
"Discard this invoice?":	"Diese Rechnung verwerfen?",
"How would you like to pay?":	"Wie möchten Sie bezahlen?",
"Would you like cash back?":	"Möchten Sie Bargeld zurückerhalten?",
"no":	"NEIN",
}
lang_db['en-US'] = {
"about @":	"about @",
"bill":	"INVOICE",
"pay":	"PAYMENT",
"item":	"ITEM",
"tax":	"TAX",
"currency":	"CURRENCY",
"cash":	"CASH",
"₿":	"BTC/LN",
"₲":	"GUARANÍ",
"$":	"DOLLAR",
"€":	"EURO",
"price":	"PRICE",
"qty":	"QTY",
"subtotal":	"SUBTOTAL",
"payment method":	"PAYMENT METHOD",
"cash back amount":	"AMOUNT",
"language":	"LANGUAGE",
"en-US":	"ENGLISH",
"es-PY":	"SPANISH",
"gn-PY":	"GUARANÍ",
"de-DE":	"GERMAN",
"Customer Bill":	"CUSTOMER BILL",
"Discard this invoice?":	"Discard this invoice?",
"How would you like to pay?":	"How would you like to pay?",
"Would you like cash back?":	"Would you like cash back?",
"no":	"NO",
}
lang_db['es-PY'] = {
"about @":	"circa de @",
"bill":	"FACTURA",
"pay":	"PAGO",
"item":	"ARTÍCULO",
"tax":	"IVA",
"currency":	"MONEDA",
"cash":	"EFECTIVO",
"₿":	"NUEVO GUARANÍ",
"₲":	"GUARANÍ",
"$":	"DÓLAR",
"€":	"EURO",
"price":	"PRECIO",
"qty":	"CANT.",
"subtotal":	"IMPORTE TOTAL",
"payment method":	"FORMA DE PAGO",
"cash back amount":	"IMPORTE",
"language":	"IDIOMA",
"en-US":	"INGLÉS",
"es-PY":	"ESPAÑOL",
"gn-PY":	"GUARANÍ",
"de-DE":	"ALEMÁN",
"Customer Bill":	"FACTURA CLIENTE",
"Discard this invoice?":	"¿Descartar esta factura?",
"How would you like to pay?":	"¿Cómo le gustaría pagar?",
"Would you like cash back?":	"¿Quiere que le devolvamos dinero?",
"no":	"NO",
}
lang_db['gn-PY'] = {
"about @":	"@ rupi",
"bill":	"ÑEMUMBYREHAI",
"pay":	"HEPYME'Ẽ",
"item":	"MBA'E",
"tax":	"IVA",
"currency":	"VIRU",
"cash":	"VIRUETE",
"₿":	"GUARANÍ PYAHU",
"₲":	"GUARANÍ",
"$":	"DÓLAR",
"€":	"EURO",
"price":	"HEPYKUE",
"qty":	"HETAKUE",
"subtotal":	"OPAITE",
"payment method":	"AMBUÉICHA TEPYME'Ẽ",
"cash back amount":	"MONTO EFECTIVO REHEGUA",
"language":	"ÑE'Ẽ",
"en-US":	"INGLÉS",
"es-PY":	"ESPAÑOL",
"gn-PY":	"GUARANÍ",
"de-DE":	"ALEMÁN",
"Customer Bill":	"FACTURA CLIENTE",
"Discard this invoice?":	"¿Emboyke ko factura?",
"How would you like to pay?":	"¿Mba'éichapa repagase?",
"Would you like cash back?":	"¿Reipotápa jey nde pláta?",
"no":	"NO",
}
const trs = {};
const supportedLangs = ['de-DE', 'en-US', 'es-PY', 'gn-PY'];
function tr(s, l = lcode) {
	if (!(s in trs)) {
		trs[s] = {'source': s};
		for (var supLang of supportedLangs) {
			if (typeof lang_db[supLang] === 'object'
			&& typeof lang_db[supLang][s] === 'string') {
				trs[s][supLang] = lang_db[supLang][s];
			}
		}
/*
		switch(s) {
		case 'about @':
			trs[s]['en-US'] = 'about @';
//			trs[s]['es-PY'] = 'circa de @';
			trs[s]['gn-PY'] = '@ rupi';
			trs[s]['de-DE'] = 'etwa @';
			break;
		case 'bill':
			trs[s]['en-US'] = 'INVOICE';
//			trs[s]['es-PY'] = 'FACTURA';
//			trs[s]['gn-PY'] = 'ÑEMUMBYREHAI';
			trs[s]['de-DE'] = 'RECHNUNG';
			break;
		case 'pay':
			trs[s]['en-US'] = 'PAYMENT';
			trs[s]['es-PY'] = 'PAGO';
			trs[s]['gn-PY'] = "HEPYME'Ẽ";
			trs[s]['de-DE'] = 'ZAHLUNG';
			break;
		case 'item':
			trs[s]['en-US'] = 'ITEM';
			trs[s]['es-PY'] = 'ARTÍCULO';
			trs[s]['gn-PY'] = "MBA'E";
			trs[s]['de-DE'] = 'ARTIKEL';
			break;
		case 'tax':
			trs[s]['en-US'] = 'TAX';
			trs[s]['es-PY'] = 'IVA';
			trs[s]['gn-PY'] = 'IVA';
			trs[s]['de-DE'] = 'STEUER';
			break;
		case 'currency':
			trs[s]['en-US'] = 'CURRENCY';
			trs[s]['es-PY'] = 'MONEDA';
			trs[s]['gn-PY'] = 'VIRU';
			trs[s]['de-DE'] = 'WÄHRUNG';
			break;
		case 'price':
			trs[s]['en-US'] = 'PRICE';
			trs[s]['es-PY'] = 'PRECIO';
			trs[s]['gn-PY'] = 'HEPYKUE';
			trs[s]['de-DE'] = 'PREIS';
			break;
		case 'qty':
			trs[s]['en-US'] = 'QTY';
			trs[s]['es-PY'] = 'CANT.'; // CANTIDAD
			trs[s]['gn-PY'] = 'HETAKUE';
			trs[s]['de-DE'] = 'QUANT.'; // QUANTITÄT
			break;
		case 'subtotal':
			trs[s]['en-US'] = 'SUBTOTAL';
			trs[s]['es-PY'] = 'IMPORTE TOTAL';
			trs[s]['gn-PY'] = 'OPAITE';
			trs[s]['de-DE'] = 'ZWISCHENSUMME';
			break;
		case 'language':
			trs[s]['en-US'] = 'LANGUAGE';
			trs[s]['es-PY'] = 'IDIOMA';
			trs[s]['gn-PY'] = "ÑE'Ẽ";
			trs[s]['de-DE'] = 'SPRACHE';
			break;
		case 'en-US':
			trs[s]['en-US'] = 'ENGLISH';
			trs[s]['es-PY'] = 'INGLÉS';
			trs[s]['gn-PY'] = "INGLÉS";
			trs[s]['de-DE'] = 'ENGLISCH';
			break;
		case 'es-PY':
			trs[s]['en-US'] = 'SPANISH';
			trs[s]['es-PY'] = 'ESPAÑOL';
			trs[s]['gn-PY'] = "ESPAÑOL";
			trs[s]['de-DE'] = 'SPANISCH';
			break;
		case 'gn-PY':
			trs[s]['en-US'] = 'GUARANÍ';
			trs[s]['es-PY'] = 'GUARANÍ';
			trs[s]['gn-PY'] = "GUARANÍ";
			trs[s]['de-DE'] = 'GUARANÍ';
			break;
		case 'de-DE':
			trs[s]['en-US'] = 'GERMAN';
			trs[s]['es-PY'] = 'ALEMÁN';
			trs[s]['gn-PY'] = "ALEMÁN";
			trs[s]['de-DE'] = 'DEUTSCH';
			break;
		case 'Customer Bill':
			trs[s]['en-US'] = 'CUSTOMER BILL';
			trs[s]['es-PY'] = 'FACTURA CLIENTE';
			trs[s]['gn-PY'] = 'FACTURA CLIENTE';
			trs[s]['de-DE'] = 'KUNDENRECHNUNG';
			break;
		case 'Discard this invoice?':
			trs[s]['en-US'] = 'Discard this invoice?';
			trs[s]['es-PY'] = '¿Descartar esta factura?';
			trs[s]['gn-PY'] = '¿Emboyke ko factura?';
			trs[s]['de-DE'] = 'Diese Rechnung verwerfen?';
			break;
		}
*/
		var missing = '';
		for (var supLang of supportedLangs) {
			if (!(supLang in trs[s])) missing += ', ' + supLang;
		}
		if(missing != '') {
			missing = missing.substring(2);
			console.log("WARNING: Translation(s) "+missing+" missing for", trs[s]);
		}
	}
	if (l in trs[s]) {
		return trs[s][l];
	} else {
		for(var v in trs[s]) {
			if(!trs[s].hasOwnProperty(v) || v == 'source') continue;
			console.log("WARNING: Using '"+v+"' instead of '"+l+"' for", trs[s]);
			return trs[s][v];
		}
		console.log("WARNING: No translations found for", trs[s]);
		return trs[s]['source'];
	}
}
	const GENERIC = 0;
	const PARAGUAY = 1;
	var style = PARAGUAY;

	var lcode = 'es-PY';

	const enabledCustomerLangs = ['gn-PY', 'es-PY', 'en-US', 'de-DE'];
	var defaultCustomerLang = 'es-PY';

	const enabledVendorCurrencies = ['₿','₲','$','€'];
	var defaultVendorCurrency = '₲';

	const enabledCustomerCurrencies = ['₿','₲','$','€'];
	var defaultCustomerCurrency = '₲';

	const enabledPaymentMethods = ['₿','₲','$','€'];

	const enabledCashbackOptions = {
		'₿': ['₲','$','€'],
		'₲': ['₿','$','€'],
		'$': ['₿','₲','€'],
		'€': ['₿','₲','$'],
	};

	var vendorColors = new DefaultDarkTheme();
	var customerColors = new DefaultLightTheme();

	// Randomly produce a random configuration for testing.
	if (Math.random() > 0.5) {

		style = Math.round(Math.random() * 1);

		lcode = Math.random() > 0.5?
			(Math.random() > 0.5?'gn-PY':'es-PY'):
			(Math.random() > 0.5?'en-US':'de-DE');

		for (var i=enabledCustomerLangs.length-1; i>=0; i--)
			if (Math.random() > 0.5) enabledCustomerLangs.splice(i,1);
		if (enabledCustomerLangs.length == 0) enabledCustomerLangs.push('es-PY');
		defaultCustomerLang = enabledCustomerLangs[
			Math.floor(enabledCustomerLangs.length * Math.random())];

		for (var i=enabledVendorCurrencies.length-1; i>=0; i--)
			if (Math.random() > 0.5) enabledVendorCurrencies.splice(i,1);
		if (enabledVendorCurrencies.length == 0) enabledVendorCurrencies.push('₲');
		defaultVendorCurrency = enabledVendorCurrencies[
			Math.floor(enabledVendorCurrencies.length * Math.random())];

		for (var i=enabledPaymentMethods.length-1; i>=0; i--)
			if (Math.random() > 0.5) enabledPaymentMethods.splice(i,1);
		if (enabledPaymentMethods.length == 0) enabledPaymentMethods.push('₲');

		for (var i=enabledCustomerCurrencies.length-1; i>=0; i--)
			if (Math.random() > 0.5) enabledCustomerCurrencies.splice(i,1);
		if (enabledCustomerCurrencies.length == 0) enabledCustomerCurrencies.push('₲');
		defaultCustomerCurrency = enabledCustomerCurrencies[
			Math.floor(enabledCustomerCurrencies.length * Math.random())];

		vendorColors = Math.random() > 0.5? new DefaultLightTheme() : new DefaultDarkTheme();
		customerColors = Math.random() > 0.5? new DefaultLightTheme() : new DefaultDarkTheme();
	}

  // DEMO MODES
	if (0) { // USD
		style = PARAGUAY; lcode = 'es-PY';
		enabledVendorCurrencies.splice(0,4,'₿','$');
		enabledCustomerCurrencies.splice(0,4,'₿','$');
		defaultVendorCurrency = '$';
		defaultCustomerCurrency = '$';
	}
	if (0) { // EUR
		style = GENERIC; lcode = 'en-US';
		enabledVendorCurrencies.splice(0,4,'₿','€');
		enabledCustomerCurrencies.splice(0,4,'₿','€');
		defaultVendorCurrency = '€';
		defaultCustomerCurrency = '€';
	}
	if (0) { // USD
		style = GENERIC; lcode = 'en-US';
		enabledVendorCurrencies.splice(0,4,'$');
		enabledCustomerCurrencies.splice(0,4,'$');
		defaultVendorCurrency = '$';
		defaultCustomerCurrency = '$';
	}

	const conversionRates = {};
	conversionRates['₿'] = {
		'₿': 1.0, // calculated in sats
		'₲': 1.5 + Math.random(),
		'$': 1/(40 + 10 * Math.random()), // calculated in cents
		'€': 1/(45 + 10 * Math.random()), // calculated in cents
	};
	for (var i=1; i<Object.keys(conversionRates['₿']).length; i++) {
		var cur = Object.keys(conversionRates['₿'])[i];
		conversionRates[cur] = {
			'₿': 1/conversionRates['₿'][cur],
			'₲': 1/conversionRates['₿'][cur] * conversionRates['₿']['₲'],
			'$': 1/conversionRates['₿'][cur] * conversionRates['₿']['$'],
			'€': 1/conversionRates['₿'][cur] * conversionRates['₿']['€'],
		};
	}

	function toFiat(s) {
		return style == PARAGUAY? s * 2: s / 3600;
	}

	console.log(enabledVendorCurrencies, enabledCustomerCurrencies, enabledCustomerLangs);


// Shape data storage
const beg2 = {}, len2 = {}, typ2 = {}; var all2 = [], buf2;
const beg5 = {}, len5 = {}, typ5 = {}; var all5 = [], buf5;

// Helper functions
function rgb(rgba) { return [rgba[0], rgba[1], rgba[2]]; }
function alpha(rgba, a) {
	return [rgba[0], rgba[1], rgba[2], Math.min(1, Math.max(0, a))];
}

// Shape building functions
function addShape2(name, typ, ...points) {
	beg2[name] = all2.length/2; typ2[name] = typ;
	all2.splice (all2.length, 0, ...points);
	len2[name] = all2.length/2 - beg2[name];
}
function addShape5(name, typ, ...points) {
	beg5[name] = all5.length/5; typ5[name] = typ;
	all5.splice (all5.length, 0, ...points);
	len5[name] = all5.length/5 - beg5[name];
}

// Shape definitions
addShape2('unitLine', gl.LINE_LOOP, 0,0, 1,1, );
addShape5('unitLine', gl.LINE_LOOP, 0,0,1,1,0, 1,1,0,1,0, );
addShape5('divLine', gl.LINE_STRIP, 0,0,0,0,0, 0.4,0.4,1,1,1, 0.6,0.6,1,1,1, 1,1,0,0,0, );
addShape5('divLineV', gl.TRIANGLE_STRIP,
	1,0.0,...rgb(vendorColors.uiBackground), 0,0.0,...rgb(vendorColors.uiBackground),
	1,0.4,...rgb(vendorColors.uiForeground), 0,0.4,...rgb(vendorColors.uiForeground),
	1,0.6,...rgb(vendorColors.uiForeground), 0,0.6,...rgb(vendorColors.uiForeground),
	1,1.0,...rgb(vendorColors.uiBackground), 0,1.0,...rgb(vendorColors.uiBackground), );
addShape5('divLineH', gl.TRIANGLE_STRIP,
	0.0,1,...rgb(vendorColors.uiBackground), 0.0,0,...rgb(vendorColors.uiBackground),
	0.4,1,...rgb(vendorColors.uiForeground), 0.4,0,...rgb(vendorColors.uiForeground),
	0.6,1,...rgb(vendorColors.uiForeground), 0.6,0,...rgb(vendorColors.uiForeground),
	1.0,1,...rgb(vendorColors.uiBackground), 1.0,0,...rgb(vendorColors.uiBackground), );
addShape2('rect', gl.TRIANGLE_STRIP,
	0.0,1, 0.0,0, 1.0,1, 1.0,0, );
addShape5('rect', gl.TRIANGLE_STRIP,
	0.0,1,1,1,1, 0.0,0,1,1,1, 1.0,1,1,1,1, 1.0,0,1,1,1, );
addShape5('vendorLedger', gl.TRIANGLE_STRIP,
	0.0,1,...rgb(vendorColors.uiLedger1), 0.0,0,...rgb(vendorColors.uiLedger2),
	1.0,1,...rgb(vendorColors.uiLedger1), 1.0,0,...rgb(vendorColors.uiLedger2), );
addShape5('customerLedger', gl.TRIANGLE_STRIP,
	0.0,1,...rgb(customerColors.uiLedger1), 0.0,0,...rgb(customerColors.uiLedger2),
	1.0,1,...rgb(customerColors.uiLedger1), 1.0,0,...rgb(customerColors.uiLedger2), );
addShape5('scrollUp', gl.TRIANGLE_FAN,
	0.5,0,0.75,0.75,0.75,
	0.0,1,0.25,0.25,0.25,
	0.4,1,1,1,1, 0.6,1,1,1,1,
	1.0,1,0.25,0.25,0.25, );
addShape5('scrollDn', gl.TRIANGLE_FAN,
	0.5,0,0.75,0.75,0.75,
	0.0,1,0.25,0.25,0.25,
	0.4,1,1,1,1, 0.6,1,1,1,1,
	1.0,1,0.25,0.25,0.25, );
var r = 0.2, w = 0.8, b = 0.3;
if (style != PARAGUAY) { r = 1; w = 1; b = 1; }
addShape5('hamburger', gl.TRIANGLES,
	0,0.0,1,r,r, 1,0.0,1,r,r, 0,0.2,1,r,r, 0,0.2,1,r,r, 1,0.0,1,r,r, 1,0.2,1,r,r,
	0,0.4,w,w,w, 1,0.4,w,w,w, 0,0.6,w,w,w, 0,0.6,w,w,w, 1,0.4,w,w,w, 1,0.6,w,w,w,
	0,0.8,b,b,1, 1,0.8,b,b,1, 0,1.0,b,b,1, 0,1.0,b,b,1, 1,0.8,b,b,1, 1,1.0,b,b,1,
);
addShape2('maximizer', gl.TRIANGLES,
	0,1, 0,0.6, 0.4,1,
	1,0, 1,0.4, 0.6,0,
	1,0.1, 0.1,1, 0,0.9,
	0,0.9, 0.9,0, 1,0.1,
);
{
	var sl = rgb(vendorColors.uiSilverLining);
	var sc = rgb(vendorColors.uiSpeechCloud);
	var w = 22.5, h = 3, x = w-1, y = h-1;
	addShape5('speech1o', gl.TRIANGLE_STRIP,
		0,h-1, ...sl, 1,h-1, ...sc, 0,1, ...sl, 1,1, ...sc, // left
		0.03,0.8,...sl, 1,1,...sc, 0.1,0.6,...sl, 1,1,...sc, 0.2,0.4,...sl, 1,1,...sc,
		0.4,0.2,...sl, 1,1,...sc, 0.6,0.1,...sl, 1,1,...sc, 0.8,0.03,...sl, 1,1,...sc,
		1,0,...sl, w-1,1,...sc, w-1,0,...sl, // top
		x,1,...sc, w-0.8,0.03,...sl, x,1,...sc, w-0.6,0.1,...sl, x,1,...sc, w-0.4,0.2,...sl,
		w-0.2,0.4,...sl, x,1,...sc, w-0.1,0.6,...sl, x,1,...sc, w-0.03,0.8,...sl, x,1,...sc,
		w,1,...sl, w-1,h-1,...sc, w,h-1,...sl, // right
		x,y,...sc, w-0.03,h-0.8,...sl, x,y,...sc, w-0.1,h-0.6,...sl, x,y,...sc, w-0.2,h-0.4,...sl, x,y,...sc,
		w-0.4,h-0.2,...sl, x,y,...sc, w-0.6,h-0.1,...sl, x,y,...sc, w-0.8,h-0.03,...sl, x,y,...sc,
		x,h,...sl, 1,y,...sc, 1,h,...sl, 1,y,...sc, // bottom
		0.8,h-0.03,...sl, 1,y,...sc, 0.6,h-0.1,...sl, 1,y,...sc, 0.4,h-0.2,...sl,
		0.2,h-0.4,...sl, 1,y,...sc, 0.1,h-0.6,...sl, 1,y,...sc, 0.03,h-0.8,...sl, 1,y,...sc,
		0,y,...sl,
	);
	addShape5('speech1i', gl.TRIANGLE_STRIP,
		1,1,...sc, x,1,...sc, 1,y,...sc, x,y,...sc,
	);
	addShape5('speech1j', gl.TRIANGLE_STRIP,
		w,h-1.75,...sl, w+1,h-1.25,...sl, w,h-1,...sl,
	);
}

  // WEBGL INITIALIZATION

  const plainVertexShader = gl.createShader(gl.VERTEX_SHADER);
  gl.shaderSource(plainVertexShader, `
      attribute vec4 aVertexPosition;
      attribute vec2 aTex;
      uniform vec4 overallColor;
      uniform mat4 uModelViewMatrix;
      uniform mat4 uProjectionMatrix;
      varying vec4 vColor;
      varying highp vec2 vTex;

      void main() {
        gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;
        vColor = overallColor;
        vTex = aTex;
      }
  `);
  gl.compileShader(plainVertexShader);
  if (!gl.getShaderParameter(plainVertexShader, gl.COMPILE_STATUS)) return;

  const plainFragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
  gl.shaderSource(plainFragmentShader, `
      varying lowp vec4 vColor;
      uniform sampler2D sampler0;
      varying highp vec2 vTex;

      void main() {
        //gl_FragColor = texture2D(sampler0, vTex);
        gl_FragColor = vColor;
      }
  `);
  gl.compileShader(plainFragmentShader);
  if (!gl.getShaderParameter(plainFragmentShader, gl.COMPILE_STATUS)) return;

  const prog2 = gl.createProgram();
  gl.attachShader(prog2, plainVertexShader);
  gl.attachShader(prog2, plainFragmentShader);
  gl.linkProgram(prog2);
  if (!gl.getProgramParameter(prog2, gl.LINK_STATUS)) return;

  buf2 = gl.createBuffer(); // buffer for 2-value vertices
  gl.bindBuffer(gl.ARRAY_BUFFER, buf2);
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(all2), gl.STATIC_DRAW);

  const prog5VertexShader = gl.createShader(gl.VERTEX_SHADER);
  gl.shaderSource(prog5VertexShader, `
      attribute vec4 aVertexPosition;
      attribute vec4 vertexColor;
      attribute vec2 aTex;
      uniform vec4 overallColor;
      uniform mat4 uModelViewMatrix;
      uniform mat4 uProjectionMatrix;
      varying vec4 vColor;
      varying highp vec2 vTex;

      void main() {
        gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;
        vColor = vertexColor * overallColor;
        vTex = aTex;
      }
  `);
  gl.compileShader(prog5VertexShader);
  if (!gl.getShaderParameter(prog5VertexShader, gl.COMPILE_STATUS)) return;

  const prog5FragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
  gl.shaderSource(prog5FragmentShader, `
      varying lowp vec4 vColor;
      uniform sampler2D sampler0;
      varying highp vec2 vTex;

      void main() {
        //gl_FragColor = texture2D(sampler0, vTex);
        gl_FragColor = vColor;
      }
  `);
  gl.compileShader(prog5FragmentShader);
  if (!gl.getShaderParameter(prog5FragmentShader, gl.COMPILE_STATUS)) return;

  const prog5 = gl.createProgram();
  gl.attachShader(prog5, prog5VertexShader);
  gl.attachShader(prog5, prog5FragmentShader);
  gl.linkProgram(prog5);
  if (!gl.getProgramParameter(prog5, gl.LINK_STATUS)) return;

  gl.useProgram(prog5);
  buf5 = gl.createBuffer(); // buffer for 5-value vertices
  gl.bindBuffer(gl.ARRAY_BUFFER, buf5);
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(all5), gl.STATIC_DRAW);

	function useProg2() {
		gl.useProgram(prog2);
		gl.bindBuffer(gl.ARRAY_BUFFER, buf2);
		//gl.disableVertexAttribArray(gl.getAttribLocation(prog5, 'aVertexPosition'));
		//gl.disableVertexAttribArray(gl.getAttribLocation(prog5, 'overallColor'));
		var a = gl.getAttribLocation(prog2, 'aVertexPosition')
		gl.vertexAttribPointer(
			a,
			2, // numComponents
			gl.FLOAT, // type
			false, // normalize
			0, // stride
			0); // offset
		gl.enableVertexAttribArray(a);
	}
	function useProg5() {
		gl.useProgram(prog5);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array([1,1,1, 1]));
		gl.bindBuffer(gl.ARRAY_BUFFER, buf5);
		//gl.disableVertexAttribArray(gl.getAttribLocation(prog2, 'aVertexPosition'));
		var a = gl.getAttribLocation(prog5, 'aVertexPosition')
		gl.vertexAttribPointer(
			a,
			2, // numComponents
			gl.FLOAT, // type
			false, // normalize
			4 * 5, // stride
			4 * 0); // offset
		gl.enableVertexAttribArray(a);
		a = gl.getAttribLocation(prog5, 'vertexColor')
		gl.vertexAttribPointer(
			a,
			3, // numComponents
			gl.FLOAT, // type
			false, // normalize
			4 * 5, // stride
			4 * 2); // offset
		gl.enableVertexAttribArray(a);
	}

// Helpers
function centerText(x,y,w,h,s,c,m0,m1) {
	var tw = defaultFont.calcWidth(s);
	defaultFont.draw(x+(w-tw)/2,y+14+(h-16)/2,s,c,m0,m1);
}
var fullscreen = (function() {
	var element = document.body;
	element.requestFullscreen =
		element.requestFullscreen ||
		element.requestFullScreen ||
		element.webkitRequestFullScreen ||
		element.mozRequestFullScreen ||
		function() { return false; };
	document.cancelFullScreen =
		document.cancelFullScreen ||
		document.webkitCancelFullScreen ||
		document.mozCancelFullScreen ||
		function() { return false; };
	function active() {
		return document.webkitIsFullScreen || document.mozFullScreen || false;
	}
	function toggle() {
		if (active()) document.cancelFullScreen(); else element.requestFullscreen();
	}
	function enter() {
		if (!active()) element.requestFullscreen();
	}
	function exit() {
		if (active()) document.cancelFullScreen();
	}
	return {
		active: active,
		toggle: toggle,
		enter: enter,
		exit: exit,
	};
})();

var invoicepane;

	var startpane = v = new vp.View(null);
	v.name = Object.keys({startpane}).pop();
	v.designFit = [400,300];
	v.gadgets.push(v.hamburger = g = new vp.Gadget(v));
		g.w = 30; g.h = 30 * 0.618; g.actionFlags = vp.GAF_CLICKABLE;
		g.x = (50 - g.w)/2; g.y = (50 - g.h)/2;
		g.autoHull();
		g.renderFunc = function() {
			var g = this;
			const mat = mat4.create();
			mat4.identity(mat);
			mat4.translate(mat, mat, [g.x, g.y, 0]);
			mat4.scale(mat, mat, [g.w, g.h, 0]);
			useProg5();
			gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
			gl.drawArrays(typ5.hamburger, beg5.hamburger, len5.hamburger);
		}
	v.gadgets.push(v.maximizer = g = new vp.Gadget(v));
		g.w = 30; g.h = 30; g.actionFlags = vp.GAF_CLICKABLE;
		g.x = (50 - g.w)/2; g.y = (50 - g.h)/2;
		g.autoHull();
		g.layoutFunc = function() {
			var g = this, v = g.viewport, s = v.getScale();
			g.x = v.w/s - g.w - (50 - g.w)/2;
		}
		g.renderFunc = function() {
			var g = this;
			const mat = mat4.create();
			mat4.identity(mat);
			mat4.translate(mat, mat, [g.x, g.y, 0]);
			mat4.scale(mat, mat, [g.w, g.h, 0]);
			useProg2();
			gl.uniformMatrix4fv(gl.getUniformLocation(prog2, 'uProjectionMatrix'), false, g.viewport.mat);
			gl.uniform4fv(gl.getUniformLocation(prog2, 'overallColor'),
				new Float32Array(vendorColors.uiForeground));
			gl.uniformMatrix4fv(gl.getUniformLocation(prog2, 'uModelViewMatrix'), false, mat);
			gl.drawArrays(typ2.maximizer, beg2.maximizer, len2.maximizer);
		}
		g.clickFunc = function() {
			fullscreen.toggle();
		}
	v.gadgets.push(v.invoice = g = new vp.Gadget(v));
		g.w = 250; g.h = 50; g.actionFlags = vp.GAF_CLICKABLE;
		g.text = tr('bill');
		g.layoutFunc = function() {
			var g = this, v = g.viewport, s = v.getScale();
			g.W = v.w/s; g.x = (g.W - g.w) / 2;
			g.H = v.h/s; g.y = (g.H - g.h) / 2 - 50;
			g.autoHull();
		}
		g.renderFunc = function() {
			var g = this;
			var sel = clickTapActive.includes(g.gestureState);
			const th = vendorColors;
			const mat = mat4.create();
			mat4.identity(mat);
			mat4.translate(mat, mat, [g.x, g.y, 0]);
			mat4.scale(mat, mat, [g.w, g.h, 1]);
			useProg5();
			gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
			gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
				new Float32Array(sel?vendorColors.uiForeground:vendorColors.uiPillOrange));
			gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
			mat4.identity(mat);
			mat4.translate(mat, mat, [g.x, g.y, 0]);
			mat4.scale(mat, mat, [50/32, 50/32, 1]);
			centerText(8,7, 5*32-16,32-14, g.text, th.uiBackground, g.viewport.mat, mat);
		}
		g.clickFunc = function() {
			transitionTo(invoicepane, 'max');
		}
	v.gadgets.push(v.payment = g = new vp.Gadget(v));
		g.w = 250; g.h = 50; g.actionFlags = vp.GAF_CLICKABLE;
		g.text = tr('pay');
		g.layoutFunc = function() {
			var g = this, v = g.viewport, s = v.getScale();
			g.W = v.w/s; g.x = (g.W - g.w) / 2;
			g.H = v.h/s; g.y = (g.H - g.h) / 2 + 50;
			g.autoHull();
		}
		g.renderFunc = v.invoice.renderFunc;
		g.clickFunc = function() {
			transitionTo(paymentpane, 'max');
		}
	v.minX = 0; v.maxX = 100;
	v.minY = 0; v.maxY = 1000;
	v.layoutFunc = function() {
//		this.swipeGad.layout.call(this.swipeGad);
		for (const g of this.gadgets) {
			if (g.layoutFunc) g.layoutFunc.call(g);
		}
	}
//	var scrollbar;
	v.renderFunc = function() {
		var /*g = scrollbar.knobGad,*/ s = this.getScale();
//		g.shown = this.h/this.getScale();
//    g.total = this.maxY;
//    g.start = this.userY;
//		g.viewport.relayout();
		//g.viewport.setRenderFlag(true);
		const th = vendorColors;
		gl.clearColor(...th.uiBackground);
		gl.clear(gl.COLOR_BUFFER_BIT);
		useProg5();
		gl.enable(gl.BLEND);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(th.uiForeground));
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uProjectionMatrix'), false, this.mat);
		for (const g of this.gadgets) {
			if (g.renderFunc) g.renderFunc.call(g);
		}
/*
		var tmpw;
    var m = mat4.create();

		bal = Math.round(Math.random() * (10 ** (Math.random() * 10)));
		balstr = lcode != 'en-US' || bal > 9999? bal.toLocaleString(lcode) : bal.toString();
		balw = defaultFont.calcWidth(balstr) + defaultFont.calcWidth(' sats')/2;
		tmpw = Math.max(128, balw + 10);

		mat4.identity(m);
		mat4.scale(m, m, [400/tmpw, 400/tmpw, 1]);
		mat4.translate(m, m, [(tmpw/400*this.w/s-balw)*0.51, (tmpw/400*this.h/s-20)*0.49, 0]);
		defaultFont.draw(0,0, balstr, vendorColors.uiPillOrange, this.mat, m);
		mat4.scale(m, m, [0.5, 0.5, 1]);
		defaultFont.draw(0,0, ' sats', vendorColors.uiPillOrange, this.mat, m);

		bal = toFiat(bal);
		if (style == PARAGUAY) {
			balstr = bal.toLocaleString(lcode);
			balstr = tr('about @').replace('@', 'Gs ' + balstr);
		} else {
			if (bal > 9999)
				balstr = bal.toLocaleString(lcode, {
					minimumFractionDigits: 2,
					maximumFractionDigits: 2,
				});
			else
				balstr = bal.toFixed(2);
			balstr = tr('about @').replace('@', '$' + balstr);
		}
		balw = defaultFont.calcWidth(balstr)/2;
		tmpw = Math.max(128, balw + 10);

		mat4.identity(m);
		mat4.scale(m, m, [400/tmpw, 400/tmpw, 1]);
		mat4.translate(m, m, [(tmpw/400*this.w/s-balw)*0.51, (tmpw/400*this.h/s-20)*0.49+10, 0]);
		mat4.scale(m, m, [0.5, 0.5, 1]);
		defaultFont.draw(0,0, balstr, vendorColors.uiFiatGreen, this.mat, m);
*/
	};
//	v.gadgets.push(v.swipeGad = new vp.SwipeGadget(v));
//	v.swipeGad.actionFlags = vp.GAF_SWIPEABLE_UPDOWN | vp.GAF_SCROLLABLE_UPDOWN;
var invoicepane, dataentry;

class LineItem {
	constructor(item, currency, unitprice, qty, taxrate) {
		this.item = item;
		this.currency = currency;
		this.unitprice = unitprice;
		this.qty = qty;
		this.taxrate = taxrate;
	}
	isEmpty() {
		if (this.item == ''
		&&	this.unitprice == ''
		&&	this.qty == ''
		&&	this.taxrate == '')
			return true;
		else
			return false;
	}
}

	var lightninginvoice = v = new vp.View(null);
	v.name = Object.keys({lightninginvoice}).pop();
	v.renderFunc = function() {
		gl.clearColor(...customerColors.uiBackground);
		gl.clear(gl.COLOR_BUFFER_BIT);

		const rgbToHex = (r, g, b) => {
			return "#" + ((1 << 24) + (~~(r*255) << 16) + (~~(g*255) << 8) + ~~(b*255)).toString(16).slice(1);
		}
	var img = document.querySelector('#buf1');
	var qrcontent = 
`{
	"m":1, "n":1,
	"ln":"ln10234lksjdfghdfgk......dklgfhjdgfklhd",
	"1":{"Vendor":"BIO-GRANJA EL DORADO E.I.R.L."},
	"2":{"":"M. Auxiliadora 9002"},
	"3":{"":"+595 986 124 208"},
	"4":{"R.U.C.":"80064237-6"},
	"5":{"Timbrado Na":"15856902"},
	"6":{"Valido Desde":"1/09/2022"},
	"7":{"Valido Hasta":"30/09/2023"},
	"8":{"Factura Na":"001-003-0022282"},
	"9":{"I.V.A. Incluido":"true"},
	"10":{"Caja Na":1},
	"11":{"Fecha":"19/05/2023 11:36:11"},
	"12":{"Cajero":"Caja Perla"},
	"13":{"Cliente":"CLIENTE SIN NOMBRE"},
	"14":{"R.U.C.":"00000000-0"},
	"22":{
		"23":"Articulo",
		"24":"Descripcion",
		"25":"Cantidad",
		"26":"Precio",
		"27":"Total",
		"28":"TI",
	},
	"15":[
		["8,914","ALCAPARRAS G&G 90GR","1,000","16.200","16.200","10%"],
		["8,465","PURE DE TOMATE LA HUERTA, 210G","1,000","4.000","4.000","10%"],
		["8,465","PURE DE TOMATE LA HUERTA, 210G","1,000","4.000","4.000","10%"],
		["5,520","BICARBONATO DE SODIO X KG","0,190","22.000","4.180","5%"],
		["5,355","COCO RELLADO COPALSA, X KG","0,130","44.300","5.538","10%"],
		["8,914","ALCAPARRAS G&G 90GR","1,000","16.200",
	],
}`;
console.log('rendering');
  result = QrCreator.render({
    text: qrcontent,
    radius: 0.0, // 0.0 to 0.5
    ecLevel: 'H', // L, M, Q, H
    fill: rgbToHex(...customerColors.uiForeground), // foreground color
    background: rgbToHex(...customerColors.uiBackground), // color or null for transparent
    size: 1280 // in pixels
  }, img);
console.log('rendered', result);

		var w = Math.min(canvas.width, canvas.height) * 0.8;
		var x = (canvas.width - w) / 2;
		var y = (canvas.height - w) / 2;
		vp.drawImage(img, x,y,w,w);
console.log('copied');

		const mat = mat4.create();
		w = Math.min(this.sw, this.sh);
		for (i=-1; i<=1; i++) for (j=-1; j<=1; j++) {
			mat4.identity(mat); mat4.scale(mat, mat, [this.sw/160, this.sh/160, 1]);
			//defaultFont.draw(75+i/2,87+j/2, '🗲', customerColors.uiBackground, this.mat, mat);
		}
		mat4.identity(mat); mat4.scale(mat, mat, [this.sw/160, this.sh/160, 1]);
		//defaultFont.draw(75,87, '🗲', customerColors.uiLightningYellow, this.mat, mat);

		setTimeout(this.timeoutFunc, 5000);
	};
	v.timeoutFunc = function() {
		transitionTo(invoicepane, 'max');
	}
var cashback = v = new vp.View(null);
v.name = Object.keys({cashback}).pop();
//v.designFit = [240,80];
v.designHeight = 80;
v.mode = 'select option';
v.gadgets.push(v.option = g = new vp.Gadget(v));
	g.x = 250+5; g.y = 20; g.w = 230; g.h = 20;
	g.actionFlags = vp.GAF_TEXTINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('subtotal'); g.autoHull();
	g.renderFunc = function() {
		var g = this, v = g.viewport;
		var sel = vp.getInputGad() === g;
		const th = this.viewport === cashback? vendorColors : customerColors;
		const mat = mat4.create();
		useProg5();
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x-1, g.y-11, 0]);
		mat4.scale(mat, mat, [g.w+2, g.h+12, 1]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(th.uiTextLabelArea));
		gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x, g.y, 0]);
		mat4.scale(mat, mat, [g.w, g.h, 1]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(th.uiTextField));
		gl.drawArrays(typ5.rect, beg5.rect, len5.rect);

		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x + 2, g.y - 2, 0]);
		mat4.scale(mat, mat, [0.5, 0.5, 1]);
		defaultFont.draw(0,0, g.label, th.uiTextLabel, v.mat, mat);

		if (sel) {
			useProg5();
			mat4.identity(mat);
			mat4.translate(mat, mat, [g.x, g.y, 0]);
			mat4.scale(mat, mat, [g.w, g.h, 1]);
			gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
			gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
				new Float32Array(th.uiTextFocus));
			for (var i=0; i<4; i++) {
				mat4.identity(mat);
				switch (i) {
				case 0: mat4.translate(mat, mat, [g.x-1, g.y-1, 0]);
					mat4.scale(mat, mat, [2, g.h+2, 1]); break;
				case 1: mat4.translate(mat, mat, [g.x-1, g.y-1, 0]);
					mat4.scale(mat, mat, [g.w+2, 2, 1]); break;
				case 2: mat4.translate(mat, mat, [g.x-1, g.y+g.h-1, 0]);
					mat4.scale(mat, mat, [g.w+2, 2, 1]); break;
				case 3: mat4.translate(mat, mat, [g.x+g.w-1, g.y-1, 0]);
					mat4.scale(mat, mat, [2, g.h+2, 1]); break;
				}
				gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
				gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
			}
		}
		var str = g.text.toUpperCase();
		if (g === v.qty && v.qty.text.trim() != '') {
			str = (+g.text).toLocaleString(lcode, {});
		}
		mat4.identity(mat);
		var tw = defaultFont.calcWidth(str);
		if (g.align && g.align == 'r') {
			mat4.translate(mat, mat, [g.x+g.w-2-tw-(g.margin?g.margin:0), g.y+16, 0]);
		} else {
			mat4.translate(mat, mat, [g.x+2, g.y+16, 0]);
		}
		defaultFont.draw(0,0, str, th.uiText, v.mat, mat);

		// Add decorations.
		if (g === v.amount) {
			var s = v.amount.currency;
			var c = (s == '₿')? th.uiLightningYellow : th.uiFiatGreen;
			if (s == '₿') s = '🗲';
			mat4.identity(mat);
			mat4.translate(mat, mat, [g.x+2, g.y+16, 0]);
			defaultFont.draw(0,0, s, c, v.mat, mat);
//		} else if (g == v.qty && v.qty.text.startsWith('.')) {
//			mat4.identity(mat);
//			mat4.translate(mat, mat, [g.x+g.w-2-tw-(g.margin?g.margin:0), g.y+16, 0]);
//			defaultFont.draw(-defaultFont.calcWidth('0'),0, '0', th.uiGhostText, v.mat, mat);
		} else if (g === v.taxrate && g.text != '') {
			defaultFont.draw(0,0, '%', th.uiGhostText, v.mat, mat);
		}
	}
	g.textBeginFunc = function() {
		var g = this;
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.option); }
	g.textNextFunc = function() { vp.beginInput(this.viewport.amount); }
v.options = {};
v.optionRenderFunc = function() {
	var g = this, th = g.viewport === cashback? vendorColors : customerColors;
	var sel = clickTapActive.includes(g.gestureState);
	var c, t, w;
	const mat = mat4.create();
	mat4.identity(mat);
	mat4.translate(mat, mat, [g.x, g.y, 0]);
	mat4.scale(mat, mat, [g.w/38, g.h/18, 0]);
	mat4.translate(mat, mat, [-1, 16, 0]);
	c = (g.icon == '₿') ? th.uiPillOrange : th.uiFiatGreen;
	c = sel?th.uiButtonSel:c;
  if (g.alpha) c = alpha(c, g.alpha);
	iconFont.draw(0,0, g.icon, c, g.viewport.mat, mat);
	if (g.icon == '₿') {
		c = sel?th.uiButtonSel:th.uiLightningPurple;
	  if (g.alpha) c = alpha(c, g.alpha);
		iconFont.draw(0,0, '🗲', c, g.viewport.mat, mat);
	}
	t = tr("cash"), w = defaultFont.calcWidth(t);
	mat4.identity(mat);
	mat4.translate(mat, mat, [g.x, g.y, 0]);
	mat4.scale(mat, mat, [g.w/38/3, g.h/18/3, 1]);
	var a = g.alpha?g.alpha:1;
	defaultFont.draw((112-w)/2,-2, t, alpha(th.uiText, a), g.viewport.mat, mat);
	t = tr(g.icon), w = defaultFont.calcWidth(t);
	mat4.identity(mat);
	mat4.translate(mat, mat, [g.x, g.y, 0]);
	mat4.scale(mat, mat, [g.w/38/3, g.h/18/3, 1]);
	defaultFont.draw((112-w)/2,16*4+6, t, alpha(th.uiText, a), g.viewport.mat, mat);
}
v.optionClickFunc = function() {
	var g = this, v = g.viewport;
	if (g.icon == '') {
		transitionTo(lightninginvoice, 'max');
	} else {
		v.selectedOption = g;
		v.lerpFactor = 0;
		v.anim = true;
		v.requeueLayout();
	}
}
v.resetOptions = function() {
	var v = this;
	v.mode = 'select option';
	v.selectedOption = undefined;
	v.lerpFactor = 0;
	v.anim = false;
	v.amount.x = -1000;
	v.amount.text = '';
	for (const g of Object.values(v.options)) { g.w = 44; delete g.alpha; }
	v.requeueLayout();
}
for (const option of enabledVendorCurrencies) {
	v.gadgets.push(v.options[option] = g = new vp.Gadget(v));
		g.w = 44; g.h = 21; g.actionFlags = vp.GAF_CLICKABLE;
		g.y = 48;
		g.autoHull();
		g.label = tr('currency');
		g.icon = option;
		g.renderFunc = v.optionRenderFunc;
		g.clickFunc = v.optionClickFunc;
}
v.gadgets.push(v.options['skip'] = g = new vp.Gadget(v));
	g.w = 44; g.h = 21; g.actionFlags = vp.GAF_CLICKABLE;
	g.y = 48;
	g.autoHull();
	g.label = '';
	g.icon = '';
	g.renderFunc = function() {
		var g = this, th = g.viewport === cashback? vendorColors : customerColors;
		var sel = clickTapActive.includes(g.gestureState);
		var t, w;
		const mat = mat4.create();
		t = tr('no'), w = defaultFont.calcWidth(t);
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x, g.y, 0]);
		mat4.scale(mat, mat, [g.w/38, g.w/38, 1]);
		defaultFont.draw((38-w)/2,14+2, t, sel?th.uiButtonSel:th.uiText, g.viewport.mat, mat);
	}
	g.clickFunc = v.optionClickFunc;
v.gadgets.push(v.amount = g = new vp.Gadget(v));
	g.x = 500+5; g.y = 55; g.w = 139; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT | vp.GAF_CONTEXTMENU;
	g.text = ''; g.label = tr('cash back amount'); g.limitChars = '0123456789';
	g.limitLenFunc = function() { return this.text.replace('.','').length >= 11; }
	g.currency = defaultVendorCurrency;
	g.contextMenuFunc = function() {
		this.cycleCurrency();
	}
	g.cycleCurrency = function() {
		var g = this;
		var i = enabledVendorCurrencies.indexOf(g.icon);
		i += 1;
		if (i >= enabledVendorCurrencies.length) i = 0;
		g.icon = enabledVendorCurrencies[i];
		g.viewport.amount.currency = enabledVendorCurrencies[i];
		cashback.setRenderFlag(true);
	}
	g.specialKeys = ['*', '$'];
	g.align = 'r';
	g.layoutFunc = function() {
		var g = this, v = g.viewport, s = v.getScale();
		g.W = v.w/s; //g.x = (g.W - g.w) / 2;
		g.H = v.h/s; //g.y = g.h + 5; //(g.H - g.h) / 2 + 50;
		g.autoHull();
	}
	g.renderFunc = v.option.renderFunc;
	g.textBeginFunc = function() {
		var g = this;
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.option); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if (this.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.amount);
		} else {
			v.resetOptions();
			v.requeueLayout();
		}
	}
	g.specialFunc = function(e) {
		switch (e.key) {
		case '*': this.textNextFunc(); break;
		case '$':	this.cycleCurrency(); break;
		}
	}
v.gadgets.push(v.qty = g = new vp.Gadget(v));
	g.x = 500+149; g.y = 55; g.w = 46; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('qty'); g.limitChars = '0123456789.';
	g.limitLenFunc = function() {
		return this.text.replace('.','').length >= (this.text.startsWith('.')?3:4);
	}
	g.align = 'r';
	g.layoutFunc = function() {
		var g = this, v = g.viewport, s = v.getScale();
		g.W = v.w/s; //g.x = (g.W - g.w) / 2;
		g.H = v.h/s; //g.y = g.h + 5; //(g.H - g.h) / 2 + 50;
		g.autoHull();
	}
	g.renderFunc = function() {
		var g = this, v = g.viewport;
		v.option.renderFunc.call(g);
	}
	g.textBeginFunc = function() {
		var g = this, v = g.viewport;
		if (g.text == '' && v.amount.text != '') {
			g.text = '1';
		}
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.amount); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if ((v.option.text.trim() != '' || v.amount.text.trim() != ''
		|| v.taxrate.text.trim() != '') && (+this.text) == 0) {
			vp.beep();
			vp.beginInput(v.qty);
		} else {
			vp.beginInput(v.taxrate);
		}
	}
v.gadgets.push(v.taxrate = g = new vp.Gadget(v));
	g.x = 500+200; g.y = 55; g.w = 35; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('tax'); g.limitChars = '0123456789';
	g.limitLenFunc = function() { return this.text.length >= 2; }
	g.align = 'r'; g.margin = 12;
	g.autoHull();
	g.renderFunc = v.option.renderFunc;
	g.textBeginFunc = function() {
		var g = this, v = g.viewport;
		if (g.text == '' && v.amount.text != '') {
			g.text = '10';
		}
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.qty); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if ((v.option.text.trim() != '' || v.amount.text.trim() != ''
		|| v.qty.text.trim() != '') && this.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.taxrate);
		} else if ((v.qty.text.trim() != '' || v.taxrate.text.trim() != '')
		&& v.amount.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.amount);
		} else {
			var value = v.amount.text.trim();
			if (value != '' && ['$', '€'].includes(v.amount.currency)) {
				value = (v.amount.text * 100).toString();
			}
			var li = new LineItem(
				v.option.text.trim(),
				v.amount.currency, value,
				v.qty.text.trim(),
				v.taxrate.text.trim());
			if (!li.isEmpty()) {
				v.setConversionRates();
//for (i=0; i<30; i++) {
				invoicepane.invoiceitems.unshift(li);
//}
				invoicepane.setRenderFlag(true);
				v.clearDataEntry();
				vp.beginInput(v.option);
			} else {
				vp.endInput();
				if (invoicepane.invoiceitems.length > 0)
					checkoutpages.swipeGad.doSwipe(true);
			}
		}
	}
v.setConversionRates = function() {
	this.conv = JSON.parse(JSON.stringify(conversionRates));
}
v.cconv = function(a, f, t) {
	return Math.ceil(a /* * this.conv[f][t] */);
}
v.clearDataEntry = function() {
	this.option.text = '';
	this.amount.currency = defaultVendorCurrency;
	this.amount.text = '';
	this.qty.text = '';
	this.taxrate.text = '';
}
v.layoutFunc = function() {
	var v = this;

	// Determine which options are enabled.
	for (const g of Object.values(v.options)) {
		if (v.mode == 'enter amount' || g.icon == choosemethod.selectedMethod.icon) {
			g.enabled = false;
		} else {
			g.enabled = true;
		}
	}

	// Calculate layout parameters.
	var totalW = 0, totalN = 0;
	for (const g of Object.values(v.options)) if (g.enabled) {
		totalW += g.w;
		totalN += 1;
	}
	var space = totalN > 0? (240 - totalW) / (totalN * 2) : 0;
	var x = 0, f = 0; if (v.lerpFactor) f = v.lerpFactor;
	var right = false, rightShift = 0, leftShift = 0;
	var amount_x = (240 - v.amount.w)/2;

	// Calculate amount to shift left.
	for (const g of Object.values(v.options)) if (g.enabled) {
		if (g === v.selectedOption) { leftShift = x + space; break; }
		x += space + g.w + space;
	}

	// Position the gadgets.
	x = 0;
	for (const g of Object.values(v.options)) if (g.enabled) {
		if (right && rightShift == 0) { rightShift = 240 - (x + space) + space; }
		g.x = x + space + f * (right? rightShift : 5 - leftShift);
		if (g === v.selectedOption) {
			g.x = (x + space) * (1-f) + f * amount_x;
			g.w = 44 * (1-f) + f * v.amount.w;
			g.alpha = (1-f);
		}
		x += space + g.w + space;
		if (g === v.selectedOption) right = true;
	} else {
		g.x = -1000;
	}
	for (const g of v.gadgets) {
		if (g.layoutFunc) g.layoutFunc.call(g);
	}

	// Animate.
	if (v.anim) {
		v.lerpFactor += 0.1;
		if (v.lerpFactor >= 1) {
			v.lerpFactor = 1;
			v.anim = false;
			v.amount.x = amount_x;
			v.mode = 'enter amount';
			vp.beginInput(v.amount);
		}
		v.requeueLayout();
	}
}
v.renderFunc = function() {
	const th = vendorColors;
	gl.clearColor(...th.uiBackground);
	gl.clear(gl.COLOR_BUFFER_BIT);

	useProg5();
	gl.enable(gl.BLEND);
	gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
		new Float32Array([1,1,1,1]));
	gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uProjectionMatrix'), false, this.mat);

	const m = mat4.create();
	mat4.identity(m);
	mat4.translate(m, m, [5, 5, 0]);
	mat4.scale(m, m, [10, 10, 1]);
	gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, m);
	gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
		new Float32Array([1,1,1,1]));
	gl.drawArrays(typ5.speech1i, beg5.speech1i, len5.speech1i);
	gl.drawArrays(typ5.speech1o, beg5.speech1o, len5.speech1o);
	gl.drawArrays(typ5.speech1j, beg5.speech1j, len5.speech1j);
	t = tr('Would you like cash back?');
	w = defaultFont.calcWidth(t);
	mat4.identity(m);
	mat4.translate(m, m, [12.5, 5 + 15, 0]);
	mat4.scale(m, m, [210/w, 210/w, 1]);
	defaultFont.draw(0,7, t, th.uiText, this.mat, m);

	for (const g of this.gadgets) {
		if (g.renderFunc) g.renderFunc.call(g);
	}

/*
	var m = mat4.create();
	var scale = [0.5, 0.5, 1];
	for (const g of this.gadgets) {
		mat4.identity(m);
		mat4.translate(m, m, [g.x + 2, g.y - 2, 0]);
		mat4.scale(m, m, scale);
		defaultFont.draw(0,0, g.label, th.uiTextLabel, this.mat, m);
	}

	if (this === cashback) {
		var e = (this.option.text != ''
					|| this.amount.text != ''
					|| this.qty.text != ''
					|| this.taxrate.text != ''
					|| invoicepane.invoiceitems.length > 0);
		if (e != buttonbar.trashGad.enabled) {
			buttonbar.trashGad.enabled = e;
			buttonbar.setRenderFlag(true);
		}
	}
*/
}
var choosemethod = v = new vp.View(null);
v.name = Object.keys({choosemethod}).pop();
//v.designFit = [240,80];
v.designHeight = 80;
v.gadgets.push(v.method = g = new vp.Gadget(v));
	g.x = 250+5; g.y = 20; g.w = 230; g.h = 20;
	g.actionFlags = vp.GAF_TEXTINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('subtotal'); g.autoHull();
	g.renderFunc = function() {
		var g = this, v = g.viewport;
		var sel = vp.getInputGad() === g;
		const th = this.viewport === choosemethod? vendorColors : customerColors;
		const mat = mat4.create();
		useProg5();
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x-1, g.y-11, 0]);
		mat4.scale(mat, mat, [g.w+2, g.h+12, 1]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(th.uiTextLabelArea));
		gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x, g.y, 0]);
		mat4.scale(mat, mat, [g.w, g.h, 1]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(th.uiTextField));
		gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
		if (sel) {
			gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
				new Float32Array(th.uiTextFocus));
			for (var i=0; i<4; i++) {
				mat4.identity(mat);
				switch (i) {
				case 0: mat4.translate(mat, mat, [g.x-1, g.y-1, 0]);
					mat4.scale(mat, mat, [2, g.h+2, 1]); break;
				case 1: mat4.translate(mat, mat, [g.x-1, g.y-1, 0]);
					mat4.scale(mat, mat, [g.w+2, 2, 1]); break;
				case 2: mat4.translate(mat, mat, [g.x-1, g.y+g.h-1, 0]);
					mat4.scale(mat, mat, [g.w+2, 2, 1]); break;
				case 3: mat4.translate(mat, mat, [g.x+g.w-1, g.y-1, 0]);
					mat4.scale(mat, mat, [2, g.h+2, 1]); break;
				}
				gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
				gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
			}
		}
		var str = g.text.toUpperCase();
		if (g === v.qty && v.qty.text.trim() != '') {
			str = (+g.text).toLocaleString(lcode, {});
		}
		mat4.identity(mat);
		var tw = defaultFont.calcWidth(str);
		if (g.align && g.align == 'r') {
			mat4.translate(mat, mat, [g.x+g.w-2-tw-(g.margin?g.margin:0), g.y+16, 0]);
		} else {
			mat4.translate(mat, mat, [g.x+2, g.y+16, 0]);
		}
		defaultFont.draw(0,0, str, th.uiText, v.mat, mat);

		// Add decorations.
		if (g === v.unitprice) {
			var s = v.unitprice.currency;
			var c = (s == '₿')? th.uiLightningYellow : th.uiFiatGreen;
			if (s == '₿') s = '🗲';
			mat4.identity(mat);
			mat4.translate(mat, mat, [g.x+2, g.y+16, 0]);
			defaultFont.draw(0,0, s, c, v.mat, mat);
//		} else if (g == v.qty && v.qty.text.startsWith('.')) {
//			mat4.identity(mat);
//			mat4.translate(mat, mat, [g.x+g.w-2-tw-(g.margin?g.margin:0), g.y+16, 0]);
//			defaultFont.draw(-defaultFont.calcWidth('0'),0, '0', th.uiGhostText, v.mat, mat);
		} else if (g === v.taxrate && g.text != '') {
			defaultFont.draw(0,0, '%', th.uiGhostText, v.mat, mat);
		}
	}
	g.textBeginFunc = function() {
		var g = this;
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.method); }
	g.textNextFunc = function() { vp.beginInput(this.viewport.unitprice); }
v.methods = {};
v.methodRenderFunc = function() {
	var g = this, th = g.viewport === choosemethod? vendorColors : customerColors;
	var sel = clickTapActive.includes(g.gestureState);
	var c, t, w;
	const mat = mat4.create();
	mat4.identity(mat);
	mat4.translate(mat, mat, [g.x, g.y, 0]);
	mat4.scale(mat, mat, [g.w/38, g.h/18, 0]);
	mat4.translate(mat, mat, [-1, 16, 0]);
	c = (g.icon == '₿') ? th.uiPillOrange : th.uiFiatGreen;
	iconFont.draw(0,0, g.icon,
		sel?th.uiButtonSel:c,
		g.viewport.mat, mat);
	if (g.icon == '₿') {
		iconFont.draw(0,0, '🗲',
			sel?th.uiButtonSel:th.uiLightningPurple,
			g.viewport.mat, mat);
	}
	t = tr("cash"), w = defaultFont.calcWidth(t);
	mat4.identity(mat);
	mat4.translate(mat, mat, [g.x, g.y, 0]);
	mat4.scale(mat, mat, [g.w/38/3, g.w/38/3, 1]);
	defaultFont.draw((112-w)/2,-2, t, th.uiText, g.viewport.mat, mat);
	t = tr(g.icon), w = defaultFont.calcWidth(t);
	mat4.identity(mat);
	mat4.translate(mat, mat, [g.x, g.y, 0]);
	mat4.scale(mat, mat, [g.w/38/3, g.w/38/3, 1]);
	defaultFont.draw((112-w)/2,16*4+6, t, th.uiText, g.viewport.mat, mat);
	if (g === g.viewport.selectedMethod) {
		useProg5();
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(th.uiTextFocus));
		for (var i=0; i<4; i++) {
			mat4.identity(mat);
			switch (i) {
			case 0: mat4.translate(mat, mat, [g.x-3, g.y-9, 0]);
				mat4.scale(mat, mat, [2, g.h+16, 1]); break;
			case 1: mat4.translate(mat, mat, [g.x-3, g.y-9, 0]);
				mat4.scale(mat, mat, [g.w+6, 2, 1]); break;
			case 2: mat4.translate(mat, mat, [g.x-3, g.y+g.h+7, 0]);
				mat4.scale(mat, mat, [g.w+6, 2, 1]); break;
			case 3: mat4.translate(mat, mat, [g.x+g.w+1, g.y-9, 0]);
				mat4.scale(mat, mat, [2, g.h+16, 1]); break;
			}
			gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
			gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
		}
	}
}
v.methodClickFunc = function() {
	var g = this;
	g.viewport.selectedMethod = g;
	cashback.resetOptions();
	checkoutpages.swipeGad.doSwipe(true);
}
for (const method of enabledPaymentMethods) {
	v.gadgets.push(v.methods[method] = g = new vp.Gadget(v));
		g.w = 44; g.h = 21; g.actionFlags = vp.GAF_CLICKABLE;
		g.y = 48;
		g.autoHull();
		g.label = tr('currency');
		g.icon = method;
		g.renderFunc = v.methodRenderFunc;
		g.clickFunc = v.methodClickFunc;
}
v.gadgets.push(v.unitprice = g = new vp.Gadget(v));
	g.x = 500+5; g.y = 55; g.w = 139; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT | vp.GAF_CONTEXTMENU;
	g.text = ''; g.label = tr('price'); g.limitChars = '0123456789';
	g.limitLenFunc = function() { return this.text.replace('.','').length >= 11; }
	g.currency = defaultVendorCurrency;
	g.contextMenuFunc = function() {
		this.cycleCurrency();
	}
	g.cycleCurrency = function() {
		var g = this;
		var i = enabledVendorCurrencies.indexOf(g.icon);
		i += 1;
		if (i >= enabledVendorCurrencies.length) i = 0;
		g.icon = enabledVendorCurrencies[i];
		g.viewport.unitprice.currency = enabledVendorCurrencies[i];
		choosemethod.setRenderFlag(true);
	}
	g.specialKeys = ['*', '$'];
	g.align = 'r';
	g.layoutFunc = function() {
		var g = this, v = g.viewport, s = v.getScale();
		g.W = v.w/s; //g.x = (g.W - g.w) / 2;
		g.H = v.h/s; //g.y = g.h + 5; //(g.H - g.h) / 2 + 50;
		g.autoHull();
	}
	g.renderFunc = v.method.renderFunc;
	g.textBeginFunc = function() {
		var g = this;
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.method); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if ((v.method.text.trim() != '' || v.qty.text.trim() != ''
		|| v.taxrate.text.trim() != '') && this.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.unitprice);
		} else {
			vp.beginInput(v.qty);
		}
	}
	g.specialFunc = function(e) {
		switch (e.key) {
		case '*': this.textNextFunc(); break;
		case '$':	this.cycleCurrency(); break;
		}
	}
v.gadgets.push(v.qty = g = new vp.Gadget(v));
	g.x = 500+149; g.y = 55; g.w = 46; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('qty'); g.limitChars = '0123456789.';
	g.limitLenFunc = function() {
		return this.text.replace('.','').length >= (this.text.startsWith('.')?3:4);
	}
	g.align = 'r';
	g.layoutFunc = function() {
		var g = this, v = g.viewport, s = v.getScale();
		g.W = v.w/s; //g.x = (g.W - g.w) / 2;
		g.H = v.h/s; //g.y = g.h + 5; //(g.H - g.h) / 2 + 50;
		g.autoHull();
	}
	g.renderFunc = function() {
		var g = this, v = g.viewport;
		v.method.renderFunc.call(g);
	}
	g.textBeginFunc = function() {
		var g = this, v = g.viewport;
		if (g.text == '' && v.unitprice.text != '') {
			g.text = '1';
		}
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.unitprice); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if ((v.method.text.trim() != '' || v.unitprice.text.trim() != ''
		|| v.taxrate.text.trim() != '') && (+this.text) == 0) {
			vp.beep();
			vp.beginInput(v.qty);
		} else {
			vp.beginInput(v.taxrate);
		}
	}
v.gadgets.push(v.taxrate = g = new vp.Gadget(v));
	g.x = 500+200; g.y = 55; g.w = 35; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('tax'); g.limitChars = '0123456789';
	g.limitLenFunc = function() { return this.text.length >= 2; }
	g.align = 'r'; g.margin = 12;
	g.autoHull();
	g.renderFunc = v.method.renderFunc;
	g.textBeginFunc = function() {
		var g = this, v = g.viewport;
		if (g.text == '' && v.unitprice.text != '') {
			g.text = '10';
		}
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.qty); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if ((v.method.text.trim() != '' || v.unitprice.text.trim() != ''
		|| v.qty.text.trim() != '') && this.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.taxrate);
		} else if ((v.qty.text.trim() != '' || v.taxrate.text.trim() != '')
		&& v.unitprice.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.unitprice);
		} else {
			var value = v.unitprice.text.trim();
			if (value != '' && ['$', '€'].includes(v.unitprice.currency)) {
				value = (v.unitprice.text * 100).toString();
			}
			var li = new LineItem(
				v.method.text.trim(),
				v.unitprice.currency, value,
				v.qty.text.trim(),
				v.taxrate.text.trim());
			if (!li.isEmpty()) {
				v.setConversionRates();
//for (i=0; i<30; i++) {
				invoicepane.invoiceitems.unshift(li);
//}
				invoicepane.setRenderFlag(true);
				v.clearDataEntry();
				vp.beginInput(v.method);
			} else {
				vp.endInput();
				if (invoicepane.invoiceitems.length > 0)
					checkoutpages.swipeGad.doSwipe(true);
			}
		}
	}
v.setConversionRates = function() {
	this.conv = JSON.parse(JSON.stringify(conversionRates));
}
v.cconv = function(a, f, t) {
	return Math.ceil(a /* * this.conv[f][t] */);
}
v.clearDataEntry = function() {
	this.method.text = '';
	this.unitprice.currency = defaultVendorCurrency;
	this.unitprice.text = '';
	this.qty.text = '';
	this.taxrate.text = '';
}
v.layoutFunc = function() {
	var totalW = 0; for (const g of Object.values(this.methods)) totalW += g.w;
	var space = (240 - totalW) / (Object.values(this.methods).length * 2);
	var x = 0;
	for (const g of Object.values(this.methods)) {
		g.x = x + space;
		x += space + g.w + space;
	}
	for (const g of this.gadgets) {
		if (g.layoutFunc) g.layoutFunc.call(g);
	}
}
v.renderFunc = function() {
	const th = vendorColors;
	gl.clearColor(...th.uiBackground);
	gl.clear(gl.COLOR_BUFFER_BIT);

	useProg5();
	gl.enable(gl.BLEND);
	gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
		new Float32Array([1,1,1,1]));
	gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uProjectionMatrix'), false, this.mat);

	const m = mat4.create();
	mat4.identity(m);
	mat4.translate(m, m, [5, 5, 0]);
	mat4.scale(m, m, [10, 10, 1]);
	gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, m);
	gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
		new Float32Array([1,1,1,1]));
	gl.drawArrays(typ5.speech1i, beg5.speech1i, len5.speech1i);
	gl.drawArrays(typ5.speech1o, beg5.speech1o, len5.speech1o);
	gl.drawArrays(typ5.speech1j, beg5.speech1j, len5.speech1j);
	t = tr('How would you like to pay?');
	w = defaultFont.calcWidth(t);
	mat4.identity(m);
	mat4.translate(m, m, [12.5, 5 + 15, 0]);
	mat4.scale(m, m, [210/w, 210/w, 1]);
	defaultFont.draw(0,7, t, th.uiText, this.mat, m);

	for (const g of this.gadgets) {
		if (g.renderFunc) g.renderFunc.call(g);
	}

/*
	var m = mat4.create();
	var scale = [0.5, 0.5, 1];
	for (const g of this.gadgets) {
		mat4.identity(m);
		mat4.translate(m, m, [g.x + 2, g.y - 2, 0]);
		mat4.scale(m, m, scale);
		defaultFont.draw(0,0, g.label, th.uiTextLabel, this.mat, m);
	}

	if (this === choosemethod) {
		var e = (this.method.text != ''
					|| this.unitprice.text != ''
					|| this.qty.text != ''
					|| this.taxrate.text != ''
					|| invoicepane.invoiceitems.length > 0);
		if (e != buttonbar.trashGad.enabled) {
			buttonbar.trashGad.enabled = e;
			buttonbar.setRenderFlag(true);
		}
	}
*/
}
var dataentry = v = new vp.View(null);
v.name = Object.keys({dataentry}).pop();
//v.designFit = [240,80];
v.designHeight = 80;
v.gadgets.push(v.item = g = new vp.Gadget(v));
	g.x = 5; g.y = 20; g.w = 230; g.h = 20;
	g.actionFlags = vp.GAF_TEXTINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('item'); g.autoHull();
	g.renderFunc = function() {
		var g = this, v = g.viewport;
		var sel = vp.getInputGad() === g;
		const th = this.viewport === dataentry? vendorColors : customerColors;
		const mat = mat4.create();
		useProg5();
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x-1, g.y-11, 0]);
		mat4.scale(mat, mat, [g.w+2, g.h+12, 1]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(th.uiTextLabelArea));
		gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x, g.y, 0]);
		mat4.scale(mat, mat, [g.w, g.h, 1]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(th.uiTextField));
		gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
		if (sel) {
			gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
				new Float32Array(th.uiTextFocus));
			for (var i=0; i<4; i++) {
				mat4.identity(mat);
				switch (i) {
				case 0: mat4.translate(mat, mat, [g.x-1, g.y-1, 0]);
					mat4.scale(mat, mat, [2, g.h+2, 1]); break;
				case 1: mat4.translate(mat, mat, [g.x-1, g.y-1, 0]);
					mat4.scale(mat, mat, [g.w+2, 2, 1]); break;
				case 2: mat4.translate(mat, mat, [g.x-1, g.y+g.h-1, 0]);
					mat4.scale(mat, mat, [g.w+2, 2, 1]); break;
				case 3: mat4.translate(mat, mat, [g.x+g.w-1, g.y-1, 0]);
					mat4.scale(mat, mat, [2, g.h+2, 1]); break;
				}
				gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
				gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
			}
		}
		var str = g.text.toUpperCase();
		if (g === v.qty && v.qty.text.trim() != '') {
			str = (+g.text).toLocaleString(lcode, {});
		}
		mat4.identity(mat);
		var tw = defaultFont.calcWidth(str);
		if (g.align && g.align == 'r') {
			mat4.translate(mat, mat, [g.x+g.w-2-tw-(g.margin?g.margin:0), g.y+16, 0]);
		} else {
			mat4.translate(mat, mat, [g.x+2, g.y+16, 0]);
		}
		defaultFont.draw(0,0, str, th.uiText, v.mat, mat);

		// Add decorations.
		if (g === v.unitprice) {
			var s = v.unitprice.currency;
			var c = (s == '₿')? th.uiLightningYellow : th.uiFiatGreen;
			if (s == '₿') s = '🗲';
			mat4.identity(mat);
			mat4.translate(mat, mat, [g.x+2, g.y+16, 0]);
			defaultFont.draw(0,0, s, c, v.mat, mat);
//		} else if (g == v.qty && v.qty.text.startsWith('.')) {
//			mat4.identity(mat);
//			mat4.translate(mat, mat, [g.x+g.w-2-tw-(g.margin?g.margin:0), g.y+16, 0]);
//			defaultFont.draw(-defaultFont.calcWidth('0'),0, '0', th.uiGhostText, v.mat, mat);
		} else if (g === v.taxrate && g.text != '') {
			defaultFont.draw(0,0, '%', th.uiGhostText, v.mat, mat);
		}
	}
	g.textBeginFunc = function() {
		var g = this;
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.item); }
	g.textNextFunc = function() { vp.beginInput(this.viewport.unitprice); }
/*
v.gadgets.push(v.currency = g = new vp.Gadget(v));
	g.w = 42; g.h = 21; g.actionFlags = vp.GAF_CLICKABLE;
	g.x = 4; g.y = 55;
	g.autoHull();
	g.label = tr('currency');
	g.icon = defaultVendorCurrency;
	g.renderFunc = function() {
		var g = this, th = g.parent === dataentry? vendorColors : customerColors;
		var sel = clickTapActive.includes(g.gestureState);
		const mat = mat4.create();
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x, g.y, 0]);
		mat4.scale(mat, mat, [g.w/36, g.h/18, 0]);
		mat4.translate(mat, mat, [-1, 16, 0]);
		c = (g.icon == '₿') ? th.uiPillOrange : th.uiFiatGreen;
		iconFont.draw(0,0, g.icon,
			sel?th.uiButtonSel:c,
			g.viewport.mat, mat);
		if (g.icon == '₿') {
			iconFont.draw(0,0, '🗲',
				sel?th.uiButtonSel:th.uiLightningPurple,
				g.viewport.mat, mat);
		}
	}
	g.clickFunc = function() {
		this.viewport.unitprice.cycleCurrency();
	}
*/
v.gadgets.push(v.unitprice = g = new vp.Gadget(v));
	g.x = 5; g.y = 55; g.w = 139; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT | vp.GAF_CONTEXTMENU;
	g.text = ''; g.label = tr('price'); g.limitChars = '0123456789';
	g.limitLenFunc = function() { return this.text.replace('.','').length >= 11; }
	g.currency = defaultVendorCurrency;
	g.contextMenuFunc = function() {
		this.cycleCurrency();
	}
	g.cycleCurrency = function() {
		var g = this;
		var i = enabledVendorCurrencies.indexOf(g.icon);
		i += 1;
		if (i >= enabledVendorCurrencies.length) i = 0;
		g.icon = enabledVendorCurrencies[i];
		g.viewport.unitprice.currency = enabledVendorCurrencies[i];
		dataentry.setRenderFlag(true);
	}
	g.specialKeys = ['*', '$'];
	g.align = 'r';
	g.layoutFunc = function() {
		var g = this, v = g.viewport, s = v.getScale();
		g.W = v.w/s; //g.x = (g.W - g.w) / 2;
		g.H = v.h/s; //g.y = g.h + 5; //(g.H - g.h) / 2 + 50;
		g.autoHull();
	}
	g.renderFunc = v.item.renderFunc;
	g.textBeginFunc = function() {
		var g = this;
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.item); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if ((v.item.text.trim() != '' || v.qty.text.trim() != ''
		|| v.taxrate.text.trim() != '') && this.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.unitprice);
		} else {
			vp.beginInput(v.qty);
		}
	}
	g.specialFunc = function(e) {
		switch (e.key) {
		case '*': this.textNextFunc(); break;
		case '$':	this.cycleCurrency(); break;
		}
	}
v.gadgets.push(v.qty = g = new vp.Gadget(v));
	g.x = 149; g.y = 55; g.w = 46; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('qty'); g.limitChars = '0123456789.';
	g.limitLenFunc = function() {
		return this.text.replace('.','').length >= (this.text.startsWith('.')?3:4);
	}
	g.align = 'r';
	g.layoutFunc = function() {
		var g = this, v = g.viewport, s = v.getScale();
		g.W = v.w/s; //g.x = (g.W - g.w) / 2;
		g.H = v.h/s; //g.y = g.h + 5; //(g.H - g.h) / 2 + 50;
		g.autoHull();
	}
	g.renderFunc = function() {
		var g = this, v = g.viewport;
		v.item.renderFunc.call(g);
	}
	g.textBeginFunc = function() {
		var g = this, v = g.viewport;
		if (g.text == '' && v.unitprice.text != '') {
			g.text = '1';
		}
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.unitprice); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if ((v.item.text.trim() != '' || v.unitprice.text.trim() != ''
		|| v.taxrate.text.trim() != '') && (+this.text) == 0) {
			vp.beep();
			vp.beginInput(v.qty);
		} else {
			vp.beginInput(v.taxrate);
		}
	}
v.gadgets.push(v.taxrate = g = new vp.Gadget(v));
	g.x = 200; g.y = 55; g.w = 35; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('tax'); g.limitChars = '0123456789';
	g.limitLenFunc = function() { return this.text.length >= 2; }
	g.align = 'r'; g.margin = 12;
	g.autoHull();
	g.renderFunc = v.item.renderFunc;
	g.textBeginFunc = function() {
		var g = this, v = g.viewport;
		if (g.text == '' && v.unitprice.text != '') {
			g.text = '10';
		}
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.qty); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if ((v.item.text.trim() != '' || v.unitprice.text.trim() != ''
		|| v.qty.text.trim() != '') && this.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.taxrate);
		} else if ((v.qty.text.trim() != '' || v.taxrate.text.trim() != '')
		&& v.unitprice.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.unitprice);
		} else {
			var value = v.unitprice.text.trim();
			if (value != '' && ['$', '€'].includes(v.unitprice.currency)) {
				value = (v.unitprice.text * 100).toString();
			}
			var li = new LineItem(
				v.item.text.trim(),
				v.unitprice.currency, value,
				v.qty.text.trim(),
				v.taxrate.text.trim());
			if (!li.isEmpty()) {
				v.setConversionRates();
//for (i=0; i<30; i++) {
				invoicepane.invoiceitems.unshift(li);
//}
				invoicepane.setRenderFlag(true);
				v.clearDataEntry();
				vp.beginInput(v.item);
			} else {
				vp.endInput();
				if (invoicepane.invoiceitems.length > 0)
					checkoutpages.swipeGad.doSwipe(true);
			}
		}
	}
v.setConversionRates = function() {
	this.conv = JSON.parse(JSON.stringify(conversionRates));
}
v.cconv = function(a, f, t) {
	return Math.ceil(a * this.conv[f][t]);
}
v.clearDataEntry = function() {
	this.item.text = '';
	this.unitprice.currency = defaultVendorCurrency;
	this.unitprice.text = '';
	this.qty.text = '';
	this.taxrate.text = '';
}
v.layoutFunc = function() {
	for (const g of this.gadgets) {
		if (g.layoutFunc) g.layoutFunc.call(g);
	}
}
v.renderFunc = function(flip = false) {
	// WARNING: This function is re-used by customertotal; "this" may vary!
	const th = this === dataentry? vendorColors : customerColors;
	gl.clearColor(...th.uiBackground);
	gl.clear(gl.COLOR_BUFFER_BIT);

	if (flip) {
		this.rematrix();
		var s = this.getScale();
		mat4.translate(this.mat, this.mat, [this.sw/2, this.sh/2, 0]);
		mat4.rotate(this.mat, this.mat, Math.PI, [0,0,1]);
		mat4.translate(this.mat, this.mat, [-this.sw/2, -this.sh/2, 0]);
		y = this.sh - 18;
	}

	useProg5();
	gl.enable(gl.BLEND);
	gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
		new Float32Array(th.uiTextLabel));
	gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uProjectionMatrix'), false, this.mat);

	for (const g of this.gadgets) {
		if (g.renderFunc) g.renderFunc.call(g);
	}

	var m = mat4.create();
	var scale = [0.5, 0.5, 1];
	for (const g of this.gadgets) {
		mat4.identity(m);
		mat4.translate(m, m, [g.x + 2, g.y - 2, 0]);
		mat4.scale(m, m, scale);
		defaultFont.draw(0,0, g.label, th.uiTextLabel, this.mat, m);
	}

	if (this === dataentry) {
		var e = (this.item.text != ''
					|| this.unitprice.text != ''
					|| this.qty.text != ''
					|| this.taxrate.text != ''
					|| invoicepane.invoiceitems.length > 0);
		if (e != buttonbar.trashGad.enabled) {
			buttonbar.trashGad.enabled = e;
			buttonbar.setRenderFlag(true);
		}
	}
}
var receivepayment = v = new vp.View(null);
v.name = Object.keys({receivepayment}).pop();
//v.designFit = [240,80];
v.designHeight = 80;
v.gadgets.push(v.method = g = new vp.Gadget(v));
	g.x = 5; g.y = 20; g.w = 230; g.h = 20;
	g.actionFlags = vp.GAF_TEXTINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('payment method'); g.autoHull();
	g.renderFunc = function() {
		var g = this, v = g.viewport;
		var sel = vp.getInputGad() === g;
		const th = this.viewport === receivepayment? vendorColors : customerColors;
		const mat = mat4.create();
		useProg5();
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x-1, g.y-11, 0]);
		mat4.scale(mat, mat, [g.w+2, g.h+12, 1]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(th.uiTextLabelArea));
		gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x, g.y, 0]);
		mat4.scale(mat, mat, [g.w, g.h, 1]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(th.uiTextField));
		gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
		if (sel) {
			gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
				new Float32Array(th.uiTextFocus));
			for (var i=0; i<4; i++) {
				mat4.identity(mat);
				switch (i) {
				case 0: mat4.translate(mat, mat, [g.x-1, g.y-1, 0]);
					mat4.scale(mat, mat, [2, g.h+2, 1]); break;
				case 1: mat4.translate(mat, mat, [g.x-1, g.y-1, 0]);
					mat4.scale(mat, mat, [g.w+2, 2, 1]); break;
				case 2: mat4.translate(mat, mat, [g.x-1, g.y+g.h-1, 0]);
					mat4.scale(mat, mat, [g.w+2, 2, 1]); break;
				case 3: mat4.translate(mat, mat, [g.x+g.w-1, g.y-1, 0]);
					mat4.scale(mat, mat, [2, g.h+2, 1]); break;
				}
				gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
				gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
			}
		}
		var str = g.text.toUpperCase();
		if (g === v.qty && v.qty.text.trim() != '') {
			str = (+g.text).toLocaleString(lcode, {});
		}
		mat4.identity(mat);
		var tw = defaultFont.calcWidth(str);
		if (g.align && g.align == 'r') {
			mat4.translate(mat, mat, [g.x+g.w-2-tw-(g.margin?g.margin:0), g.y+16, 0]);
		} else {
			mat4.translate(mat, mat, [g.x+2, g.y+16, 0]);
		}
		defaultFont.draw(0,0, str, th.uiText, v.mat, mat);

		// Add decorations.
		if (g === v.unitprice) {
			var s = v.unitprice.currency;
			var c = (s == '₿')? th.uiLightningYellow : th.uiFiatGreen;
			if (s == '₿') s = '🗲';
			mat4.identity(mat);
			mat4.translate(mat, mat, [g.x+2, g.y+16, 0]);
			defaultFont.draw(0,0, s, c, v.mat, mat);
//		} else if (g == v.qty && v.qty.text.startsWith('.')) {
//			mat4.identity(mat);
//			mat4.translate(mat, mat, [g.x+g.w-2-tw-(g.margin?g.margin:0), g.y+16, 0]);
//			defaultFont.draw(-defaultFont.calcWidth('0'),0, '0', th.uiGhostText, v.mat, mat);
		} else if (g === v.taxrate && g.text != '') {
			defaultFont.draw(0,0, '%', th.uiGhostText, v.mat, mat);
		}
	}
	g.textBeginFunc = function() {
		var g = this;
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.method); }
	g.textNextFunc = function() { vp.beginInput(this.viewport.unitprice); }
/*
v.gadgets.push(v.currency = g = new vp.Gadget(v));
	g.w = 42; g.h = 21; g.actionFlags = vp.GAF_CLICKABLE;
	g.x = 4; g.y = 55;
	g.autoHull();
	g.label = tr('currency');
	g.icon = defaultVendorCurrency;
	g.renderFunc = function() {
		var g = this, th = g.parent === receivepayment? vendorColors : customerColors;
		var sel = clickTapActive.includes(g.gestureState);
		const mat = mat4.create();
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x, g.y, 0]);
		mat4.scale(mat, mat, [g.w/36, g.h/18, 0]);
		mat4.translate(mat, mat, [-1, 16, 0]);
		c = (g.icon == '₿') ? th.uiPillOrange : th.uiFiatGreen;
		iconFont.draw(0,0, g.icon,
			sel?th.uiButtonSel:c,
			g.viewport.mat, mat);
		if (g.icon == '₿') {
			iconFont.draw(0,0, '🗲',
				sel?th.uiButtonSel:th.uiLightningPurple,
				g.viewport.mat, mat);
		}
	}
	g.clickFunc = function() {
		this.viewport.unitprice.cycleCurrency();
	}
*/
v.gadgets.push(v.unitprice = g = new vp.Gadget(v));
	g.x = 5; g.y = 55; g.w = 139; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT | vp.GAF_CONTEXTMENU;
	g.text = ''; g.label = tr('price'); g.limitChars = '0123456789';
	g.limitLenFunc = function() { return this.text.replace('.','').length >= 11; }
	g.currency = defaultVendorCurrency;
	g.contextMenuFunc = function() {
		this.cycleCurrency();
	}
	g.cycleCurrency = function() {
		var g = this;
		var i = enabledVendorCurrencies.indexOf(g.icon);
		i += 1;
		if (i >= enabledVendorCurrencies.length) i = 0;
		g.icon = enabledVendorCurrencies[i];
		g.viewport.unitprice.currency = enabledVendorCurrencies[i];
		receivepayment.setRenderFlag(true);
	}
	g.specialKeys = ['*', '$'];
	g.align = 'r';
	g.layoutFunc = function() {
		var g = this, v = g.viewport, s = v.getScale();
		g.W = v.w/s; //g.x = (g.W - g.w) / 2;
		g.H = v.h/s; //g.y = g.h + 5; //(g.H - g.h) / 2 + 50;
		g.autoHull();
	}
	g.renderFunc = v.method.renderFunc;
	g.textBeginFunc = function() {
		var g = this;
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.method); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if ((v.method.text.trim() != '' || v.qty.text.trim() != ''
		|| v.taxrate.text.trim() != '') && this.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.unitprice);
		} else {
			vp.beginInput(v.qty);
		}
	}
	g.specialFunc = function(e) {
		switch (e.key) {
		case '*': this.textNextFunc(); break;
		case '$':	this.cycleCurrency(); break;
		}
	}
v.gadgets.push(v.qty = g = new vp.Gadget(v));
	g.x = 149; g.y = 55; g.w = 46; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('qty'); g.limitChars = '0123456789.';
	g.limitLenFunc = function() {
		return this.text.replace('.','').length >= (this.text.startsWith('.')?3:4);
	}
	g.align = 'r';
	g.layoutFunc = function() {
		var g = this, v = g.viewport, s = v.getScale();
		g.W = v.w/s; //g.x = (g.W - g.w) / 2;
		g.H = v.h/s; //g.y = g.h + 5; //(g.H - g.h) / 2 + 50;
		g.autoHull();
	}
	g.renderFunc = function() {
		var g = this, v = g.viewport;
		v.method.renderFunc.call(g);
	}
	g.textBeginFunc = function() {
		var g = this, v = g.viewport;
		if (g.text == '' && v.unitprice.text != '') {
			g.text = '1';
		}
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.unitprice); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if ((v.method.text.trim() != '' || v.unitprice.text.trim() != ''
		|| v.taxrate.text.trim() != '') && (+this.text) == 0) {
			vp.beep();
			vp.beginInput(v.qty);
		} else {
			vp.beginInput(v.taxrate);
		}
	}
v.gadgets.push(v.taxrate = g = new vp.Gadget(v));
	g.x = 200; g.y = 55; g.w = 35; g.h = 20;
	g.actionFlags = vp.GAF_NUMINPUT | vp.GAF_GONEXT;
	g.text = ''; g.label = tr('tax'); g.limitChars = '0123456789';
	g.limitLenFunc = function() { return this.text.length >= 2; }
	g.align = 'r'; g.margin = 12;
	g.autoHull();
	g.renderFunc = v.method.renderFunc;
	g.textBeginFunc = function() {
		var g = this, v = g.viewport;
		if (g.text == '' && v.unitprice.text != '') {
			g.text = '10';
		}
		g.viewport.setRenderFlag(true);
	}
	g.textFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textEndFunc = function() {
		this.viewport.setRenderFlag(true);
	}
	g.textPrevFunc = function() { vp.beginInput(this.viewport.qty); }
	g.textNextFunc = function() {
		var g = this, v = g.viewport;
		if ((v.method.text.trim() != '' || v.unitprice.text.trim() != ''
		|| v.qty.text.trim() != '') && this.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.taxrate);
		} else if ((v.qty.text.trim() != '' || v.taxrate.text.trim() != '')
		&& v.unitprice.text.trim() == '') {
			vp.beep();
			vp.beginInput(v.unitprice);
		} else {
			var value = v.unitprice.text.trim();
			if (value != '' && ['$', '€'].includes(v.unitprice.currency)) {
				value = (v.unitprice.text * 100).toString();
			}
			var li = new LineItem(
				v.method.text.trim(),
				v.unitprice.currency, value,
				v.qty.text.trim(),
				v.taxrate.text.trim());
			if (!li.isEmpty()) {
				v.setConversionRates();
//for (i=0; i<30; i++) {
				invoicepane.invoiceitems.unshift(li);
//}
				invoicepane.setRenderFlag(true);
				v.clearDataEntry();
				vp.beginInput(v.method);
			} else {
				vp.endInput();
				if (invoicepane.invoiceitems.length > 0)
					checkoutpages.swipeGad.doSwipe(true);
			}
		}
	}
v.setConversionRates = function() {
	this.conv = JSON.parse(JSON.stringify(conversionRates));
}
v.cconv = function(a, f, t) {
	return Math.ceil(a /* * this.conv[f][t] */);
}
v.clearDataEntry = function() {
	this.method.text = '';
	this.unitprice.currency = defaultVendorCurrency;
	this.unitprice.text = '';
	this.qty.text = '';
	this.taxrate.text = '';
}
v.layoutFunc = function() {
	for (const g of this.gadgets) {
		if (g.layoutFunc) g.layoutFunc.call(g);
	}
}
v.renderFunc = function(flip = false) {
	// WARNING: This function is re-used by customertotal; "this" may vary!
	const th = this === receivepayment? vendorColors : customerColors;
	gl.clearColor(...th.uiBackground);
	gl.clear(gl.COLOR_BUFFER_BIT);

	if (flip) {
		this.rematrix();
		var s = this.getScale();
		mat4.translate(this.mat, this.mat, [this.sw/2, this.sh/2, 0]);
		mat4.rotate(this.mat, this.mat, Math.PI, [0,0,1]);
		mat4.translate(this.mat, this.mat, [-this.sw/2, -this.sh/2, 0]);
		y = this.sh - 18;
	}

	useProg5();
	gl.enable(gl.BLEND);
	gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
		new Float32Array(th.uiTextLabel));
	gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uProjectionMatrix'), false, this.mat);

	for (const g of this.gadgets) {
		if (g.renderFunc) g.renderFunc.call(g);
	}

	var m = mat4.create();
	var scale = [0.5, 0.5, 1];
	for (const g of this.gadgets) {
		mat4.identity(m);
		mat4.translate(m, m, [g.x + 2, g.y - 2, 0]);
		mat4.scale(m, m, scale);
		defaultFont.draw(0,0, g.label, th.uiTextLabel, this.mat, m);
	}

	if (this === receivepayment) {
		var e = (this.method.text != ''
					|| this.unitprice.text != ''
					|| this.qty.text != ''
					|| this.taxrate.text != ''
					|| invoicepane.invoiceitems.length > 0);
		if (e != buttonbar.trashGad.enabled) {
			buttonbar.trashGad.enabled = e;
			buttonbar.setRenderFlag(true);
		}
	}
}

var buttonbar = v = new vp.View(null);
v.name = Object.keys({buttonbar}).pop();
v.designFit = [400,50];
v.gadgets.push(v.homeGad = g = new vp.Gadget(v));
	g.w = 30; g.h = 30; g.actionFlags = vp.GAF_CLICKABLE;
	g.x = (50 - g.w)/2; g.y = (50 - g.h)/2;
	g.autoHull();
	g.icon = "\x00";
	g.renderFunc = function() {
		var g = this;
		var sel = clickTapActive.includes(g.gestureState);
		const mat = mat4.create();
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x, g.y, 0]);
		mat4.scale(mat, mat, [g.w/18, g.h/18, 0]);
		mat4.translate(mat, mat, [-1, 16, 0]);
		iconFont.draw(0,0, g.icon,
			g.enabled?(sel?vendorColors.uiButtonSel:vendorColors.uiButton):vendorColors.uiButtonGhost,
			g.viewport.mat, mat);
	}
	g.clickFunc = function() {
		transitionTo(startpane, 'min');
	}
v.gadgets.push(v.pushGad = g = new vp.Gadget(v));
	g.w = 30; g.h = 30; g.actionFlags = vp.GAF_CLICKABLE;
	g.x = 50 + (50 - g.w)/2; g.y = (50 - g.h)/2;
	g.autoHull();
	g.icon = "\x01";
	g.renderFunc = v.homeGad.renderFunc;
	g.clickFunc = function() {
		console.log('pushGad');
	}
v.gadgets.push(v.popGad = g = new vp.Gadget(v));
	g.w = 30; g.h = 30; g.actionFlags = vp.GAF_CLICKABLE;
	g.x = 100 + (50 - g.w)/2; g.y = (50 - g.h)/2;
	g.autoHull();
	g.icon = "\x02";
	g.enabled = false;
	g.renderFunc = v.homeGad.renderFunc;
	g.clickFunc = function() {
		console.log('popGad');
	}
v.gadgets.push(v.trashGad = g = new vp.Gadget(v));
	g.w = 30; g.h = 30; g.actionFlags = vp.GAF_CLICKABLE;
	g.x = 150 + (50 - g.w)/2; g.y = (50 - g.h)/2;
	g.autoHull();
	g.icon = "\x03";
	g.renderFunc = v.homeGad.renderFunc;
	g.clickFunc = function() {
		if (window.confirm(tr("Discard this invoice?"))) {
			dataentry.clearDataEntry();
			invoicepane.invoiceitems = [];
			invoicepane.setRenderFlag(true);
			checkoutpages.toPage(0);
		}
	}
v.layoutFunc = function() {
	var totalW = 0; for (const g of this.gadgets) totalW += g.w;
	var space = (this.w / this.getScale() - totalW) / (this.gadgets.length * 2);
	var x = 0;
	for (const g of this.gadgets) {
		g.x = x + space;
		x += space + g.w + space;
	}
}
v.renderFunc = function() {
	const th = vendorColors;
	gl.clearColor(...th.uiBackground);
	gl.clear(gl.COLOR_BUFFER_BIT);
	for (const g of this.gadgets) {
		if (g.renderFunc) g.renderFunc.call(g);
	}
}

var extra1 = v = new vp.View(null);
v.name = Object.keys({extra1}).pop();
v.renderFunc = function() {
	gl.clearColor(0,1,0, 1);
	gl.clear(gl.COLOR_BUFFER_BIT);
}

var extra2 = v = new vp.View(null);
v.name = Object.keys({extra2}).pop();
v.renderFunc = function() {
	gl.clearColor(0,0,1, 1);
	gl.clear(gl.COLOR_BUFFER_BIT);
}

var checkoutpages = v = new vp.PagesView(null, 'h');
v.name = Object.keys({checkoutpages}).pop();
v.swipeGad.z = -1;
v.swipeGad.swipeBeginFuncF = v.swipeGad.swipeBeginFunc;
v.swipeGad.swipeBeginFunc = function(p) {
	var g = this;
	vp.endInput();
	g.swipeBeginFuncF.call(g, p);
}
v.pages.push(dataentry);
v.pages.push(choosemethod);
v.pages.push(cashback);
v.pages.push(receivepayment);
//v.pages.push(extra1);
//v.pages.push(extra2);
v.pageChangeFunc = function() {
	checkoutprogress.setRenderFlag(true);
}

var checkoutprogress = v = new vp.View(null);
v.name = Object.keys({checkoutprogress}).pop();
v.renderFunc = function() {
	const th = vendorColors;
	gl.clearColor(...th.uiBackground);
	gl.clear(gl.COLOR_BUFFER_BIT);
	var m = mat4.create(), icon = '.', sp = 5;
	mat4.identity(m); mat4.translate(m, m, [(this.w/this.getScale() - sp - (defaultFont.calcWidth(icon) + sp) * checkoutpages.pages.length)/2, 4, 0]);

	for (i=0; i<checkoutpages.pages.length; i++) {
	  defaultFont.draw(sp,0, icon, i==checkoutpages.index?th.uiText:th.uiButtonGhost, this.mat, m);
	}
}

var checkoutsteps = v = new vp.SliceView(null, 'b', 10);
v.name = Object.keys({checkoutsteps}).pop();
v.designWidth = 240;
v.a = checkoutprogress; checkoutprogress.parent = v;
v.b = checkoutpages; checkoutpages.parent = v;

var vendorinvoice = v = new vp.View(null);
v.name = Object.keys({vendorinvoice}).pop();
v.designWidth = 400;
v.minX = 0; v.maxX = 400;
v.minY = 0; v.maxY = 32;
v.gadgets.push(v.swipeGad = new vp.SwipeGadget(v));
v.swipeGad.actionFlags = vp.GAF_SWIPEABLE_UPDOWN | vp.GAF_SCROLLABLE_UPDOWN;
v.layoutFunc = function() {
	this.swipeGad.layout.call(this.swipeGad);
};
//var scrollbar;
v.renderFunc = function(flip = false) {
	// WARNING: This is called by customerinvoice also, so "this" may be either!
	const th = this === vendorinvoice? vendorColors : customerColors;
	var /*g = scrollbar.knobGad,*/ s = this.getScale();
//	g.shown = this.h/this.getScale();
//  g.total = this.maxY;
//  g.start = this.userY;
//	g.viewport.relayout();
	//g.viewport.setRenderFlag(true);

	gl.clearColor(...th.uiBackground);
	gl.clear(gl.COLOR_BUFFER_BIT);
	if (flip && !customerpane.parent) return;

	var y = 16, h = 0, w, t, c, s, d, dir = 1;
	if (flip) {
		y = this.h/s - 18; dir = -1;
	}

	var skip = 0;
	if (this.scrollY == undefined) this.scrollY = 0;
	if (this.countN == undefined) this.countN = 0;
	if (this.countN < invoicepane.invoiceitems.length) {
		this.scrollY += dir * 2;
		if (Math.abs(this.scrollY) >= 32) {
			this.scrollY = 0;
			this.countN += 1;
		}
		y += this.scrollY;
		skip = invoicepane.invoiceitems.length - this.countN;
		this.setRenderFlag(true);
	}

	useProg5();
	this.rematrix();
  var m = mat4.create();
	gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uProjectionMatrix'), false, this.mat);
	gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'), new Float32Array([1,1,1,1]));
	mat4.identity(m);
	if (flip) {
		mat4.translate(m, m, [0, 1 - this.scrollY, 0]);
		mat4.scale(m, m, [this.sw, 32, 1]);
		mat4.translate(m, m, [0, Math.floor(this.userY / 32), 0]);
	} else {
		mat4.translate(m, m, [0, 1 + this.scrollY, 0]);
		mat4.scale(m, m, [this.sw, -32, 1]);
		mat4.translate(m, m, [0, -1 - Math.floor(this.sh / 32) - Math.floor(this.userY / 32), 0]);
	}
	var typ5o, beg5o, len5o;
	if (this === vendorinvoice) {
		typ5o = typ5.vendorLedger; beg5o = beg5.vendorLedger; len5o = len5.vendorLedger;
	} else {
		typ5o = typ5.customerLedger, beg5o = beg5.customerLedger, len5o = len5.customerLedger;
	}
	for (var i=0; i<=this.sh/32; i++) {
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, m);
		gl.drawArrays(typ5o, beg5o, len5o);
		mat4.translate(m, m, [0, 1, 0]);
	}

	if (flip) {
		this.rematrix();
		var s = this.getScale();
		mat4.translate(this.mat, this.mat, [this.w/2/s, this.h/2/s, 0]);
		mat4.rotate(this.mat, this.mat, Math.PI, [0,0,1]);
		mat4.translate(this.mat, this.mat, [-this.w/2/s, -this.h/2/s, 0]);
	}

	var currencies = [];
	for (const li of invoicepane.invoiceitems) {
		if (!currencies.includes(li.currency)) currencies.push(li.currency);
	}
	if (!currencies.includes(customertotal.currency.icon))
		currencies.push(customertotal.currency.icon);

	var cust = (this === customerinvoice);
	var lang = cust ? customertitlebar.language.lang : lcode;
	if (true) {
		if (cust) y += 16;
		mat4.identity(m); mat4.translate(m, m, [10, y - this.scrollY, 0]);
		defaultFont.draw(0,0, tr('subtotal')+':',
			alpha(th.uiText, 1 - Math.abs(this.scrollY) / 16), this.mat, m);

		mat4.identity(m); mat4.translate(m, m, [10, y - this.scrollY, 0]);
		var subtot = 0;
		s = cust? customertotal.currency.icon : defaultVendorCurrency;
		var sk = skip;
		for (const li of invoicepane.invoiceitems) {
			if (skip > 0) { skip -= 1; continue; }
			subtot += dataentry.cconv(li.unitprice * li.qty, li.currency, s);
		}
		skip = sk;
		t = (+subtot).toString();
		if (['$', '€'].includes(s)) {
			t = (t/100).toLocaleString(lang, {minimumFractionDigits:2, maximumFractionDigits:2});
		} else {
			t = (+t).toLocaleString(lang, {maximumFractionDigits:0});
		}
		w = defaultFont.calcWidth(t);
		defaultFont.draw(340-w,0, t,
			alpha(th.uiText, 1 - Math.abs(this.scrollY) / 16), this.mat, m);
		if (currencies.length > 1) {
			d = s; if (d == '₿') d = '🗲';
			c = (s == '₿')? th.uiLightningYellow : th.uiFiatGreen;
			mat4.identity(m); mat4.translate(m, m, [10, y - this.scrollY, 0]);
			defaultFont.draw(340-w-3-defaultFont.calcWidth(d),0, d,
				alpha(c, 1 - Math.abs(this.scrollY) / 16), this.mat, m);
		}

		if (cust) y -= 16;
		//y -= 16;
		y += 32 * dir;
		h += 32;
	}
	for (const li of invoicepane.invoiceitems) {
		if (skip > 0) { skip -= 1; continue; }
		s = cust? customertotal.currency.icon : li.currency;
		d = s; if (d == '₿') d = '🗲';
		c = (s == '₿')? th.uiLightningYellow : th.uiFiatGreen;
		//	'⃀' temporary approximately equal sign
		mat4.identity(m); mat4.translate(m, m, [10, y, 0]);
		defaultFont.draw(0,0, li.item.toUpperCase(), th.uiText, this.mat, m);
		y += 16;
		mat4.identity(m); mat4.translate(m, m, [10, y, 0]);
		if (li.qty.includes('.')) {
			t = (+li.qty).toLocaleString(lang,
				{minimumFractionDigits:3, maximumFractionDigits:3}); w = defaultFont.calcWidth(t);
		} else {
			t = parseInt(li.qty).toString(); w = defaultFont.calcWidth(t);
		}
		defaultFont.draw(36-w,0, t + ' ×', th.uiText, this.mat, m);

		mat4.identity(m); mat4.translate(m, m, [10, y, 0]);
		t = (+dataentry.cconv(li.unitprice, li.currency, s)).toString();
		if (['$', '€'].includes(s)) {
			t = (t/100).toLocaleString(lang, {minimumFractionDigits:2, maximumFractionDigits:2});
		} else {
			t = (+t).toLocaleString(lang, {maximumFractionDigits:0});
		}
		w = defaultFont.calcWidth(t);
		defaultFont.draw(180-w,0, t, th.uiText, this.mat, m);
		if (currencies.length > 1) {
			mat4.identity(m); mat4.translate(m, m, [10, y, 0]);
			defaultFont.draw(180-w-3-defaultFont.calcWidth(d),0, d, c, this.mat, m);
		}

		mat4.identity(m); mat4.translate(m, m, [10, y, 0]);
		t = (dataentry.cconv(li.unitprice * li.qty, li.currency, s).toString());
		if (['$', '€'].includes(s)) {
			t = (t/100).toLocaleString(lang, {minimumFractionDigits:2, maximumFractionDigits:2});
		} else {
			t = (+t).toLocaleString(lang, {maximumFractionDigits:0});
		}
		w = defaultFont.calcWidth(t);
		defaultFont.draw(340-w,0, t, th.uiText, this.mat, m);
		if (currencies.length > 1) {
			mat4.identity(m); mat4.translate(m, m, [10, y, 0]);
			defaultFont.draw(340-w-3-defaultFont.calcWidth(d),0, d, c, this.mat, m);
		}

		mat4.identity(m); mat4.translate(m, m, [10, y, 0]);
		t = +li.taxrate + '%'; w = defaultFont.calcWidth(t);
		defaultFont.draw(380-w,0, t, th.uiText, this.mat, m);
		y -= 16;
		y += 32 * dir;
		h += 32;
	}
	this.maxY = h + Math.abs(this.scrollY);
	this.swipeGad.layout.call(this.swipeGad);
};

var vendormain = v = new vp.SliceView(null, 't', 90/240);
v.name = Object.keys({vendormain}).pop();
v.prop = true;
v.a = checkoutsteps; checkoutsteps.parent = v;
v.b = vendorinvoice; vendorinvoice.parent = v;

var vendorpane = v = new vp.SliceView(null, 'b', 0.125);
v.name = Object.keys({vendorpane}).pop();
v.prop = true;
v.a = buttonbar; buttonbar.parent = v;
v.b = vendormain; vendormain.parent = v;
var invoicepane, customerpane, customertotal;

var customertitlebar = v = new vp.View(null);
v.name = Object.keys({customertitlebar}).pop();
v.label = tr('Customer Bill')+' '; // Space ensures init.
v.gadgets.push(v.language = g = new vp.Gadget(v));
	g.actionFlags = vp.GAF_CLICKABLE;
	g.lang = defaultCustomerLang;
	g.clickFunc = function() {
		var g = this;
		var i = enabledCustomerLangs.indexOf(g.lang);
		i += 1;
		if (i >= enabledCustomerLangs.length) i = 0;
		g.lang = enabledCustomerLangs[i];
		g.viewport.label += ' ';
		customertitlebar.requeueLayout();
		customerpane.setRenderFlag(true);
	}
v.skipUpdate = false;
v.layoutFunc = function() {
	var v = this;
	var label = tr('Customer Bill', customertitlebar.language.lang);
	if (label != v.label && customertotal) {
		v.label = label;
		v.neededWidth = defaultFont.calcWidth(v.label)+8;
		v.designWidth = v.neededWidth;
		customerpane.sizeH = customerpane.sizeV = 18/v.neededWidth;
		customerpane.requeueLayout();
		v.skipUpdate = true;
	}
	var g = v.language;
	g.w = v.sw; g.h = v.sh;
	g.autoHull();
}
v.renderFunc = function() {
	const th = customerColors;
	var v = this;
	gl.clearColor(...th.uiBackground);
	gl.clear(gl.COLOR_BUFFER_BIT);
	if (!v.skipUpdate) {
		var m = mat4.create(); mat4.identity(m);
		mat4.translate(m, m, [v.sw/2, v.sh/2, 0]);
		mat4.rotate(m, m, Math.PI, [0,0,1]);
		mat4.translate(m, m, [-v.sw/2, -v.sh/2, 0]);
		defaultFont.draw(4,16, v.label, th.uiText, v.mat, m);
	}
	if (v.skipUpdate) {
		v.skipUpdate = false;
		v.setRenderFlag(true);
	}
};

var customerinvoice = v = new vp.View(null);
v.name = Object.keys({customerinvoice}).pop();
v.designWidth = 400;
v.minX = 0; v.maxX = 400;
v.minY = 0; v.maxY = 32;
v.gadgets.push(v.swipeGad = new vp.SwipeGadget(v));
v.swipeGad.actionFlags = vp.GAF_SWIPEABLE_UPDOWN | vp.GAF_SCROLLABLE_UPDOWN;
v.layoutFunc = function() {
	this.swipeGad.layout.call(this.swipeGad);
};
v.renderFunc = function() {
	vendorinvoice.renderFunc.call(customerinvoice, true);
};

var customertotal = v = new vp.View(null);
v.name = Object.keys({customertotal}).pop();
v.designFit = [240,32];
v.gadgets.push(v.currency = g = new vp.Gadget(v));
	g.w = 42; g.h = 21; g.actionFlags = vp.GAF_CLICKABLE;
	g.x = 4; g.y = 19;
	g.autoHull();
	g.label = tr('currency');
	g.icon = defaultCustomerCurrency;
	g.renderFunc = function() {
		var g = this, th = customerColors;
		g.label = tr('currency', customertitlebar.language.lang);
		var sel = clickTapActive.includes(g.gestureState);
		const mat = mat4.create();
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x, g.y, 0]);
		mat4.scale(mat, mat, [g.w/36, g.h/18, 0]);
		mat4.translate(mat, mat, [-1, 16, 0]);
		const c = (g.icon == '₿') ? th.uiPillOrange : th.uiFiatGreen;
		iconFont.draw(0,0, g.icon, sel?th.uiButtonSel:c, g.viewport.mat, mat);
		if (g.icon == '₿') {
			iconFont.draw(0,0, '🗲',
				sel?th.uiButtonSel:th.uiLightningPurple, g.viewport.mat, mat);
		}
	}
	g.clickFunc = function() {
		var g = this;
		var i = enabledCustomerCurrencies.indexOf(g.icon);
		i += 1;
		if (i >= enabledCustomerCurrencies.length) i = 0;
		g.icon = enabledCustomerCurrencies[i];
		invoicepane.setRenderFlag(true);
	}
	g.getHitsF = g.getHits;
	g.getHits = function(hitList, radius) {
		var g = this, v = g.viewport;
		var hl = new vp.HitList(v.w - hitList.x, v.h - hitList.y);
		this.viewport.currency.getHitsF.call(this, hl, radius);
		while (hl.hits.length) hitList.hits.push(hl.hits.pop());
	}
v.gadgets.push(v.subtotal = g = new vp.Gadget(v));
	g.x = 53; g.y = 19; g.w = 240 - g.x - 5; g.h = 20;
	g.text = '0'; g.label = tr('subtotal');
	g.align = 'r';
	g.autoHull();
	g.renderFunc = function() {
		var g = this, v = g.viewport;
		g.label = tr('subtotal', customertitlebar.language.lang);
		var subtotal = 0;
		var lang = customertitlebar.language.lang;
		var s = customertotal.currency.icon;
		var d = s; if (d == '₿') d = '🗲';
		var c = (s == '₿')? customerColors.uiLightningYellow : customerColors.uiFiatGreen;
		for (const li of invoicepane.invoiceitems) {
			//	'⃀' temporary approximately equal sign
			subtotal += dataentry.cconv(li.qty * li.unitprice, li.currency, s);
		}

		var t = subtotal, w, m = mat4.create();
		if (['$', '€'].includes(s)) {
			t = (t/100).toLocaleString(lang, {minimumFractionDigits:2, maximumFractionDigits:2});
		} else {
			t = (+t).toLocaleString(lang, {maximumFractionDigits:0});
		}
		g.text = '';
		dataentry.item.renderFunc.call(g);

		w = defaultFont.calcWidth(t);
		mat4.identity(m); mat4.translate(m, m, [g.x + g.w - 2, g.y + 16, 0]);
		defaultFont.draw(-w,0, t, customerColors.uiText, v.mat, m);
		mat4.identity(m); mat4.translate(m, m, [g.x + g.w - 2, g.y + 16, 0]);
		defaultFont.draw(-w-3-defaultFont.calcWidth(d),0, d, c, v.mat, m);
	}
v.layoutFunc = function() {
}
v.renderFunc = v.renderFunc = function() {
	dataentry.renderFunc.call(this, true);
}

var customermain = v = new vp.SliceView(null, 't', 49/240);
v.name = Object.keys({customermain}).pop();
v.prop = true;
v.a = customertotal; customertotal.parent = v;
v.b = customerinvoice; customerinvoice.parent = v;

var customerpane = v = new vp.SliceView(null, 'b', 0.125);
v.name = Object.keys({customerpane}).pop();
v.prop = true;
v.a = customertitlebar; customertitlebar.parent = v;
v.b = customermain; customermain.parent = v;

var vendorcustomerdiv = v = new vp.View();
v.name = Object.keys({vendorcustomerdiv}).pop();
v.designScale = 1;
v.gadgets.push(g = v.middleDividerGad = new vp.MiddleDividerGadget(v)); g.z = 1;
v.layoutFunc = function() { this.middleDividerGad.layout(); }
v.renderFunc = function() {
	const th = vendorColors;
	gl.clearColor(...th.uiBackground);
	gl.clear(gl.COLOR_BUFFER_BIT);
	useProg5();
	gl.enable(gl.BLEND);
	const mat = mat4.create();
	mat4.identity(mat);
	gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uProjectionMatrix'), false, this.mat);
	mat4.scale(mat, mat, [this.w, this.h, 0]);
	gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
	//gl.drawArrays(typ5.divLine, beg5.divLine, len5.divLine);
	if (this.parent.state == 'v') {
		gl.drawArrays(typ5.divLineV, beg5.divLineV, len5.divLineV);
	} else {
		gl.drawArrays(typ5.divLineH, beg5.divLineH, len5.divLineH);
	}
};

var invoicepane = v = new vp.DividerView(null, 'a', 0.4, 1);
v.name = Object.keys({invoicepane}).pop();
v.invoiceitems = [];
v.a = customerpane; customerpane.parent = v;
v.b = vendorpane; vendorpane.parent = v;
v.c = vendorcustomerdiv; vendorcustomerdiv.parent = v;
v.ratioMin['v'] = 0.25;
v.ratioMax['v'] = 0.75;
v.layoutFunc = function() {
	const v = this, h = v.h/v.getScale();
	const inflection1 = (v.w/240*49 + v.w/customertitlebar.neededWidth*20) / v.h;
	if (v.state == 'h' && v.ratio < inflection1) {
		v.a = customermain; customermain.parent = v;
		customerpane.parent = undefined;
	} else {
		v.a = customerpane; customerpane.parent = v;
		customermain.parent = customerpane;
	}
}
v.layoutEndFunc = function() {
	var v = this;
	v.ratioMin['h'] = (v.w/240*49) / v.h;
	v.ratioMax['h'] = (v.h - v.w/400*50 - v.w/240*90) / v.h;
}
var pmtbuttonbar = v = new vp.View(null);
v.name = Object.keys({pmtbuttonbar}).pop();
v.designFit = [400,50];
v.gadgets.push(v.homeGad = g = new vp.Gadget(v));
	g.w = 30; g.h = 30; g.actionFlags = vp.GAF_CLICKABLE;
	g.x = (50 - g.w)/2; g.y = (50 - g.h)/2;
	g.autoHull();
	g.icon = "\x00";
	g.renderFunc = function() {
		var g = this;
		var sel = clickTapActive.includes(g.gestureState);
		const mat = mat4.create();
		mat4.identity(mat);
		mat4.translate(mat, mat, [g.x, g.y, 0]);
		mat4.scale(mat, mat, [g.w/18, g.h/18, 0]);
		mat4.translate(mat, mat, [-1, 16, 0]);
		iconFont.draw(0,0, g.icon,
			g.enabled?(sel?vendorColors.uiButtonSel:vendorColors.uiButton):vendorColors.uiButtonGhost,
			g.viewport.mat, mat);
	}
	g.clickFunc = function() {
console.log('home');
//		paymentpane.scanner.stop();
		paymentpane.scanner.destroy();
		paymentpane.scanner = undefined;
		transitionTo(startpane, 'min');
	}
v.gadgets.push(v.pushGad = g = new vp.Gadget(v));
	g.w = 30; g.h = 30; g.actionFlags = vp.GAF_CLICKABLE;
	g.x = 50 + (50 - g.w)/2; g.y = (50 - g.h)/2;
	g.autoHull();
	g.icon = "\x01";
	g.renderFunc = v.homeGad.renderFunc;
	g.clickFunc = function() {
		console.log('pushGad');
	}
v.gadgets.push(v.popGad = g = new vp.Gadget(v));
	g.w = 30; g.h = 30; g.actionFlags = vp.GAF_CLICKABLE;
	g.x = 100 + (50 - g.w)/2; g.y = (50 - g.h)/2;
	g.autoHull();
	g.icon = "\x02";
	g.enabled = false;
	g.renderFunc = v.homeGad.renderFunc;
	g.clickFunc = function() {
		console.log('popGad');
	}
v.gadgets.push(v.trashGad = g = new vp.Gadget(v));
	g.w = 30; g.h = 30; g.actionFlags = vp.GAF_CLICKABLE;
	g.x = 150 + (50 - g.w)/2; g.y = (50 - g.h)/2;
	g.autoHull();
	g.icon = "\x03";
	g.renderFunc = v.homeGad.renderFunc;
	g.clickFunc = function() {
		if (window.confirm(tr("Discard this invoice?"))) {
			dataentry.clearDataEntry();
			invoicepane.invoiceitems = [];
			invoicepane.setRenderFlag(true);
			checkoutpages.toPage(0);
		}
	}
v.layoutFunc = function() {
	var totalW = 0; for (const g of this.gadgets) totalW += g.w;
	var space = (this.w / this.getScale() - totalW) / (this.gadgets.length * 2);
	var x = 0;
	for (const g of this.gadgets) {
		g.x = x + space;
		x += space + g.w + space;
	}
}
v.renderFunc = function() {
	const th = vendorColors;
	gl.clearColor(...th.uiBackground);
	gl.clear(gl.COLOR_BUFFER_BIT);
	for (const g of this.gadgets) {
		if (g.renderFunc) g.renderFunc.call(g);
	}
}

var vendorcustomerdiv = v = new vp.View();
v.name = Object.keys({vendorcustomerdiv}).pop();
v.designScale = 1;
v.gadgets.push(g = v.middleDividerGad = new vp.MiddleDividerGadget(v)); g.z = 1;
v.layoutFunc = function() { this.middleDividerGad.layout(); }
v.renderFunc = function() {
	const th = vendorColors;
	gl.clearColor(...th.uiBackground);
	gl.clear(gl.COLOR_BUFFER_BIT);
	useProg5();
	gl.enable(gl.BLEND);
	const mat = mat4.create();
	mat4.identity(mat);
	gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uProjectionMatrix'), false, this.mat);
	mat4.scale(mat, mat, [this.w, this.h, 0]);
	gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
	//gl.drawArrays(typ5.divLine, beg5.divLine, len5.divLine);
	if (this.parent.state == 'v') {
		gl.drawArrays(typ5.divLineV, beg5.divLineV, len5.divLineV);
	} else {
		gl.drawArrays(typ5.divLineH, beg5.divLineH, len5.divLineH);
	}
};

var paymentmain = v = new vp.View(null);
v.name = Object.keys({paymentmain}).pop();
v.layoutFunc = function() {
}
v.renderFunc = function() {
	const th = vendorColors;
	gl.clearColor(1,0,0,1);
	gl.clear(gl.COLOR_BUFFER_BIT);
}

var paymentpane = v = new vp.SliceView(null, 'b', 0.125);
v.name = Object.keys({paymentpane}).pop();
v.prop = true;
v.a = pmtbuttonbar; pmtbuttonbar.parent = v;
v.b = paymentmain; paymentmain.parent = v;
v.switchedToFunc = function() {
console.log('switchToFunc()');
	this.scanner = new e(
		document.getElementById('scan1'),
		result => console.log('decoded qr code:', result),
		{ returnDetailedScanResult: true },
	);
console.log('a');
	this.scanner.start();
}

  var menupane = v = new vp.View(null);
	v.name = Object.keys({menupane}).pop();
  v.gadgets.push(g = new vp.MatrixGadget(v));
  //g.w = 10; g.h = 1000; //g.f = GF_RELH;
	g.y = 100;
  g.convexHull = g.computeHull([50,50, 100,200, 200,200, 200,100]);
  g.actionFlags = vp.GAF_CLICKABLE;// | vp.GAF_DRAGGABLE | vp.GAF_PINCHABLE;
  g.clickFunc = function() {
    var g = this; g.f = !(g.f); vp.setDebugFlags(g.f, g.f);
    var v = g.viewport; while (v.parent) v = v.parent; v.setRenderFlag(true);
  }
  var quadrant4;
  v.gadgets.push(g = new vp.MatrixGadget(v));
  //g.w = 10; g.h = 1000; //g.f = GF_RELH;
  g.convexHull = g.computeHull([50,50, 100,200, 200,200, 200,100]);
  g.actionFlags = vp.GAF_CLICKABLE | vp.GAF_DRAGGABLE | vp.GAF_PINCHABLE;
  var mg1, mg2;
  g.clickFunc = function() {
    mat4.identity(mg1.targetView.userMat);
    mat4.identity(mg2.targetGad.mat);
    quadrant4.rematrix();
    quadrant4.setRenderFlag(true);
    quadrant4.renderAll();
    //console.log('click', this);
  }
  v.renderFunc = function() {
    gl.clearColor(0.380, 0.588, 0.259, 1);
    gl.clear(gl.COLOR_BUFFER_BIT);
    useProg2();
    gl.enable(gl.BLEND);
    gl.uniform4fv(gl.getUniformLocation(prog2, 'overallColor'), new Float32Array([0,0,0, 1]));
    gl.uniformMatrix4fv(gl.getUniformLocation(prog2, 'uProjectionMatrix'), false, this.mat);
    const mat = mat4.create();
    for (const g of this.gadgets) {
      var h = g.convexHull;
      for (p = 0; p < h.length; p += 2) {
      mat4.identity(mat);
      mat4.translate(mat, mat, [h[p+0]+g.x, h[p+1]+g.y, 0]);
      mat4.scale(mat, mat, [h[(p+2)%h.length]-h[p+0], h[(p+3)%h.length]-h[p+1], 0]);
      gl.uniformMatrix4fv(
        gl.getUniformLocation(prog2, 'uModelViewMatrix'),
        false, mat);
      gl.drawArrays(typ2.unitLine, beg2.unitLine, len2.unitLine);
      }
    }
  };

  //v.gadgets.push(v.swipeGad = new vp.SwipeGadget(v));
  //v.swipeGad.actionFlags = vp.GAF_SWIPEABLE_UPDOWN | vp.GAF_SWIPEABLE_LEFTRIGHT;
  //v.layoutFunc = function() { this.swipeGad.layout(); }

  var quadrant3 = v = new vp.View(null);
	v.name = Object.keys({quadrant3}).pop();
  v.gadgets.push(g = new vp.MatrixGadget(v));
  //g.w = 10; g.h = 1000; //g.f = GF_RELH;
  g.convexHull = g.computeHull([50,50, 100,200, 200,200, 200,100]);
  g.actionFlags = vp.GAF_CLICKABLE | vp.GAF_CONTEXTMENU | vp.GAF_DRAGGABLE | vp.GAF_PINCHABLE;
  g.clickFunc = function() {
    //console.log('click', this);
  }
  v.renderFunc = function() {
    gl.clearColor(0.882, 0.647, 0.353, 1);
    gl.clear(gl.COLOR_BUFFER_BIT);
    useProg2();
    gl.uniform4fv(gl.getUniformLocation(prog2, 'overallColor'), new Float32Array([0,0,0, 1]));
    gl.uniformMatrix4fv(gl.getUniformLocation(prog2, 'uProjectionMatrix'), false, this.mat);
    const mat = mat4.create();
    for (const g of this.gadgets) {
      var h = g.convexHull;
      for (p = 0; p < h.length; p += 2) {
      mat4.identity(mat);
      mat4.translate(mat, mat, [h[p+0], h[p+1], 0]);
      mat4.scale(mat, mat, [h[(p+2)%h.length]-h[p+0], h[(p+3)%h.length]-h[p+1], 0]);
      gl.uniformMatrix4fv(
        gl.getUniformLocation(prog2, 'uModelViewMatrix'),
        false, mat);
      gl.drawArrays(typ2.unitLine, beg2.unitLine, len2.unitLine);
      }
    }
  };

  quadrant4 = v = new vp.View(null);
	v.name = Object.keys({quadrant4}).pop();
  v.gadgets.push(mg1 = g = new vp.MatrixGadget(v));
  g.convexHull = g.computeHull([50,50, 100,200, 200,200, 200,100]);
  g.actionFlags = vp.GAF_CLICKABLE | vp.GAF_DRAGGABLE | vp.GAF_PINCHABLE;
  g.clickFunc = function() {
    //console.log('click', this);
  }
  v.gadgets.push(mg2 = g = new vp.MatrixGadget(v));
  g.convexHull = g.computeHull([150,50, 200,200, 300,200, 300,100]);
  g.actionFlags = vp.GAF_CLICKABLE | vp.GAF_DRAGGABLE | vp.GAF_PINCHABLE;
  g.targetGad = g;
  g.clickFunc = function() {
    //console.log('click', this);
  }
  v.renderFunc = function() {
    gl.clearColor(0.416, 0.533, 0.573, 1);
    gl.clear(gl.COLOR_BUFFER_BIT);
    useProg2();
    gl.enable(gl.BLEND);
    gl.uniform4fv(gl.getUniformLocation(prog2, 'overallColor'), new Float32Array([0,0,0, 1]));
    gl.uniformMatrix4fv(gl.getUniformLocation(prog2, 'uProjectionMatrix'), false, this.mat);
    const mat = mat4.create();
    for (const g of this.gadgets) {
      var h = g.convexHull;
      for (p = 0; p < h.length; p += 2) {
        mat4.identity(mat);
        mat4.multiply(mat, mat, g.mat);
        mat4.translate(mat, mat, [h[p+0], h[p+1], 0]);
        mat4.scale(mat, mat, [h[(p+2)%h.length]-h[p+0], h[(p+3)%h.length]-h[p+1], 0]);
        gl.uniformMatrix4fv(
          gl.getUniformLocation(prog2, 'uModelViewMatrix'),
          false, mat);
        gl.drawArrays(typ2.unitLine, beg2.unitLine, len2.unitLine);
      }
    }
  };

function scrollUpDn(g, amt) {
	var wi2px = window.visualViewport.scale * window.devicePixelRatio;
	var px2wi = 1/wi2px;
	p = { gestureState: '', touching: false, px: 0, py: 0 }; p.e = {};
	p.x = 0 * wi2px; p.ox = p.x; p.px = p.x;
	p.y = 0 * wi2px; p.oy = p.y; p.py = p.y;
	if (g.swipeBeginFunc) g.swipeBeginFunc.call(g, p);
	p.dx = 0; p.x = p.x;
	p.dy = amt /* * window.devicePixelRatio*/; p.y = p.y + p.dy;
	if (g.swipeMoveFunc) g.swipeMoveFunc.call(g, p);
	if (g.swipeEndFunc) g.swipeEndFunc.call(g, p);
}
/*
	var scrollbar = v = new vp.View();
	v.name = Object.keys({scrollbar}).pop();
	v.gadgets.push(g = v.upGad = new vp.Gadget(v)); g.z = 2;
  g.clickFunc = function() { scrollUpDn(startpane.swipeGad, 0.885); }
  //g.holdBeginFunc = function () { console.log('hold-begin'); }
  //g.holdEndFunc = function () { console.log('hold-end'); }
	v.gadgets.push(g = v.dnGad = new vp.Gadget(v)); g.z = 2;
  g.clickFunc = function() { scrollUpDn(startpane.swipeGad, -0.885); }
  //g.holdBeginFunc = function () { console.log('hold-begin'); }
  //g.holdEndFunc = function () { console.log('hold-end'); }
	v.gadgets.push(g = v.knobGad = new vp.Gadget(v)); g.z = -1;
  g.shown = 40; g.total = 100; g.start = 10;
	v.gadgets.push(g = v.pupGad = new vp.Gadget(v)); g.z = -2;
  g.clickFunc = function() { scrollUpDn(startpane.swipeGad, 1.7); }
	v.gadgets.push(g = v.pdnGad = new vp.Gadget(v)); g.z = -2;
  g.clickFunc = function() { scrollUpDn(startpane.swipeGad, -1.7); }
	v.layoutFunc = function() {
		const clamp = (num, min, max) => Math.min(Math.max(num, min), max);
		var g, v = this, s = v.getScale();
		g = v.upGad; g.actionFlags = (vp.GAF_CLICKABLE | vp.GAF_HOLDABLE);
		g.convexHull = g.computeHull([0,10, 5,0, 10,10]);
		g.extendedHulls = {}; g.boundingBoxes = {};

		g = v.dnGad; g.actionFlags = (vp.GAF_CLICKABLE | vp.GAF_HOLDABLE);
		g.convexHull = g.computeHull([0,0, 5,10, 10,0]); g.y = v.h/s - 10;
		g.extendedHulls = {}; g.boundingBoxes = {};

		g = v.knobGad; g.actionFlags = vp.GAF_DRAGGABLE_UPDOWN;
    var h = (v.h/s-20  )*clamp(g.shown/g.total, 0,1);
		var y = (v.h/s-20-h)*clamp(g.start/(g.total-g.shown), 0,1);
		g.convexHull = g.computeHull([0,y, 10,y, 10,y+h, 0,y+h]); g.y = 10;
		g.extendedHulls = {}; g.boundingBoxes = {};

		g = v.pupGad; g.actionFlags = vp.GAF_CLICKABLE;
		g.convexHull = g.computeHull([0,0, 10,0, 10,y, 0,y]); g.y = 10;
		g.extendedHulls = {}; g.boundingBoxes = {};

		g = v.pdnGad; g.actionFlags = vp.GAF_CLICKABLE;
		g.convexHull = g.computeHull([0,y+h, 10,y+h, 10,v.h/s-20, 0,v.h/s-20]); g.y = 10;
		g.extendedHulls = {}; g.boundingBoxes = {};
	}
	v.renderFunc = function() {
		var s = this.getScale();
		var sel;
		gl.clearColor(th.uiBackground[0],th.uiBackground[1],th.uiBackground[2], 1);
		gl.clear(gl.COLOR_BUFFER_BIT);
		useProg5();
		gl.enable(gl.BLEND);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uProjectionMatrix'), false, this.mat);
		const mat = mat4.create();
    var selColor = [1,0.1,0.1, 1];
		var white = [1,1,1, 1]

		// Up button.
		if (this.upGad.gestureState && this.upGad.gestureState == 'hold')
			scrollUpDn(startpane.swipeGad, 0.5);
		sel = this.upGad.gestureState
			&& ['begin-click','recover-click','hold'].includes(this.upGad.gestureState);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(sel?selColor:white));
		mat4.identity(mat);
		mat4.scale(mat, mat, [10, 10, 0]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.drawArrays(typ5.scrollUp, beg5.scrollUp, len5.scrollUp);

		// Down button.
		if (this.dnGad.gestureState && this.dnGad.gestureState == 'hold')
			scrollUpDn(startpane.swipeGad, -0.5);
		sel = this.dnGad.gestureState
			&& ['begin-click','recover-click','hold'].includes(this.dnGad.gestureState);
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(sel?selColor:white));
		mat4.identity(mat);
		mat4.translate(mat, mat, [0, this.h/s, 0]);
		mat4.scale(mat, mat, [10, -10, 0]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.drawArrays(typ5.scrollDn, beg5.scrollDn, len5.scrollDn);

		// Scroll bar knob.
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array([.1,.1,.1,1]));
		mat4.identity(mat);
		mat4.translate(mat, mat, [4, 10, 0]);
		mat4.scale(mat, mat, [2, this.h/s-20, 0]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.drawArrays(typ5.rect, beg5.rect, len5.rect);
		sel = this.knobGad.gestureState
			&& (this.knobGad.gestureState=='drag'
				||this.knobGad.gestureState=='drag');
		gl.uniform4fv(gl.getUniformLocation(prog5, 'overallColor'),
			new Float32Array(sel?selColor:white));
		mat4.identity(mat);
		mat4.translate(mat, mat, [3, 10+this.knobGad.convexHull[1], 0]);
		mat4.scale(mat, mat, [4, this.knobGad.convexHull[5]-this.knobGad.convexHull[1], 0]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		gl.drawArrays(typ5.divLineH, beg5.divLineH, len5.divLineH);
	};

  var walletpane = v = new vp.SliceView(null, 'r', 10);
	v.name = Object.keys({walletpane}).pop();
	v.designFit = [400,400];
  v.a = scrollbar; scrollbar.parent = v;
  v.b = startpane; startpane.parent = v;
*/
  var div3and4 = v = new vp.View();
	v.name = Object.keys({div3and4}).pop();
  v.gadgets.push(g = v.middleDividerGad = new vp.MiddleDividerGadget(v)); g.z = 1;
  v.layoutFunc = function() { this.middleDividerGad.layout(); }

  var quadrants3and4 = v = new vp.DividerView(null, 'a', 0.5, 0);
	v.name = Object.keys({quadrants3and4}).pop();
  v.a = quadrant3; quadrant3.parent = v;
  v.b = quadrant4; quadrant4.parent = v;
  v.c = div3and4; div3and4.parent = v;

	var maindivider = v = new vp.View();
	v.name = Object.keys({maindivider}).pop();
	v.designScale = 1;
	v.gadgets.push(g = v.middleDividerGad = new vp.MiddleDividerGadget(v)); g.z = 1;
	v.layoutFunc = function() { this.middleDividerGad.layout(); }
	v.renderFunc = function() {
		const th = vendorColors;
		gl.clearColor(th.uiBackground[0],th.uiBackground[1],th.uiBackground[2], 1);
		gl.clear(gl.COLOR_BUFFER_BIT);
		useProg5();
		gl.enable(gl.BLEND);
		const mat = mat4.create();
		mat4.identity(mat);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uProjectionMatrix'), false, this.mat);
		mat4.scale(mat, mat, [this.w, this.h, 0]);
		gl.uniformMatrix4fv(gl.getUniformLocation(prog5, 'uModelViewMatrix'), false, mat);
		//gl.drawArrays(typ5.divLine, beg5.divLine, len5.divLine);
		if (this.parent.state == 'v') {
			gl.drawArrays(typ5.divLineV, beg5.divLineV, len5.divLineV);
		} else {
			gl.drawArrays(typ5.divLineH, beg5.divLineH, len5.divLineH);
		}
	};

	var menudivider = v = new vp.View();
	v.name = Object.keys({menudivider}).pop();
	v.designScale = 1;
	v.gadgets.push(g = v.middleDividerGad = new vp.MiddleDividerGadget(v)); g.z = 1;
	v.layoutFunc = function() { this.middleDividerGad.layout(); }

  var div = v = new vp.DividerView(null, 'a', 0.5, 1);
	v.name = Object.keys({div}).pop();
  div.designSize = 640*400;
  v.a = startpane; startpane.parent = v;
  v.b = quadrants3and4; quadrants3and4.parent = v;
  v.c = maindivider; maindivider.parent = v;
	const transitionTo = function(view, option = '') {
		v = allblack;
		v.transitionOption = option;
		v.root = menudiv;
		v.state = 'begin';
		v.root.b = v; v.parent = v.root;
		v.root.relayout();
		v.target = view;
		v.setRenderFlag(true);
	};

	var allblack = v = new vp.View(null);
	v.name = Object.keys({allblack}).pop();
	v.renderFunc = function() {
		if (false) {
			if (this.counter)
				console.log('transition state:', this.state, this.counter);
			else
				console.log('transition state:', this.state);
		}
		gl.clearColor(0,0,0, 1);
		gl.clear(gl.COLOR_BUFFER_BIT);
		switch (this.state) {
		case 'begin':
			this.counter = 1; this.state = 't1';
			break;
		case 't1':
			this.counter = this.counter - 1;
			if (this.counter <= 0) this.state = 'go fullscreen';
			break;
		case 'go fullscreen':
			this.resized = false;
			if (this.transitionOption == 'max') fullscreen.enter();
			if (this.transitionOption == 'min') fullscreen.exit();
			this.counter = 100; this.state = 't2';
			break;
		case 't2':
			this.counter = this.counter - 1;
			if (this.resized) { this.resized = false; this.counter = 20; }
			if (this.counter <= 0) this.state = 'switch view';
			break;
		case 'switch view':
			this.root.b = this.target; this.target.parent = this.root
			this.root.relayout();
			if (this.target.switchedToFunc) this.target.switchedToFunc();
			this.state = 'done';
			break;
		default:
			return;
		}
		this.root.setRenderFlag(true);
	};
	var allblack;
  var menudiv = v = new vp.DividerView(null, 'h', 0, 0);
	v.name = Object.keys({menudiv}).pop();
  div.designSize = 640*400;
  v.a = menupane; menupane.parent = v;
  v.b = startpane; startpane.parent = v;
  v.c = menudivider; menudivider.parent = v;
	v.resizeFunc = function() {
		allblack.resized = true;
	}
	vp.start(menudiv);
}
var loadPending = true;
function loadCheck() {
  if ( loadPending
    && defaultFont.isReady()
    && iconFont.isReady()
  ) { loadPending = false; main(); }
}

window.onload = function () {
  defaultFont = new df.GlyphSet();
  defaultFont.loadFromURL(
    "defaultFont",
    loadCheck,
    "data:application/octet-stream;base64,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",
  );
  iconFont = new df.GlyphSet();
  iconFont.loadFromURL(
    "iconFont",
    loadCheck,
    "data:application/octet-stream;base64,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",
  );
}
</script>
<meta name="theme-color" content="#000000" />
</head>
<body style="text-align: center; touch-action: none; overflow: hidden; margin: 0; padding: 0;">
  <canvas id="app1"></canvas>
  <video id="scan1"></video>
  <canvas id="buf1" style="display: none;"></canvas>
  <input id="prev" type="text" style="position:fixed;left:-2000px; display: none;">
  <input id="numpad" type="number" style="position:fixed;left:-2000px;">
  <input id="kb" type="text" style="position:fixed;left:-2000px; display: none;">
  <input id="next" type="text" style="position:fixed;left:-2000px; display: none;">
  <input type="file" id="fileinput" multiple accept="image/*" style="display: none;">
</body>
</html>
